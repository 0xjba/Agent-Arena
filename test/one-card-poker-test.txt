[2025-03-21T14:51:08.891Z] 
===== SETTING UP TEST ENVIRONMENT =====
[2025-03-21T14:51:08.922Z] Wallet setup complete.
[2025-03-21T14:51:08.922Z] Owner address: 0x1dA9aCB41763f97F744Da547F2d103042e8Ab239
[2025-03-21T14:51:08.922Z] Player 1 address: 0x9Fde625ED8A6eC0f3cA393A62be34231a5c167F4
[2025-03-21T14:51:08.922Z] Player 2 address: 0x0Fae37437c1347c23dc279b424663579d2df67df
[2025-03-21T14:51:08.922Z] Player 3 address: 0xd2e443F6CF19d5d359e82bbEea76e1133028fda5
[2025-03-21T14:51:08.922Z] Player 4 address: 0x7B7057B07218fa9f357E39cb2fC2E723C2bfcf9F
[2025-03-21T14:51:08.922Z] Keeper address: 0x1dA9aCB41763f97F744Da547F2d103042e8Ab239
[2025-03-21T14:51:08.923Z] 
----- CHECKING WALLET BALANCES -----
[2025-03-21T14:51:10.105Z] Address 0x1dA9aCB41763f97F744Da547F2d103042e8Ab239 has 0.0 ETH
[2025-03-21T14:51:10.105Z] WARNING: Address 0x1dA9aCB41763f97F744Da547F2d103042e8Ab239 has low balance. Please fund with ETH.
[2025-03-21T14:51:10.106Z] Address 0x9Fde625ED8A6eC0f3cA393A62be34231a5c167F4 has 0.0 ETH
[2025-03-21T14:51:10.106Z] WARNING: Address 0x9Fde625ED8A6eC0f3cA393A62be34231a5c167F4 has low balance. Please fund with ETH.
[2025-03-21T14:51:10.107Z] Address 0x0Fae37437c1347c23dc279b424663579d2df67df has 0.0 ETH
[2025-03-21T14:51:10.107Z] WARNING: Address 0x0Fae37437c1347c23dc279b424663579d2df67df has low balance. Please fund with ETH.
[2025-03-21T14:51:10.109Z] Address 0xd2e443F6CF19d5d359e82bbEea76e1133028fda5 has 0.0 ETH
[2025-03-21T14:51:10.109Z] WARNING: Address 0xd2e443F6CF19d5d359e82bbEea76e1133028fda5 has low balance. Please fund with ETH.
[2025-03-21T14:51:10.111Z] Address 0x7B7057B07218fa9f357E39cb2fC2E723C2bfcf9F has 0.0 ETH
[2025-03-21T14:51:10.111Z] WARNING: Address 0x7B7057B07218fa9f357E39cb2fC2E723C2bfcf9F has low balance. Please fund with ETH.
[2025-03-21T14:51:10.113Z] Address 0x1dA9aCB41763f97F744Da547F2d103042e8Ab239 has 0.0 ETH
[2025-03-21T14:51:10.113Z] WARNING: Address 0x1dA9aCB41763f97F744Da547F2d103042e8Ab239 has low balance. Please fund with ETH.
[2025-03-21T14:51:10.113Z] 
----- DEPLOYING CONTRACTS -----
[2025-03-21T14:51:10.113Z] Deploying CardLibrary...
[2025-03-21T14:51:36.938Z] 
===== SETTING UP TEST ENVIRONMENT =====
[2025-03-21T14:51:36.967Z] Wallet setup complete.
[2025-03-21T14:51:36.967Z] Owner address: 0x1dA9aCB41763f97F744Da547F2d103042e8Ab239
[2025-03-21T14:51:36.967Z] Player 1 address: 0x9Fde625ED8A6eC0f3cA393A62be34231a5c167F4
[2025-03-21T14:51:36.967Z] Player 2 address: 0x0Fae37437c1347c23dc279b424663579d2df67df
[2025-03-21T14:51:36.967Z] Player 3 address: 0xd2e443F6CF19d5d359e82bbEea76e1133028fda5
[2025-03-21T14:51:36.967Z] Player 4 address: 0x7B7057B07218fa9f357E39cb2fC2E723C2bfcf9F
[2025-03-21T14:51:36.967Z] Keeper address: 0x1dA9aCB41763f97F744Da547F2d103042e8Ab239
[2025-03-21T14:51:36.967Z] 
----- CHECKING WALLET BALANCES -----
[2025-03-21T14:51:38.240Z] Address 0x1dA9aCB41763f97F744Da547F2d103042e8Ab239 has 0.67212017844 ETH
[2025-03-21T14:51:38.519Z] Address 0x9Fde625ED8A6eC0f3cA393A62be34231a5c167F4 has 0.9900649164 ETH
[2025-03-21T14:51:38.795Z] Address 0x0Fae37437c1347c23dc279b424663579d2df67df has 0.7423533517 ETH
[2025-03-21T14:51:39.075Z] Address 0xd2e443F6CF19d5d359e82bbEea76e1133028fda5 has 0.4930769849 ETH
[2025-03-21T14:51:39.384Z] Address 0x7B7057B07218fa9f357E39cb2fC2E723C2bfcf9F has 0.7406826889 ETH
[2025-03-21T14:51:39.660Z] Address 0x1dA9aCB41763f97F744Da547F2d103042e8Ab239 has 0.67212017844 ETH
[2025-03-21T14:51:39.660Z] 
----- DEPLOYING CONTRACTS -----
[2025-03-21T14:51:39.660Z] Deploying CardLibrary...
[2025-03-21T14:51:45.941Z] CardLibrary deployed at: 0xAab74b528a8499A3c9e8D53d6D49A6C9756730F1
[2025-03-21T14:51:45.941Z] Deploying GameLibrary...
[2025-03-21T14:51:52.082Z] GameLibrary deployed at: 0xAEa4605E99b9E99442cBf4F83cDe3ED6984493f5
[2025-03-21T14:53:32.555Z] 
===== SETTING UP TEST ENVIRONMENT =====
[2025-03-21T14:53:32.584Z] Wallet setup complete.
[2025-03-21T14:53:32.584Z] Owner address: 0x1dA9aCB41763f97F744Da547F2d103042e8Ab239
[2025-03-21T14:53:32.585Z] Player 1 address: 0x9Fde625ED8A6eC0f3cA393A62be34231a5c167F4
[2025-03-21T14:53:32.585Z] Player 2 address: 0x0Fae37437c1347c23dc279b424663579d2df67df
[2025-03-21T14:53:32.585Z] Player 3 address: 0xd2e443F6CF19d5d359e82bbEea76e1133028fda5
[2025-03-21T14:53:32.585Z] Player 4 address: 0x7B7057B07218fa9f357E39cb2fC2E723C2bfcf9F
[2025-03-21T14:53:32.585Z] Keeper address: 0x1dA9aCB41763f97F744Da547F2d103042e8Ab239
[2025-03-21T14:53:32.585Z] 
----- CHECKING WALLET BALANCES -----
[2025-03-21T14:53:33.962Z] Address 0x1dA9aCB41763f97F744Da547F2d103042e8Ab239 has 0.67186420124 ETH
[2025-03-21T14:53:34.241Z] Address 0x9Fde625ED8A6eC0f3cA393A62be34231a5c167F4 has 0.9900649164 ETH
[2025-03-21T14:53:34.522Z] Address 0x0Fae37437c1347c23dc279b424663579d2df67df has 0.7423533517 ETH
[2025-03-21T14:53:34.794Z] Address 0xd2e443F6CF19d5d359e82bbEea76e1133028fda5 has 0.4930769849 ETH
[2025-03-21T14:53:35.068Z] Address 0x7B7057B07218fa9f357E39cb2fC2E723C2bfcf9F has 0.7406826889 ETH
[2025-03-21T14:53:35.345Z] Address 0x1dA9aCB41763f97F744Da547F2d103042e8Ab239 has 0.67186420124 ETH
[2025-03-21T14:53:35.345Z] 
----- DEPLOYING CONTRACTS -----
[2025-03-21T14:53:35.345Z] Deploying CardLibrary...
[2025-03-21T14:53:38.283Z] CardLibrary deployed at: 0xB363Ba1AB3EFd63495BF3505C5405960cf301450
[2025-03-21T14:53:38.284Z] Deploying GameLibrary...
[2025-03-21T14:53:40.480Z] GameLibrary deployed at: 0xcE450e324F56e6FC212de94703690D81Ad49dC47
[2025-03-21T14:53:40.481Z] Deploying OneCard main contract...
[2025-03-21T14:53:47.328Z] OneCard contract deployed at: 0x3efA2d00026953524d1678B44Ad0ae2C2Dc745E6
[2025-03-21T14:53:47.328Z] Deploying PokerSpectatorView contract...
[2025-03-21T14:53:53.466Z] PokerSpectatorView contract deployed at: 0x89eEcbCb4737F344eB50a76fAA25C46e9Bb6f1E3
[2025-03-21T14:53:53.466Z] 
Add these to your .env file for future use:
[2025-03-21T14:53:53.466Z] POKER_CONTRACT_ADDRESS=0x3efA2d00026953524d1678B44Ad0ae2C2Dc745E6
[2025-03-21T14:53:53.466Z] SPECTATOR_CONTRACT_ADDRESS=0x89eEcbCb4737F344eB50a76fAA25C46e9Bb6f1E3
[2025-03-21T14:53:53.468Z] 
===== STARTING ONE CARD POKER WITH MONTY HALL GAME TEST =====
[2025-03-21T14:53:53.468Z] 
----- ADDING PLAYERS TO WHITELIST -----
[2025-03-21T14:53:55.234Z] Added 4 players to whitelist
[2025-03-21T14:53:55.234Z] 
----- CREATING A NEW GAME -----
[2025-03-21T14:57:02.313Z] 
===== SETTING UP TEST ENVIRONMENT =====
[2025-03-21T14:57:02.343Z] Wallet setup complete.
[2025-03-21T14:57:02.343Z] Owner address: 0x1dA9aCB41763f97F744Da547F2d103042e8Ab239
[2025-03-21T14:57:02.343Z] Player 1 address: 0x9Fde625ED8A6eC0f3cA393A62be34231a5c167F4
[2025-03-21T14:57:02.343Z] Player 2 address: 0x0Fae37437c1347c23dc279b424663579d2df67df
[2025-03-21T14:57:02.343Z] Player 3 address: 0xd2e443F6CF19d5d359e82bbEea76e1133028fda5
[2025-03-21T14:57:02.343Z] Player 4 address: 0x7B7057B07218fa9f357E39cb2fC2E723C2bfcf9F
[2025-03-21T14:57:02.343Z] Keeper address: 0x1dA9aCB41763f97F744Da547F2d103042e8Ab239
[2025-03-21T14:57:02.343Z] 
----- CHECKING WALLET BALANCES -----
[2025-03-21T14:57:03.382Z] Address 0x1dA9aCB41763f97F744Da547F2d103042e8Ab239 has 0.66056503714 ETH
[2025-03-21T14:57:03.672Z] Address 0x9Fde625ED8A6eC0f3cA393A62be34231a5c167F4 has 0.9900649164 ETH
[2025-03-21T14:57:03.951Z] Address 0x0Fae37437c1347c23dc279b424663579d2df67df has 0.7423533517 ETH
[2025-03-21T14:57:04.234Z] Address 0xd2e443F6CF19d5d359e82bbEea76e1133028fda5 has 0.4930769849 ETH
[2025-03-21T14:57:04.512Z] Address 0x7B7057B07218fa9f357E39cb2fC2E723C2bfcf9F has 0.7406826889 ETH
[2025-03-21T14:57:04.792Z] Address 0x1dA9aCB41763f97F744Da547F2d103042e8Ab239 has 0.66056503714 ETH
[2025-03-21T14:57:04.792Z] 
----- DEPLOYING CONTRACTS -----
[2025-03-21T14:57:04.792Z] Deploying CardLibrary...
[2025-03-21T14:57:07.331Z] CardLibrary deployed at: 0xb5EAA1410b9eE012db1e9f157945feE047d4e5FC
[2025-03-21T14:57:07.331Z] Deploying GameLibrary...
[2025-03-21T14:57:13.194Z] GameLibrary deployed at: 0xABaBf1cEeff2E3D9f0577503D2ACF2058a6B2f29
[2025-03-21T14:57:13.195Z] Deploying OneCard main contract...
[2025-03-21T14:57:15.653Z] OneCard contract deployed at: 0x56Ac89B13C17F76ff0b1Fb0C82e7655244c34992
[2025-03-21T14:57:15.653Z] Deploying PokerSpectatorView contract...
[2025-03-21T14:57:21.484Z] PokerSpectatorView contract deployed at: 0xc4a7B58D21a2A186CD4Dedfa15d7eC15DB7a2Aa7
[2025-03-21T14:57:21.484Z] 
Add these to your .env file for future use:
[2025-03-21T14:57:21.484Z] POKER_CONTRACT_ADDRESS=0x56Ac89B13C17F76ff0b1Fb0C82e7655244c34992
[2025-03-21T14:57:21.484Z] SPECTATOR_CONTRACT_ADDRESS=0xc4a7B58D21a2A186CD4Dedfa15d7eC15DB7a2Aa7
[2025-03-21T14:57:21.487Z] 
===== STARTING ONE CARD POKER WITH MONTY HALL GAME TEST =====
[2025-03-21T14:57:21.488Z] 
----- ADDING PLAYERS TO WHITELIST -----
[2025-03-21T14:57:27.587Z] Added 4 players to whitelist
[2025-03-21T14:57:27.587Z] 
----- CREATING A NEW GAME -----
[2025-03-21T14:57:33.665Z] Created Game with ID: 1
[2025-03-21T14:57:33.947Z] Initial players in game: 5
[2025-03-21T14:57:33.947Z] Player 1: 0x1dA9aCB41763f97F744Da547F2d103042e8Ab239
[2025-03-21T14:57:33.947Z] Player 2: 0x9Fde625ED8A6eC0f3cA393A62be34231a5c167F4
[2025-03-21T14:57:33.947Z] Player 3: 0x0Fae37437c1347c23dc279b424663579d2df67df
[2025-03-21T14:57:33.947Z] Player 4: 0xd2e443F6CF19d5d359e82bbEea76e1133028fda5
[2025-03-21T14:57:33.947Z] Player 5: 0x7B7057B07218fa9f357E39cb2fC2E723C2bfcf9F
[2025-03-21T14:57:33.948Z] 
----- VERIFYING GAME INFO BEFORE STARTING PEEK PHASE -----
[2025-03-21T14:57:34.229Z] Game state: REGISTRATION
[2025-03-21T14:57:34.229Z] Player count: 5
[2025-03-21T14:57:34.229Z] Active count: 5
[2025-03-21T14:57:34.229Z] Game keeper: 0x1dA9aCB41763f97F744Da547F2d103042e8Ab239
[2025-03-21T14:57:34.230Z] State version: 1
[2025-03-21T14:57:34.230Z] Is cleaned up: false
[2025-03-21T14:57:34.230Z] 
----- STARTING PEEK PHASE -----
[2025-03-21T14:57:35.975Z] startPeekPhase transaction submitted, waiting for confirmation...
[2025-03-21T14:57:36.662Z] startPeekPhase transaction confirmed!
[2025-03-21T14:57:36.662Z] Buffer period started before peek phase. Current state: REGISTRATION, Next state: PEEK_PHASE
[2025-03-21T14:57:36.662Z] Peek phase started for game 1
[2025-03-21T14:57:36.662Z] Game state updated: State=PEEK_PHASE, Pot=0, CurrentBet=0, StateVersion=2
[2025-03-21T14:57:36.937Z] Phase end time: 2025-03-21T15:00:05.000Z
[2025-03-21T14:57:36.937Z] Buffer end time: 2025-03-21T14:58:05.000Z
[2025-03-21T14:57:36.937Z] Waiting 29 seconds for buffer period to end...
[2025-03-21T14:57:36.937Z] Waiting for buffer period to end on TEN network...
[2025-03-21T14:58:06.947Z] Buffer period ended
[2025-03-21T14:58:06.949Z] 
----- PLAYERS PEEKING AT CARDS -----
[2025-03-21T14:58:07.917Z] Player 1 initial chip balance: 25
[2025-03-21T14:58:11.377Z] Player 1 (0x9Fde625ED8A6eC0f3cA393A62be34231a5c167F4) peeked at their card
[2025-03-21T14:58:11.378Z] Player action: peek, Amount: 5, Nonce: 1
[2025-03-21T14:58:11.433Z] Card for 0x9Fde625ED8A6eC0f3cA393A62be34231a5c167F4: 8 of Diamonds
[2025-03-21T14:58:11.657Z] Player 1 chip balance after peeking: 20
[2025-03-21T14:58:11.937Z] Player 2 initial chip balance: 25
[2025-03-21T14:58:13.717Z] Player 2 (0x0Fae37437c1347c23dc279b424663579d2df67df) peeked at their card
[2025-03-21T14:58:13.717Z] Player action: peek, Amount: 5, Nonce: 1
[2025-03-21T14:58:13.997Z] Player 2 chip balance after peeking: 20
[2025-03-21T14:58:13.997Z] 
----- PLAYER USING MONTY HALL OPTION -----
[2025-03-21T14:58:14.278Z] Player 3 initial chip balance: 25
[2025-03-21T14:58:15.455Z] Card for 0x0Fae37437c1347c23dc279b424663579d2df67df: Queen of Spades
[2025-03-21T14:58:19.412Z] Player 3 (0xd2e443F6CF19d5d359e82bbEea76e1133028fda5) used Monty Hall option
[2025-03-21T14:58:19.412Z] Player action: montyHall, Amount: 7, Nonce: 1
[2025-03-21T14:58:19.426Z] Monty Hall cards revealed to 0xd2e443F6CF19d5d359e82bbEea76e1133028fda5:
[2025-03-21T14:58:19.426Z] - Ace of Clubs
[2025-03-21T14:58:19.426Z] - 6 of Clubs
[2025-03-21T14:58:19.698Z] Player 3 chip balance after using Monty Hall: 18
[2025-03-21T14:58:23.376Z] Player 3 decided to swap their card
[2025-03-21T14:58:23.377Z] Player action: swapCard, Amount: 0, Nonce: 2
[2025-03-21T14:58:23.377Z] Player 4 (0x7B7057B07218fa9f357E39cb2fC2E723C2bfcf9F) chose not to peek or use Monty Hall
[2025-03-21T14:58:23.428Z] 0xd2e443F6CF19d5d359e82bbEea76e1133028fda5 swapped 3 of Diamonds for 10 of Diamonds
[2025-03-21T14:58:23.677Z] 
----- PLAYER STATUS AFTER PEEK PHASE -----
[2025-03-21T14:58:23.956Z] Player 1 (0x9Fde625ED8A6eC0f3cA393A62be34231a5c167F4):
[2025-03-21T14:58:23.956Z]   Chip balance: 20
[2025-03-21T14:58:23.956Z]   Has peeked: true
[2025-03-21T14:58:23.956Z]   Used Monty Hall: false
[2025-03-21T14:58:23.957Z]   Action nonce: 1
[2025-03-21T14:58:24.238Z] Player 2 (0x0Fae37437c1347c23dc279b424663579d2df67df):
[2025-03-21T14:58:24.238Z]   Chip balance: 20
[2025-03-21T14:58:24.238Z]   Has peeked: true
[2025-03-21T14:58:24.238Z]   Used Monty Hall: false
[2025-03-21T14:58:24.238Z]   Action nonce: 1
[2025-03-21T14:58:24.515Z] Player 3 (0xd2e443F6CF19d5d359e82bbEea76e1133028fda5):
[2025-03-21T14:58:24.515Z]   Chip balance: 18
[2025-03-21T14:58:24.515Z]   Has peeked: false
[2025-03-21T14:58:24.515Z]   Used Monty Hall: true
[2025-03-21T14:58:24.515Z]   Action nonce: 2
[2025-03-21T14:58:24.798Z] Player 4 (0x7B7057B07218fa9f357E39cb2fC2E723C2bfcf9F):
[2025-03-21T14:58:24.798Z]   Chip balance: 25
[2025-03-21T14:58:24.798Z]   Has peeked: false
[2025-03-21T14:58:24.798Z]   Used Monty Hall: false
[2025-03-21T14:58:24.798Z]   Action nonce: 0
[2025-03-21T14:58:24.798Z] 
----- WAITING FOR PEEK PHASE TO END -----
[2025-03-21T14:58:25.081Z] Waiting 100 seconds for peek phase to end...
[2025-03-21T14:58:25.081Z] Waiting for peek phase to end on TEN network...
[2025-03-21T14:58:35.084Z] 90 seconds remaining in peek phase
[2025-03-21T14:59:05.088Z] 60 seconds remaining in peek phase
[2025-03-21T14:59:35.091Z] 30 seconds remaining in peek phase
[2025-03-21T15:00:05.096Z] Peek phase ended
[2025-03-21T15:00:05.097Z] 
----- ENDING PEEK PHASE -----
[2025-03-21T15:00:06.214Z] endPeekPhase transaction submitted, waiting for confirmation...
[2025-03-21T15:00:07.429Z] endPeekPhase transaction confirmed!
[2025-03-21T15:00:07.430Z] Buffer period started before betting phase. Current state: PEEK_PHASE, Next state: BETTING
[2025-03-21T15:00:07.430Z] Betting phase started for game 1
[2025-03-21T15:00:07.430Z] Game state updated: State=BETTING, Pot=0, CurrentBet=0, StateVersion=3
[2025-03-21T15:00:07.707Z] Phase end time: 2025-03-21T15:05:36.000Z
[2025-03-21T15:00:07.707Z] Buffer end time: 2025-03-21T15:00:36.000Z
[2025-03-21T15:00:07.707Z] Waiting 29 seconds for buffer period to end...
[2025-03-21T15:00:07.707Z] Waiting for buffer period to end on TEN network...
[2025-03-21T15:00:37.715Z] Buffer period ended
[2025-03-21T15:00:37.715Z] 
----- PLAYERS PLACING BETS -----
[2025-03-21T15:00:39.412Z] Player 1 (0x9Fde625ED8A6eC0f3cA393A62be34231a5c167F4) bet 5 chips
[2025-03-21T15:00:39.741Z] Pot after bet 1: 5, Current bet: 5
[2025-03-21T15:00:43.403Z] Player 2 (0x0Fae37437c1347c23dc279b424663579d2df67df) bet 5 chips
[2025-03-21T15:00:43.703Z] Pot after bet 2: 10, Current bet: 5
[2025-03-21T15:00:47.405Z] Player 3 (0xd2e443F6CF19d5d359e82bbEea76e1133028fda5) bet 10 chips (raising to 10)
[2025-03-21T15:00:47.707Z] Pot after bet 3: 20, Current bet: 10
[2025-03-21T15:00:51.413Z] Player 1 (0x9Fde625ED8A6eC0f3cA393A62be34231a5c167F4) bet additional 5 chips (calling the raise)
[2025-03-21T15:00:51.695Z] Pot after bet 4: 25, Current bet: 10
[2025-03-21T15:00:55.412Z] Player 2 (0x0Fae37437c1347c23dc279b424663579d2df67df) bet additional 5 chips (calling the raise)
[2025-03-21T15:00:55.413Z] Player action: bet, Amount: 5, Nonce: 3
[2025-03-21T15:00:55.710Z] Pot after bet 5: 30, Current bet: 10
[2025-03-21T15:00:59.406Z] Player 4 (0x7B7057B07218fa9f357E39cb2fC2E723C2bfcf9F) folded
[2025-03-21T15:00:59.726Z] Active players after fold: 4
[2025-03-21T15:00:59.726Z] 
----- PLAYER STATUS AFTER BETTING -----
[2025-03-21T15:01:00.010Z] Player 1 (0x9Fde625ED8A6eC0f3cA393A62be34231a5c167F4):
[2025-03-21T15:01:00.010Z]   Chip balance: 10
[2025-03-21T15:01:00.010Z]   Current bet: 10
[2025-03-21T15:01:00.010Z]   Has folded: false
[2025-03-21T15:01:00.010Z]   Action nonce: 3
[2025-03-21T15:01:00.288Z] Player 2 (0x0Fae37437c1347c23dc279b424663579d2df67df):
[2025-03-21T15:01:00.288Z]   Chip balance: 10
[2025-03-21T15:01:00.288Z]   Current bet: 10
[2025-03-21T15:01:00.288Z]   Has folded: false
[2025-03-21T15:01:00.288Z]   Action nonce: 3
[2025-03-21T15:01:00.568Z] Player 3 (0xd2e443F6CF19d5d359e82bbEea76e1133028fda5):
[2025-03-21T15:01:00.568Z]   Chip balance: 8
[2025-03-21T15:01:00.568Z]   Current bet: 10
[2025-03-21T15:01:00.568Z]   Has folded: false
[2025-03-21T15:01:00.569Z]   Action nonce: 3
[2025-03-21T15:01:00.847Z] Player 4 (0x7B7057B07218fa9f357E39cb2fC2E723C2bfcf9F):
[2025-03-21T15:01:00.847Z]   Chip balance: 25
[2025-03-21T15:01:00.847Z]   Current bet: 0
[2025-03-21T15:01:00.847Z]   Has folded: true
[2025-03-21T15:01:00.847Z]   Action nonce: 1
[2025-03-21T15:01:01.128Z] Have all active players matched the current bet? false
[2025-03-21T15:01:01.130Z] 
----- WAITING FOR BETTING PHASE TO END -----
[2025-03-21T15:01:01.415Z] Betting phase ends in 275 seconds at 2025-03-21T15:05:36.000Z
[2025-03-21T15:01:01.416Z] All players have matched bets, manually ending betting phase...
[2025-03-21T15:01:01.416Z] 
----- ENDING BETTING PHASE -----
[2025-03-21T15:01:02.519Z] endBettingPhase transaction submitted, waiting for confirmation...
[2025-03-21T15:01:03.454Z] Error ending betting phase: transaction failed [ See: https://links.ethers.org/v5-errors-CALL_EXCEPTION ] (transactionHash="0x680309dc8e33ff02addf74bb8a9b12ab549e812df078bde0eda28f8f093d03a6", transaction={"type":2,"chainId":443,"nonce":124,"maxPriorityFeePerGas":{"type":"BigNumber","hex":"0x59682f00"},"maxFeePerGas":{"type":"BigNumber","hex":"0x6553f100"},"gasPrice":null,"gasLimit":{"type":"BigNumber","hex":"0xe4e1c0"},"to":"0x56Ac89B13C17F76ff0b1Fb0C82e7655244c34992","value":{"type":"BigNumber","hex":"0x00"},"data":"0x30be62b20000000000000000000000000000000000000000000000000000000000000001","accessList":[],"hash":"0x680309dc8e33ff02addf74bb8a9b12ab549e812df078bde0eda28f8f093d03a6","v":1,"r":"0x02b23d5a5daf22305ebd51761a2417dc65f30b146a5d9c10d7159790f88bfa36","s":"0x2179d165dcc7186199a3209ab2fe401449c2640d54c33297cf16210d6c545520","from":"0x1dA9aCB41763f97F744Da547F2d103042e8Ab239","confirmations":0}, receipt={"to":"0x56Ac89B13C17F76ff0b1Fb0C82e7655244c34992","from":"0x1dA9aCB41763f97F744Da547F2d103042e8Ab239","contractAddress":null,"transactionIndex":0,"gasUsed":{"type":"BigNumber","hex":"0x9853"},"logsBloom":"0x00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000","blockHash":"0x7bd797ea4af5d6e7a653e6f9135b21b03282ee127de9933868a0e0369d7e9e65","transactionHash":"0x680309dc8e33ff02addf74bb8a9b12ab549e812df078bde0eda28f8f093d03a6","logs":[],"blockNumber":2470592,"confirmations":1,"cumulativeGasUsed":{"type":"BigNumber","hex":"0x7f68"},"effectiveGasPrice":{"type":"BigNumber","hex":"0x5f5e1000"},"status":0,"type":2,"byzantium":true}, code=CALL_EXCEPTION, version=providers/5.7.2)
[2025-03-21T15:01:03.454Z] Error during game flow: transaction failed [ See: https://links.ethers.org/v5-errors-CALL_EXCEPTION ] (transactionHash="0x680309dc8e33ff02addf74bb8a9b12ab549e812df078bde0eda28f8f093d03a6", transaction={"type":2,"chainId":443,"nonce":124,"maxPriorityFeePerGas":{"type":"BigNumber","hex":"0x59682f00"},"maxFeePerGas":{"type":"BigNumber","hex":"0x6553f100"},"gasPrice":null,"gasLimit":{"type":"BigNumber","hex":"0xe4e1c0"},"to":"0x56Ac89B13C17F76ff0b1Fb0C82e7655244c34992","value":{"type":"BigNumber","hex":"0x00"},"data":"0x30be62b20000000000000000000000000000000000000000000000000000000000000001","accessList":[],"hash":"0x680309dc8e33ff02addf74bb8a9b12ab549e812df078bde0eda28f8f093d03a6","v":1,"r":"0x02b23d5a5daf22305ebd51761a2417dc65f30b146a5d9c10d7159790f88bfa36","s":"0x2179d165dcc7186199a3209ab2fe401449c2640d54c33297cf16210d6c545520","from":"0x1dA9aCB41763f97F744Da547F2d103042e8Ab239","confirmations":0}, receipt={"to":"0x56Ac89B13C17F76ff0b1Fb0C82e7655244c34992","from":"0x1dA9aCB41763f97F744Da547F2d103042e8Ab239","contractAddress":null,"transactionIndex":0,"gasUsed":{"type":"BigNumber","hex":"0x9853"},"logsBloom":"0x00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000","blockHash":"0x7bd797ea4af5d6e7a653e6f9135b21b03282ee127de9933868a0e0369d7e9e65","transactionHash":"0x680309dc8e33ff02addf74bb8a9b12ab549e812df078bde0eda28f8f093d03a6","logs":[],"blockNumber":2470592,"confirmations":1,"cumulativeGasUsed":{"type":"BigNumber","hex":"0x7f68"},"effectiveGasPrice":{"type":"BigNumber","hex":"0x5f5e1000"},"status":0,"type":2,"byzantium":true}, code=CALL_EXCEPTION, version=providers/5.7.2)
[2025-03-21T15:02:12.173Z] 
===== SETTING UP TEST ENVIRONMENT =====
[2025-03-21T15:02:12.200Z] Wallet setup complete.
[2025-03-21T15:02:12.201Z] Owner address: 0x1dA9aCB41763f97F744Da547F2d103042e8Ab239
[2025-03-21T15:02:12.201Z] Player 1 address: 0x9Fde625ED8A6eC0f3cA393A62be34231a5c167F4
[2025-03-21T15:02:12.201Z] Player 2 address: 0x0Fae37437c1347c23dc279b424663579d2df67df
[2025-03-21T15:02:12.201Z] Player 3 address: 0xd2e443F6CF19d5d359e82bbEea76e1133028fda5
[2025-03-21T15:02:12.201Z] Player 4 address: 0x7B7057B07218fa9f357E39cb2fC2E723C2bfcf9F
[2025-03-21T15:02:12.201Z] Keeper address: 0x1dA9aCB41763f97F744Da547F2d103042e8Ab239
[2025-03-21T15:02:12.201Z] 
----- CHECKING WALLET BALANCES -----
[2025-03-21T15:02:13.217Z] Address 0x1dA9aCB41763f97F744Da547F2d103042e8Ab239 has 0.64631107024 ETH
[2025-03-21T15:02:13.512Z] Address 0x9Fde625ED8A6eC0f3cA393A62be34231a5c167F4 has 0.9896221568 ETH
[2025-03-21T15:02:13.792Z] Address 0x0Fae37437c1347c23dc279b424663579d2df67df has 0.7419696339 ETH
[2025-03-21T15:02:14.075Z] Address 0xd2e443F6CF19d5d359e82bbEea76e1133028fda5 has 0.4924689873 ETH
[2025-03-21T15:02:14.352Z] Address 0x7B7057B07218fa9f357E39cb2fC2E723C2bfcf9F has 0.7405505591 ETH
[2025-03-21T15:02:14.625Z] Address 0x1dA9aCB41763f97F744Da547F2d103042e8Ab239 has 0.64631107024 ETH
[2025-03-21T15:02:14.625Z] 
----- DEPLOYING CONTRACTS -----
[2025-03-21T15:02:14.625Z] Deploying CardLibrary...
[2025-03-21T15:02:20.971Z] CardLibrary deployed at: 0x7cc9738CebC4B18DB9AbD57f9356fF2564AFdc92
[2025-03-21T15:02:20.971Z] Deploying GameLibrary...
[2025-03-21T15:02:27.067Z] GameLibrary deployed at: 0x92c706Ac4eBEEE4f08117E7c4872fBD2B05816fB
[2025-03-21T15:02:27.068Z] Deploying OneCard main contract...
[2025-03-21T15:02:29.488Z] OneCard contract deployed at: 0xD6A9A1278825bd568e06A138e48D9c342e9539F8
[2025-03-21T15:02:29.489Z] Deploying PokerSpectatorView contract...
[2025-03-21T15:02:35.363Z] PokerSpectatorView contract deployed at: 0xc49e2Bfb350B70088752bD5d4561CD071d41978c
[2025-03-21T15:02:35.364Z] 
Add these to your .env file for future use:
[2025-03-21T15:02:35.364Z] POKER_CONTRACT_ADDRESS=0xD6A9A1278825bd568e06A138e48D9c342e9539F8
[2025-03-21T15:02:35.364Z] SPECTATOR_CONTRACT_ADDRESS=0xc49e2Bfb350B70088752bD5d4561CD071d41978c
[2025-03-21T15:02:35.369Z] 
===== STARTING ONE CARD POKER WITH MONTY HALL GAME TEST =====
[2025-03-21T15:02:35.369Z] 
----- ADDING PLAYERS TO WHITELIST -----
[2025-03-21T15:02:41.448Z] Added 4 players to whitelist
[2025-03-21T15:02:41.448Z] 
----- CREATING A NEW GAME -----
[2025-03-21T15:02:47.530Z] Created Game with ID: 1
[2025-03-21T15:02:47.844Z] Initial players in game: 5
[2025-03-21T15:02:47.844Z] Player 1: 0x1dA9aCB41763f97F744Da547F2d103042e8Ab239
[2025-03-21T15:02:47.844Z] Player 2: 0x9Fde625ED8A6eC0f3cA393A62be34231a5c167F4
[2025-03-21T15:02:47.844Z] Player 3: 0x0Fae37437c1347c23dc279b424663579d2df67df
[2025-03-21T15:02:47.844Z] Player 4: 0xd2e443F6CF19d5d359e82bbEea76e1133028fda5
[2025-03-21T15:02:47.844Z] Player 5: 0x7B7057B07218fa9f357E39cb2fC2E723C2bfcf9F
[2025-03-21T15:02:47.844Z] 
----- VERIFYING GAME INFO BEFORE STARTING PEEK PHASE -----
[2025-03-21T15:02:48.131Z] Game state: REGISTRATION
[2025-03-21T15:02:48.131Z] Player count: 5
[2025-03-21T15:02:48.131Z] Active count: 5
[2025-03-21T15:02:48.131Z] Game keeper: 0x1dA9aCB41763f97F744Da547F2d103042e8Ab239
[2025-03-21T15:02:48.131Z] State version: 1
[2025-03-21T15:02:48.131Z] Is cleaned up: false
[2025-03-21T15:02:48.132Z] 
----- STARTING PEEK PHASE -----
[2025-03-21T15:02:49.502Z] startPeekPhase transaction submitted, waiting for confirmation...
[2025-03-21T15:02:54.192Z] startPeekPhase transaction confirmed!
[2025-03-21T15:02:54.192Z] Buffer period started before peek phase. Current state: REGISTRATION, Next state: PEEK_PHASE
[2025-03-21T15:02:54.192Z] Peek phase started for game 1
[2025-03-21T15:02:54.193Z] Game state updated: State=PEEK_PHASE, Pot=0, CurrentBet=0, StateVersion=2
[2025-03-21T15:02:54.475Z] Phase end time: 2025-03-21T15:05:19.000Z
[2025-03-21T15:02:54.475Z] Buffer end time: 2025-03-21T15:03:19.000Z
[2025-03-21T15:02:54.475Z] Waiting 25 seconds for buffer period to end...
[2025-03-21T15:02:54.476Z] Waiting for buffer period to end on TEN network...
[2025-03-21T15:02:59.477Z] 20 seconds remaining in buffer period
[2025-03-21T15:03:09.480Z] 10 seconds remaining in buffer period
[2025-03-21T15:03:19.484Z] Buffer period ended
[2025-03-21T15:03:19.487Z] 
----- PLAYERS PEEKING AT CARDS -----
[2025-03-21T15:03:20.313Z] Player 1 initial chip balance: 25
[2025-03-21T15:03:23.942Z] Player 1 (0x9Fde625ED8A6eC0f3cA393A62be34231a5c167F4) peeked at their card
[2025-03-21T15:03:23.942Z] Player action: peek, Amount: 5, Nonce: 1
[2025-03-21T15:03:23.973Z] Card for 0x9Fde625ED8A6eC0f3cA393A62be34231a5c167F4: 10 of Hearts
[2025-03-21T15:03:24.228Z] Player 1 chip balance after peeking: 20
[2025-03-21T15:03:24.509Z] Player 2 initial chip balance: 25
[2025-03-21T15:03:27.941Z] Player 2 (0x0Fae37437c1347c23dc279b424663579d2df67df) peeked at their card
[2025-03-21T15:03:27.942Z] Player action: peek, Amount: 5, Nonce: 1
[2025-03-21T15:03:27.965Z] Card for 0x0Fae37437c1347c23dc279b424663579d2df67df: Queen of Clubs
[2025-03-21T15:03:28.223Z] Player 2 chip balance after peeking: 20
[2025-03-21T15:03:28.224Z] 
----- PLAYER USING MONTY HALL OPTION -----
[2025-03-21T15:03:28.502Z] Player 3 initial chip balance: 25
[2025-03-21T15:03:31.967Z] Player 3 (0xd2e443F6CF19d5d359e82bbEea76e1133028fda5) used Monty Hall option
[2025-03-21T15:03:31.968Z] Player action: montyHall, Amount: 7, Nonce: 1
[2025-03-21T15:03:32.002Z] Monty Hall cards revealed to 0xd2e443F6CF19d5d359e82bbEea76e1133028fda5:
[2025-03-21T15:03:32.002Z] - 9 of Spades
[2025-03-21T15:03:32.002Z] - Queen of Hearts
[2025-03-21T15:03:32.247Z] Player 3 chip balance after using Monty Hall: 18
[2025-03-21T15:03:35.925Z] Player 3 decided to swap their card
[2025-03-21T15:03:35.926Z] Player action: swapCard, Amount: 0, Nonce: 2
[2025-03-21T15:03:35.926Z] Player 4 (0x7B7057B07218fa9f357E39cb2fC2E723C2bfcf9F) chose not to peek or use Monty Hall
[2025-03-21T15:03:35.979Z] 0xd2e443F6CF19d5d359e82bbEea76e1133028fda5 swapped 8 of Hearts for 8 of Spades
[2025-03-21T15:03:36.209Z] 
----- PLAYER STATUS AFTER PEEK PHASE -----
[2025-03-21T15:03:36.487Z] Player 1 (0x9Fde625ED8A6eC0f3cA393A62be34231a5c167F4):
[2025-03-21T15:03:36.487Z]   Chip balance: 20
[2025-03-21T15:03:36.487Z]   Has peeked: true
[2025-03-21T15:03:36.487Z]   Used Monty Hall: false
[2025-03-21T15:03:36.487Z]   Action nonce: 1
[2025-03-21T15:03:36.763Z] Player 2 (0x0Fae37437c1347c23dc279b424663579d2df67df):
[2025-03-21T15:03:36.763Z]   Chip balance: 20
[2025-03-21T15:03:36.763Z]   Has peeked: true
[2025-03-21T15:03:36.763Z]   Used Monty Hall: false
[2025-03-21T15:03:36.763Z]   Action nonce: 1
[2025-03-21T15:03:37.038Z] Player 3 (0xd2e443F6CF19d5d359e82bbEea76e1133028fda5):
[2025-03-21T15:03:37.038Z]   Chip balance: 18
[2025-03-21T15:03:37.038Z]   Has peeked: false
[2025-03-21T15:03:37.038Z]   Used Monty Hall: true
[2025-03-21T15:03:37.038Z]   Action nonce: 2
[2025-03-21T15:03:37.318Z] Player 4 (0x7B7057B07218fa9f357E39cb2fC2E723C2bfcf9F):
[2025-03-21T15:03:37.319Z]   Chip balance: 25
[2025-03-21T15:03:37.319Z]   Has peeked: false
[2025-03-21T15:03:37.319Z]   Used Monty Hall: false
[2025-03-21T15:03:37.319Z]   Action nonce: 0
[2025-03-21T15:03:37.319Z] 
----- WAITING FOR PEEK PHASE TO END -----
[2025-03-21T15:03:37.593Z] Waiting 102 seconds for peek phase to end...
[2025-03-21T15:03:37.594Z] Waiting for peek phase to end on TEN network...
[2025-03-21T15:05:27.608Z] Peek phase ended
[2025-03-21T15:05:27.608Z] 
----- ENDING PEEK PHASE -----
[2025-03-21T15:05:28.714Z] endPeekPhase transaction submitted, waiting for confirmation...
[2025-03-21T15:05:31.943Z] endPeekPhase transaction confirmed!
[2025-03-21T15:05:31.943Z] Buffer period started before betting phase. Current state: PEEK_PHASE, Next state: BETTING
[2025-03-21T15:05:31.943Z] Betting phase started for game 1
[2025-03-21T15:05:31.943Z] Game state updated: State=BETTING, Pot=0, CurrentBet=0, StateVersion=3
[2025-03-21T15:05:32.355Z] Phase end time: 2025-03-21T15:10:58.000Z
[2025-03-21T15:05:32.355Z] Buffer end time: 2025-03-21T15:05:58.000Z
[2025-03-21T15:05:32.355Z] Waiting 26 seconds for buffer period to end...
[2025-03-21T15:05:32.355Z] Waiting for buffer period to end on TEN network...
[2025-03-21T15:06:02.364Z] Buffer period ended
[2025-03-21T15:06:02.365Z] 
----- PLAYERS PLACING BETS -----
[2025-03-21T15:06:07.948Z] Player 1 (0x9Fde625ED8A6eC0f3cA393A62be34231a5c167F4) bet 5 chips
[2025-03-21T15:06:08.239Z] Pot after bet 1: 5, Current bet: 5
[2025-03-21T15:06:11.942Z] Player 2 (0x0Fae37437c1347c23dc279b424663579d2df67df) bet 5 chips
[2025-03-21T15:06:12.219Z] Pot after bet 2: 10, Current bet: 5
[2025-03-21T15:06:15.952Z] Player 3 (0xd2e443F6CF19d5d359e82bbEea76e1133028fda5) bet 10 chips (raising to 10)
[2025-03-21T15:06:16.231Z] Pot after bet 3: 20, Current bet: 10
[2025-03-21T15:06:19.955Z] Player 1 (0x9Fde625ED8A6eC0f3cA393A62be34231a5c167F4) bet additional 5 chips (calling the raise)
[2025-03-21T15:06:20.233Z] Pot after bet 4: 25, Current bet: 10
[2025-03-21T15:06:23.959Z] Player 2 (0x0Fae37437c1347c23dc279b424663579d2df67df) bet additional 5 chips (calling the raise)
[2025-03-21T15:06:24.242Z] Pot after bet 5: 30, Current bet: 10
[2025-03-21T15:06:27.959Z] Player 4 (0x7B7057B07218fa9f357E39cb2fC2E723C2bfcf9F) folded
[2025-03-21T15:06:28.239Z] Active players after fold: 4
[2025-03-21T15:06:28.239Z] 
----- PLAYER STATUS AFTER BETTING -----
[2025-03-21T15:06:28.521Z] Player 1 (0x9Fde625ED8A6eC0f3cA393A62be34231a5c167F4):
[2025-03-21T15:06:28.521Z]   Chip balance: 10
[2025-03-21T15:06:28.521Z]   Current bet: 10
[2025-03-21T15:06:28.522Z]   Has folded: false
[2025-03-21T15:06:28.522Z]   Action nonce: 3
[2025-03-21T15:06:28.800Z] Player 2 (0x0Fae37437c1347c23dc279b424663579d2df67df):
[2025-03-21T15:06:28.801Z]   Chip balance: 10
[2025-03-21T15:06:28.801Z]   Current bet: 10
[2025-03-21T15:06:28.801Z]   Has folded: false
[2025-03-21T15:06:28.801Z]   Action nonce: 3
[2025-03-21T15:06:29.081Z] Player 3 (0xd2e443F6CF19d5d359e82bbEea76e1133028fda5):
[2025-03-21T15:06:29.081Z]   Chip balance: 8
[2025-03-21T15:06:29.081Z]   Current bet: 10
[2025-03-21T15:06:29.081Z]   Has folded: false
[2025-03-21T15:06:29.081Z]   Action nonce: 3
[2025-03-21T15:06:29.359Z] Player 4 (0x7B7057B07218fa9f357E39cb2fC2E723C2bfcf9F):
[2025-03-21T15:06:29.359Z]   Chip balance: 25
[2025-03-21T15:06:29.359Z]   Current bet: 0
[2025-03-21T15:06:29.359Z]   Has folded: true
[2025-03-21T15:06:29.359Z]   Action nonce: 1
[2025-03-21T15:06:29.637Z] Have all active players matched the current bet? false
[2025-03-21T15:06:29.638Z] 
----- WAITING FOR BETTING PHASE TO END -----
[2025-03-21T15:06:29.916Z] Betting phase ends in 269 seconds at 2025-03-21T15:10:58.000Z
[2025-03-21T15:06:29.917Z] All players have matched bets, manually ending betting phase...
[2025-03-21T15:06:29.917Z] 
----- ENDING BETTING PHASE -----
[2025-03-21T15:06:31.017Z] endBettingPhase transaction submitted, waiting for confirmation...
[2025-03-21T15:06:31.296Z] Error ending betting phase: transaction failed [ See: https://links.ethers.org/v5-errors-CALL_EXCEPTION ] (transactionHash="0xbdbe6b9a023c4e72edaca07825799294fa375acecc6f7ccaf8fc854094aae985", transaction={"type":2,"chainId":443,"nonce":133,"maxPriorityFeePerGas":{"type":"BigNumber","hex":"0x59682f00"},"maxFeePerGas":{"type":"BigNumber","hex":"0x6553f100"},"gasPrice":null,"gasLimit":{"type":"BigNumber","hex":"0x01c9c380"},"to":"0xD6A9A1278825bd568e06A138e48D9c342e9539F8","value":{"type":"BigNumber","hex":"0x00"},"data":"0x30be62b20000000000000000000000000000000000000000000000000000000000000001","accessList":[],"hash":"0xbdbe6b9a023c4e72edaca07825799294fa375acecc6f7ccaf8fc854094aae985","v":1,"r":"0x3e293a968adcef4a5f13d7f9e04ab3ce8fc37094ba1349655b098e790f4c59ae","s":"0x79bd15bb9005640526fe66a46fcbbfb0830c8ef7204c7f64f284bd5149cf2365","from":"0x1dA9aCB41763f97F744Da547F2d103042e8Ab239","confirmations":0}, receipt={"to":"0xD6A9A1278825bd568e06A138e48D9c342e9539F8","from":"0x1dA9aCB41763f97F744Da547F2d103042e8Ab239","contractAddress":null,"transactionIndex":0,"gasUsed":{"type":"BigNumber","hex":"0x99ee"},"logsBloom":"0x00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000","blockHash":"0x11241aeecd5100c05505dbe2d1bc42659118c44ae843779f408cfcd2a4322460","transactionHash":"0xbdbe6b9a023c4e72edaca07825799294fa375acecc6f7ccaf8fc854094aae985","logs":[],"blockNumber":2470920,"confirmations":1,"cumulativeGasUsed":{"type":"BigNumber","hex":"0x7f68"},"effectiveGasPrice":{"type":"BigNumber","hex":"0x5f5e1000"},"status":0,"type":2,"byzantium":true}, code=CALL_EXCEPTION, version=providers/5.7.2)
[2025-03-21T15:06:31.297Z] Error during game flow: transaction failed [ See: https://links.ethers.org/v5-errors-CALL_EXCEPTION ] (transactionHash="0xbdbe6b9a023c4e72edaca07825799294fa375acecc6f7ccaf8fc854094aae985", transaction={"type":2,"chainId":443,"nonce":133,"maxPriorityFeePerGas":{"type":"BigNumber","hex":"0x59682f00"},"maxFeePerGas":{"type":"BigNumber","hex":"0x6553f100"},"gasPrice":null,"gasLimit":{"type":"BigNumber","hex":"0x01c9c380"},"to":"0xD6A9A1278825bd568e06A138e48D9c342e9539F8","value":{"type":"BigNumber","hex":"0x00"},"data":"0x30be62b20000000000000000000000000000000000000000000000000000000000000001","accessList":[],"hash":"0xbdbe6b9a023c4e72edaca07825799294fa375acecc6f7ccaf8fc854094aae985","v":1,"r":"0x3e293a968adcef4a5f13d7f9e04ab3ce8fc37094ba1349655b098e790f4c59ae","s":"0x79bd15bb9005640526fe66a46fcbbfb0830c8ef7204c7f64f284bd5149cf2365","from":"0x1dA9aCB41763f97F744Da547F2d103042e8Ab239","confirmations":0}, receipt={"to":"0xD6A9A1278825bd568e06A138e48D9c342e9539F8","from":"0x1dA9aCB41763f97F744Da547F2d103042e8Ab239","contractAddress":null,"transactionIndex":0,"gasUsed":{"type":"BigNumber","hex":"0x99ee"},"logsBloom":"0x00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000","blockHash":"0x11241aeecd5100c05505dbe2d1bc42659118c44ae843779f408cfcd2a4322460","transactionHash":"0xbdbe6b9a023c4e72edaca07825799294fa375acecc6f7ccaf8fc854094aae985","logs":[],"blockNumber":2470920,"confirmations":1,"cumulativeGasUsed":{"type":"BigNumber","hex":"0x7f68"},"effectiveGasPrice":{"type":"BigNumber","hex":"0x5f5e1000"},"status":0,"type":2,"byzantium":true}, code=CALL_EXCEPTION, version=providers/5.7.2)
[2025-03-21T15:09:30.908Z] 
===== SETTING UP TEST ENVIRONMENT =====
[2025-03-21T15:09:30.937Z] Wallet setup complete.
[2025-03-21T15:09:30.937Z] Owner address: 0x1dA9aCB41763f97F744Da547F2d103042e8Ab239
[2025-03-21T15:09:30.937Z] Player 1 address: 0x9Fde625ED8A6eC0f3cA393A62be34231a5c167F4
[2025-03-21T15:09:30.937Z] Player 2 address: 0x0Fae37437c1347c23dc279b424663579d2df67df
[2025-03-21T15:09:30.937Z] Player 3 address: 0xd2e443F6CF19d5d359e82bbEea76e1133028fda5
[2025-03-21T15:09:30.938Z] Player 4 address: 0x7B7057B07218fa9f357E39cb2fC2E723C2bfcf9F
[2025-03-21T15:09:30.938Z] Keeper address: 0x1dA9aCB41763f97F744Da547F2d103042e8Ab239
[2025-03-21T15:09:30.938Z] 
----- CHECKING WALLET BALANCES -----
[2025-03-21T15:09:31.963Z] Address 0x1dA9aCB41763f97F744Da547F2d103042e8Ab239 has 0.63205674744 ETH
[2025-03-21T15:09:32.600Z] Address 0x9Fde625ED8A6eC0f3cA393A62be34231a5c167F4 has 0.9891792048 ETH
[2025-03-21T15:09:32.876Z] Address 0x0Fae37437c1347c23dc279b424663579d2df67df has 0.7415857171 ETH
[2025-03-21T15:09:33.165Z] Address 0xd2e443F6CF19d5d359e82bbEea76e1133028fda5 has 0.4918607993 ETH
[2025-03-21T15:09:33.450Z] Address 0x7B7057B07218fa9f357E39cb2fC2E723C2bfcf9F has 0.7404183889 ETH
[2025-03-21T15:09:33.733Z] Address 0x1dA9aCB41763f97F744Da547F2d103042e8Ab239 has 0.63205674744 ETH
[2025-03-21T15:09:33.733Z] 
----- DEPLOYING CONTRACTS -----
[2025-03-21T15:09:33.733Z] Deploying CardLibrary...
[2025-03-21T15:09:40.003Z] CardLibrary deployed at: 0x49fd097205b9f47a48EB2654D4525D6cfFf8309e
[2025-03-21T15:09:40.003Z] Deploying GameLibrary...
[2025-03-21T15:09:42.458Z] GameLibrary deployed at: 0x2Fef1F6A1042A8965F7973CC822539CD947be787
[2025-03-21T15:09:42.458Z] Deploying OneCard main contract...
[2025-03-21T15:09:48.919Z] OneCard contract deployed at: 0xd95CA9fD9A757858f811E740dCbE0ebe859374Fc
[2025-03-21T15:09:48.919Z] Deploying PokerSpectatorView contract...
[2025-03-21T15:09:55.032Z] PokerSpectatorView contract deployed at: 0x36de328EEE2328a2712d6425fC950b470b13E701
[2025-03-21T15:09:55.032Z] 
Add these to your .env file for future use:
[2025-03-21T15:09:55.032Z] POKER_CONTRACT_ADDRESS=0xd95CA9fD9A757858f811E740dCbE0ebe859374Fc
[2025-03-21T15:09:55.032Z] SPECTATOR_CONTRACT_ADDRESS=0x36de328EEE2328a2712d6425fC950b470b13E701
[2025-03-21T15:09:55.035Z] 
===== STARTING ONE CARD POKER WITH MONTY HALL GAME TEST =====
[2025-03-21T15:09:55.035Z] 
----- ADDING PLAYERS TO WHITELIST -----
[2025-03-21T15:10:01.092Z] Added 4 players to whitelist
[2025-03-21T15:10:01.092Z] 
----- CREATING A NEW GAME -----
[2025-03-21T15:10:07.195Z] Created Game with ID: 1
[2025-03-21T15:10:07.477Z] Initial players in game: 5
[2025-03-21T15:10:07.478Z] Player 1: 0x1dA9aCB41763f97F744Da547F2d103042e8Ab239
[2025-03-21T15:10:07.478Z] Player 2: 0x9Fde625ED8A6eC0f3cA393A62be34231a5c167F4
[2025-03-21T15:10:07.478Z] Player 3: 0x0Fae37437c1347c23dc279b424663579d2df67df
[2025-03-21T15:10:07.478Z] Player 4: 0xd2e443F6CF19d5d359e82bbEea76e1133028fda5
[2025-03-21T15:10:07.478Z] Player 5: 0x7B7057B07218fa9f357E39cb2fC2E723C2bfcf9F
[2025-03-21T15:10:07.478Z] 
----- VERIFYING GAME INFO BEFORE STARTING PEEK PHASE -----
[2025-03-21T15:10:07.764Z] Game state: REGISTRATION
[2025-03-21T15:10:07.765Z] Player count: 5
[2025-03-21T15:10:07.765Z] Active count: 5
[2025-03-21T15:10:07.765Z] Game keeper: 0x1dA9aCB41763f97F744Da547F2d103042e8Ab239
[2025-03-21T15:10:07.765Z] State version: 1
[2025-03-21T15:10:07.765Z] Is cleaned up: false
[2025-03-21T15:10:07.765Z] 
----- STARTING PEEK PHASE -----
[2025-03-21T15:10:09.504Z] startPeekPhase transaction submitted, waiting for confirmation...
[2025-03-21T15:10:14.539Z] startPeekPhase transaction confirmed!
[2025-03-21T15:10:14.539Z] Buffer period started before peek phase. Current state: REGISTRATION, Next state: PEEK_PHASE
[2025-03-21T15:10:14.539Z] Peek phase started for game 1
[2025-03-21T15:10:14.539Z] Game state updated: State=PEEK_PHASE, Pot=0, CurrentBet=0, StateVersion=2
[2025-03-21T15:10:14.820Z] Phase end time: 2025-03-21T15:12:40.000Z
[2025-03-21T15:10:14.820Z] Buffer end time: 2025-03-21T15:10:40.000Z
[2025-03-21T15:10:14.820Z] Waiting 26 seconds for buffer period to end...
[2025-03-21T15:10:14.820Z] Waiting for buffer period to end on TEN network...
[2025-03-21T15:10:44.829Z] Buffer period ended
[2025-03-21T15:10:44.831Z] 
----- PLAYERS PEEKING AT CARDS -----
[2025-03-21T15:10:45.641Z] Player 1 initial chip balance: 25
[2025-03-21T15:10:49.296Z] Player 1 (0x9Fde625ED8A6eC0f3cA393A62be34231a5c167F4) peeked at their card
[2025-03-21T15:10:49.296Z] Player action: peek, Amount: 5, Nonce: 1
[2025-03-21T15:10:49.302Z] Card for 0x9Fde625ED8A6eC0f3cA393A62be34231a5c167F4: 4 of Hearts
[2025-03-21T15:10:49.578Z] Player 1 chip balance after peeking: 20
[2025-03-21T15:10:49.862Z] Player 2 initial chip balance: 25
[2025-03-21T15:10:51.262Z] Player 2 (0x0Fae37437c1347c23dc279b424663579d2df67df) peeked at their card
[2025-03-21T15:10:51.262Z] Player action: peek, Amount: 5, Nonce: 1
[2025-03-21T15:10:51.547Z] Player 2 chip balance after peeking: 20
[2025-03-21T15:10:51.548Z] 
----- PLAYER USING MONTY HALL OPTION -----
[2025-03-21T15:10:51.830Z] Player 3 initial chip balance: 25
[2025-03-21T15:10:53.233Z] Player 3 (0xd2e443F6CF19d5d359e82bbEea76e1133028fda5) used Monty Hall option
[2025-03-21T15:10:53.233Z] Player action: montyHall, Amount: 7, Nonce: 1
[2025-03-21T15:10:53.299Z] Card for 0x0Fae37437c1347c23dc279b424663579d2df67df: 3 of Spades
[2025-03-21T15:10:53.511Z] Player 3 chip balance after using Monty Hall: 18
[2025-03-21T15:10:57.293Z] Player 3 decided to swap their card
[2025-03-21T15:10:57.294Z] Player action: swapCard, Amount: 0, Nonce: 2
[2025-03-21T15:10:57.294Z] Player 4 (0x7B7057B07218fa9f357E39cb2fC2E723C2bfcf9F) chose not to peek or use Monty Hall
[2025-03-21T15:10:57.314Z] 0xd2e443F6CF19d5d359e82bbEea76e1133028fda5 swapped 2 of Spades for King of Hearts
[2025-03-21T15:10:57.316Z] Monty Hall cards revealed to 0xd2e443F6CF19d5d359e82bbEea76e1133028fda5:
[2025-03-21T15:10:57.316Z] - Ace of Hearts
[2025-03-21T15:10:57.316Z] - King of Diamonds
[2025-03-21T15:10:57.574Z] 
----- PLAYER STATUS AFTER PEEK PHASE -----
[2025-03-21T15:10:57.853Z] Player 1 (0x9Fde625ED8A6eC0f3cA393A62be34231a5c167F4):
[2025-03-21T15:10:57.853Z]   Chip balance: 20
[2025-03-21T15:10:57.853Z]   Has peeked: true
[2025-03-21T15:10:57.853Z]   Used Monty Hall: false
[2025-03-21T15:10:57.853Z]   Action nonce: 1
[2025-03-21T15:10:58.134Z] Player 2 (0x0Fae37437c1347c23dc279b424663579d2df67df):
[2025-03-21T15:10:58.134Z]   Chip balance: 20
[2025-03-21T15:10:58.134Z]   Has peeked: true
[2025-03-21T15:10:58.134Z]   Used Monty Hall: false
[2025-03-21T15:10:58.135Z]   Action nonce: 1
[2025-03-21T15:10:58.412Z] Player 3 (0xd2e443F6CF19d5d359e82bbEea76e1133028fda5):
[2025-03-21T15:10:58.413Z]   Chip balance: 18
[2025-03-21T15:10:58.413Z]   Has peeked: false
[2025-03-21T15:10:58.413Z]   Used Monty Hall: true
[2025-03-21T15:10:58.413Z]   Action nonce: 2
[2025-03-21T15:10:58.695Z] Player 4 (0x7B7057B07218fa9f357E39cb2fC2E723C2bfcf9F):
[2025-03-21T15:10:58.695Z]   Chip balance: 25
[2025-03-21T15:10:58.695Z]   Has peeked: false
[2025-03-21T15:10:58.695Z]   Used Monty Hall: false
[2025-03-21T15:10:58.695Z]   Action nonce: 0
[2025-03-21T15:10:58.695Z] 
----- WAITING FOR PEEK PHASE TO END -----
[2025-03-21T15:10:58.976Z] Waiting 102 seconds for peek phase to end...
[2025-03-21T15:10:58.976Z] Waiting for peek phase to end on TEN network...
[2025-03-21T15:12:48.988Z] Peek phase ended
[2025-03-21T15:12:48.988Z] 
----- ENDING PEEK PHASE -----
[2025-03-21T15:12:50.095Z] endPeekPhase transaction submitted, waiting for confirmation...
[2025-03-21T15:12:53.275Z] endPeekPhase transaction confirmed!
[2025-03-21T15:12:53.276Z] Buffer period started before betting phase. Current state: PEEK_PHASE, Next state: BETTING
[2025-03-21T15:12:53.276Z] Betting phase started for game 1
[2025-03-21T15:12:53.276Z] Game state updated: State=BETTING, Pot=0, CurrentBet=0, StateVersion=3
[2025-03-21T15:12:53.559Z] Phase end time: 2025-03-21T15:18:21.000Z
[2025-03-21T15:12:53.559Z] Buffer end time: 2025-03-21T15:13:21.000Z
[2025-03-21T15:12:53.559Z] Waiting 28 seconds for buffer period to end...
[2025-03-21T15:12:53.560Z] Waiting for buffer period to end on TEN network...
[2025-03-21T15:13:23.566Z] Buffer period ended
[2025-03-21T15:13:23.567Z] 
----- PLAYERS PLACING BETS -----
[2025-03-21T15:13:25.287Z] Player 1 (0x9Fde625ED8A6eC0f3cA393A62be34231a5c167F4) bet 5 chips
[2025-03-21T15:13:25.288Z] Player action: bet, Amount: 5, Nonce: 2
[2025-03-21T15:13:25.569Z] Pot after bet 1: 5, Current bet: 5
[2025-03-21T15:13:29.289Z] Player 2 (0x0Fae37437c1347c23dc279b424663579d2df67df) bet 5 chips
[2025-03-21T15:13:29.574Z] Pot after bet 2: 10, Current bet: 5
[2025-03-21T15:13:33.290Z] Player 3 (0xd2e443F6CF19d5d359e82bbEea76e1133028fda5) bet 10 chips (raising to 10)
[2025-03-21T15:13:33.573Z] Pot after bet 3: 20, Current bet: 10
[2025-03-21T15:13:37.294Z] Player 1 (0x9Fde625ED8A6eC0f3cA393A62be34231a5c167F4) bet additional 5 chips (calling the raise)
[2025-03-21T15:13:37.575Z] Pot after bet 4: 25, Current bet: 10
[2025-03-21T15:13:39.296Z] Player 2 (0x0Fae37437c1347c23dc279b424663579d2df67df) bet additional 5 chips (calling the raise)
[2025-03-21T15:13:39.574Z] Pot after bet 5: 30, Current bet: 10
[2025-03-21T15:13:45.287Z] Player 4 (0x7B7057B07218fa9f357E39cb2fC2E723C2bfcf9F) folded
[2025-03-21T15:13:45.569Z] Active players after fold: 4
[2025-03-21T15:13:45.569Z] 
----- PLAYER STATUS AFTER BETTING -----
[2025-03-21T15:13:45.854Z] Player 1 (0x9Fde625ED8A6eC0f3cA393A62be34231a5c167F4):
[2025-03-21T15:13:45.854Z]   Chip balance: 10
[2025-03-21T15:13:45.854Z]   Current bet: 10
[2025-03-21T15:13:45.854Z]   Has folded: false
[2025-03-21T15:13:45.854Z]   Action nonce: 3
[2025-03-21T15:13:46.138Z] Player 2 (0x0Fae37437c1347c23dc279b424663579d2df67df):
[2025-03-21T15:13:46.138Z]   Chip balance: 10
[2025-03-21T15:13:46.138Z]   Current bet: 10
[2025-03-21T15:13:46.138Z]   Has folded: false
[2025-03-21T15:13:46.138Z]   Action nonce: 3
[2025-03-21T15:13:46.419Z] Player 3 (0xd2e443F6CF19d5d359e82bbEea76e1133028fda5):
[2025-03-21T15:13:46.419Z]   Chip balance: 8
[2025-03-21T15:13:46.420Z]   Current bet: 10
[2025-03-21T15:13:46.420Z]   Has folded: false
[2025-03-21T15:13:46.420Z]   Action nonce: 3
[2025-03-21T15:13:46.701Z] Player 4 (0x7B7057B07218fa9f357E39cb2fC2E723C2bfcf9F):
[2025-03-21T15:13:46.701Z]   Chip balance: 25
[2025-03-21T15:13:46.702Z]   Current bet: 0
[2025-03-21T15:13:46.702Z]   Has folded: true
[2025-03-21T15:13:46.702Z]   Action nonce: 1
[2025-03-21T15:13:46.986Z] Have all active players matched the current bet? false
[2025-03-21T15:13:46.988Z] 
----- WAITING FOR BETTING PHASE TO END -----
[2025-03-21T15:13:47.272Z] Betting phase ends in 274 seconds at 2025-03-21T15:18:21.000Z
[2025-03-21T15:13:47.272Z] All players have matched bets, manually ending betting phase...
[2025-03-21T15:13:47.272Z] 
----- CHECKING GAME STATE BEFORE ENDING BETTING PHASE -----
[2025-03-21T15:13:47.540Z] Current game state: BETTING
[2025-03-21T15:13:47.541Z] Phase end time: 2025-03-21T15:18:21.000Z
[2025-03-21T15:13:47.541Z] Current time: 2025-03-21T15:13:47.541Z
[2025-03-21T15:13:47.541Z] Buffer end time: 2025-03-21T15:13:21.000Z
[2025-03-21T15:13:47.541Z] Is in buffer period: false
[2025-03-21T15:13:47.541Z] Is phase ended: false
[2025-03-21T15:13:47.819Z] Is caller (0x1dA9aCB41763f97F744Da547F2d103042e8Ab239) a keeper: true
[2025-03-21T15:13:47.820Z] Betting phase hasn't ended yet. Waiting 274 seconds...
[2025-03-21T15:13:47.820Z] Waiting for phase to end on TEN network...
[2025-03-21T15:18:22.933Z] Betting phase has now ended
[2025-03-21T15:18:23.218Z] Game state after waiting: BETTING
[2025-03-21T15:18:23.219Z] Updated phase end time: 2025-03-21T15:18:21.000Z
[2025-03-21T15:18:23.219Z] Updated buffer end time: 2025-03-21T15:13:21.000Z
[2025-03-21T15:18:23.219Z] 
----- ENDING BETTING PHASE -----
[2025-03-21T15:18:24.327Z] endBettingPhase transaction submitted, waiting for confirmation...
[2025-03-21T15:18:25.432Z] endBettingPhase transaction confirmed!
[2025-03-21T15:18:25.433Z] Showdown phase started
[2025-03-21T15:18:25.433Z] 
===== GAME RESULTS =====
[2025-03-21T15:18:25.433Z] Winner: 0xd2e443F6CF19d5d359e82bbEea76e1133028fda5
[2025-03-21T15:18:25.433Z] Pot Amount: 30 chips
[2025-03-21T15:18:25.434Z] Player 3 (0xd2e443F6CF19d5d359e82bbEea76e1133028fda5) won the game!
[2025-03-21T15:18:25.434Z] Final game state: State=SHOWDOWN, Pot=30, CurrentBet=10, StateVersion=4
[2025-03-21T15:18:25.434Z] 
----- REVEALED CARDS DURING SHOWDOWN -----
[2025-03-21T15:18:25.435Z] Error getting revealed cards: spectatorContract.getRevealedCardsForSpectating is not a function
[2025-03-21T15:18:25.435Z] 
----- FINAL GAME STATE -----
[2025-03-21T15:18:25.714Z] Game state: ENDED
[2025-03-21T15:18:25.714Z] Pot amount: 0
[2025-03-21T15:18:25.714Z] State version: 5
[2025-03-21T15:18:25.714Z] Is cleaned up: false
[2025-03-21T15:18:25.714Z] 
----- FINAL PLAYER BALANCES -----
[2025-03-21T15:18:25.991Z] Player 1 (0x9Fde625ED8A6eC0f3cA393A62be34231a5c167F4):
[2025-03-21T15:18:25.992Z]   Initial balance: 25
[2025-03-21T15:18:25.992Z]   Final balance: 10
[2025-03-21T15:18:25.993Z]   Difference: -15
[2025-03-21T15:18:26.279Z] Player 2 (0x0Fae37437c1347c23dc279b424663579d2df67df):
[2025-03-21T15:18:26.279Z]   Initial balance: 25
[2025-03-21T15:18:26.279Z]   Final balance: 10
[2025-03-21T15:18:26.279Z]   Difference: -15
[2025-03-21T15:18:26.559Z] Player 3 (0xd2e443F6CF19d5d359e82bbEea76e1133028fda5):
[2025-03-21T15:18:26.559Z]   Initial balance: 25
[2025-03-21T15:18:26.559Z]   Final balance: 38
[2025-03-21T15:18:26.559Z]   Difference: 13
[2025-03-21T15:18:26.559Z] *** Player 3 gained 13 chips - WINNER! ***
[2025-03-21T15:18:26.838Z] Player 4 (0x7B7057B07218fa9f357E39cb2fC2E723C2bfcf9F):
[2025-03-21T15:18:26.839Z]   Initial balance: 25
[2025-03-21T15:18:26.839Z]   Final balance: 25
[2025-03-21T15:18:26.839Z]   Difference: 0
[2025-03-21T15:18:26.839Z] 
----- CLEANING UP THE GAME -----
[2025-03-21T15:18:28.229Z] Game cleaned up successfully
[2025-03-21T15:18:28.510Z] Game is cleaned up: true
[2025-03-21T15:18:28.510Z] Game is no longer spectatable
[2025-03-21T15:18:28.510Z] Final state update: State=ENDED, StateVersion=6
[2025-03-21T15:18:28.510Z] 
===== ONE CARD POKER WITH MONTY HALL FULL GAME TEST COMPLETED =====
[2025-03-21T15:21:31.834Z] 
===== SETTING UP TEST ENVIRONMENT =====
[2025-03-21T15:21:31.863Z] Wallet setup complete.
[2025-03-21T15:21:31.863Z] Owner address: 0x1dA9aCB41763f97F744Da547F2d103042e8Ab239
[2025-03-21T15:21:31.863Z] Player 1 address: 0x9Fde625ED8A6eC0f3cA393A62be34231a5c167F4
[2025-03-21T15:21:31.863Z] Player 2 address: 0x0Fae37437c1347c23dc279b424663579d2df67df
[2025-03-21T15:21:31.863Z] Player 3 address: 0xd2e443F6CF19d5d359e82bbEea76e1133028fda5
[2025-03-21T15:21:31.863Z] Player 4 address: 0x7B7057B07218fa9f357E39cb2fC2E723C2bfcf9F
[2025-03-21T15:21:31.863Z] Keeper address: 0x1dA9aCB41763f97F744Da547F2d103042e8Ab239
[2025-03-21T15:21:31.863Z] 
----- CHECKING WALLET BALANCES -----
[2025-03-21T15:21:32.888Z] Address 0x1dA9aCB41763f97F744Da547F2d103042e8Ab239 has 0.61753188464 ETH
[2025-03-21T15:21:33.164Z] Address 0x9Fde625ED8A6eC0f3cA393A62be34231a5c167F4 has 0.988735686 ETH
[2025-03-21T15:21:33.444Z] Address 0x0Fae37437c1347c23dc279b424663579d2df67df has 0.741201238 ETH
[2025-03-21T15:21:33.722Z] Address 0xd2e443F6CF19d5d359e82bbEea76e1133028fda5 has 0.4912520829 ETH
[2025-03-21T15:21:33.996Z] Address 0x7B7057B07218fa9f357E39cb2fC2E723C2bfcf9F has 0.7402860109 ETH
[2025-03-21T15:21:34.274Z] Address 0x1dA9aCB41763f97F744Da547F2d103042e8Ab239 has 0.61753188464 ETH
[2025-03-21T15:21:34.274Z] 
----- DEPLOYING CONTRACTS -----
[2025-03-21T15:21:34.274Z] Deploying CardLibrary...
[2025-03-21T15:21:36.443Z] CardLibrary deployed at: 0xaAfE4b47094425E78b420Ce3580517C72E5040d7
[2025-03-21T15:21:36.443Z] Deploying GameLibrary...
[2025-03-21T15:21:42.278Z] GameLibrary deployed at: 0x7fF94aC35235352E937e6310a123d975E83E600F
[2025-03-21T15:21:42.278Z] Deploying OneCard main contract...
[2025-03-21T15:21:44.336Z] OneCard contract deployed at: 0x0F94C785DFB164707CD24BEC38C91E128390FE45
[2025-03-21T15:21:44.337Z] Deploying PokerSpectatorView contract...
[2025-03-21T15:21:50.162Z] PokerSpectatorView contract deployed at: 0x8A0Bb7B9B5Da1A70FF39D69F93a8B6597F5ac1Ee
[2025-03-21T15:21:50.163Z] 
Add these to your .env file for future use:
[2025-03-21T15:21:50.163Z] POKER_CONTRACT_ADDRESS=0x0F94C785DFB164707CD24BEC38C91E128390FE45
[2025-03-21T15:21:50.163Z] SPECTATOR_CONTRACT_ADDRESS=0x8A0Bb7B9B5Da1A70FF39D69F93a8B6597F5ac1Ee
[2025-03-21T15:21:50.168Z] 
===== STARTING ONE CARD POKER WITH MONTY HALL GAME TEST =====
[2025-03-21T15:21:50.168Z] 
----- ADDING PLAYERS TO WHITELIST -----
[2025-03-21T15:21:56.236Z] Added 4 players to whitelist
[2025-03-21T15:21:56.236Z] 
----- CREATING A NEW GAME -----
[2025-03-21T15:22:02.296Z] Created Game with ID: 1
[2025-03-21T15:22:02.577Z] Initial players in game: 5
[2025-03-21T15:22:02.577Z] Player 1: 0x1dA9aCB41763f97F744Da547F2d103042e8Ab239
[2025-03-21T15:22:02.577Z] Player 2: 0x9Fde625ED8A6eC0f3cA393A62be34231a5c167F4
[2025-03-21T15:22:02.577Z] Player 3: 0x0Fae37437c1347c23dc279b424663579d2df67df
[2025-03-21T15:22:02.577Z] Player 4: 0xd2e443F6CF19d5d359e82bbEea76e1133028fda5
[2025-03-21T15:22:02.577Z] Player 5: 0x7B7057B07218fa9f357E39cb2fC2E723C2bfcf9F
[2025-03-21T15:22:02.577Z] 
----- VERIFYING GAME INFO BEFORE STARTING PEEK PHASE -----
[2025-03-21T15:22:02.860Z] Game state: REGISTRATION
[2025-03-21T15:22:02.860Z] Player count: 5
[2025-03-21T15:22:02.860Z] Active count: 5
[2025-03-21T15:22:02.860Z] Game keeper: 0x1dA9aCB41763f97F744Da547F2d103042e8Ab239
[2025-03-21T15:22:02.860Z] State version: 1
[2025-03-21T15:22:02.860Z] Is cleaned up: false
[2025-03-21T15:22:02.860Z] 
----- STARTING PEEK PHASE -----
[2025-03-21T15:22:04.241Z] startPeekPhase transaction submitted, waiting for confirmation...
[2025-03-21T15:22:08.945Z] startPeekPhase transaction confirmed!
[2025-03-21T15:22:08.946Z] Buffer period started before peek phase. Current state: REGISTRATION, Next state: PEEK_PHASE
[2025-03-21T15:22:08.946Z] Peek phase started for game 1
[2025-03-21T15:22:08.946Z] Game state updated: State=PEEK_PHASE, Pot=0, CurrentBet=0, StateVersion=2
[2025-03-21T15:22:09.239Z] Phase end time: 2025-03-21T15:24:34.000Z
[2025-03-21T15:22:09.239Z] Buffer end time: 2025-03-21T15:22:34.000Z
[2025-03-21T15:22:09.239Z] Waiting 25 seconds for buffer period to end...
[2025-03-21T15:22:09.239Z] Waiting for buffer period to end on TEN network...
[2025-03-21T15:22:14.240Z] 20 seconds remaining in buffer period
[2025-03-21T15:22:24.243Z] 10 seconds remaining in buffer period
[2025-03-21T15:22:34.247Z] Buffer period ended
[2025-03-21T15:22:34.250Z] 
----- PLAYERS PEEKING AT CARDS -----
[2025-03-21T15:22:35.067Z] Player 1 initial chip balance: 25
[2025-03-21T15:22:38.693Z] Player 1 (0x9Fde625ED8A6eC0f3cA393A62be34231a5c167F4) peeked at their card
[2025-03-21T15:22:38.694Z] Player action: peek, Amount: 5, Nonce: 1
[2025-03-21T15:22:38.752Z] Card for 0x9Fde625ED8A6eC0f3cA393A62be34231a5c167F4: 8 of Diamonds
[2025-03-21T15:22:38.971Z] Player 1 chip balance after peeking: 20
[2025-03-21T15:22:39.253Z] Player 2 initial chip balance: 25
[2025-03-21T15:22:42.689Z] Player 2 (0x0Fae37437c1347c23dc279b424663579d2df67df) peeked at their card
[2025-03-21T15:22:42.690Z] Player action: peek, Amount: 5, Nonce: 1
[2025-03-21T15:22:42.719Z] Card for 0x0Fae37437c1347c23dc279b424663579d2df67df: Queen of Spades
[2025-03-21T15:22:42.972Z] Player 2 chip balance after peeking: 20
[2025-03-21T15:22:42.972Z] 
----- PLAYER USING MONTY HALL OPTION -----
[2025-03-21T15:22:43.251Z] Player 3 initial chip balance: 25
[2025-03-21T15:22:46.713Z] Player 3 (0xd2e443F6CF19d5d359e82bbEea76e1133028fda5) used Monty Hall option
[2025-03-21T15:22:46.713Z] Player action: montyHall, Amount: 7, Nonce: 1
[2025-03-21T15:22:46.731Z] Monty Hall cards revealed to 0xd2e443F6CF19d5d359e82bbEea76e1133028fda5:
[2025-03-21T15:22:46.731Z] - 7 of Clubs
[2025-03-21T15:22:46.731Z] - 4 of Diamonds
[2025-03-21T15:22:46.993Z] Player 3 chip balance after using Monty Hall: 18
[2025-03-21T15:22:50.720Z] Player 3 decided to swap their card
[2025-03-21T15:22:50.720Z] Player action: swapCard, Amount: 0, Nonce: 2
[2025-03-21T15:22:50.720Z] Player 4 (0x7B7057B07218fa9f357E39cb2fC2E723C2bfcf9F) chose not to peek or use Monty Hall
[2025-03-21T15:22:50.739Z] 0xd2e443F6CF19d5d359e82bbEea76e1133028fda5 swapped 8 of Hearts for 4 of Spades
[2025-03-21T15:22:51.000Z] 
----- PLAYER STATUS AFTER PEEK PHASE -----
[2025-03-21T15:22:51.278Z] Player 1 (0x9Fde625ED8A6eC0f3cA393A62be34231a5c167F4):
[2025-03-21T15:22:51.278Z]   Chip balance: 20
[2025-03-21T15:22:51.278Z]   Has peeked: true
[2025-03-21T15:22:51.278Z]   Used Monty Hall: false
[2025-03-21T15:22:51.278Z]   Action nonce: 1
[2025-03-21T15:22:51.558Z] Player 2 (0x0Fae37437c1347c23dc279b424663579d2df67df):
[2025-03-21T15:22:51.558Z]   Chip balance: 20
[2025-03-21T15:22:51.559Z]   Has peeked: true
[2025-03-21T15:22:51.559Z]   Used Monty Hall: false
[2025-03-21T15:22:51.559Z]   Action nonce: 1
[2025-03-21T15:22:51.839Z] Player 3 (0xd2e443F6CF19d5d359e82bbEea76e1133028fda5):
[2025-03-21T15:22:51.840Z]   Chip balance: 18
[2025-03-21T15:22:51.840Z]   Has peeked: false
[2025-03-21T15:22:51.840Z]   Used Monty Hall: true
[2025-03-21T15:22:51.840Z]   Action nonce: 2
[2025-03-21T15:22:52.127Z] Player 4 (0x7B7057B07218fa9f357E39cb2fC2E723C2bfcf9F):
[2025-03-21T15:22:52.127Z]   Chip balance: 25
[2025-03-21T15:22:52.127Z]   Has peeked: false
[2025-03-21T15:22:52.127Z]   Used Monty Hall: false
[2025-03-21T15:22:52.127Z]   Action nonce: 0
[2025-03-21T15:22:52.128Z] 
----- WAITING FOR PEEK PHASE TO END -----
[2025-03-21T15:22:52.414Z] Waiting 102 seconds for peek phase to end...
[2025-03-21T15:22:52.414Z] Waiting for peek phase to end on TEN network...
[2025-03-21T15:24:42.429Z] Peek phase ended
[2025-03-21T15:24:42.429Z] 
----- ENDING PEEK PHASE -----
[2025-03-21T15:24:43.541Z] endPeekPhase transaction submitted, waiting for confirmation...
[2025-03-21T15:24:46.707Z] endPeekPhase transaction confirmed!
[2025-03-21T15:24:46.708Z] Buffer period started before betting phase. Current state: PEEK_PHASE, Next state: BETTING
[2025-03-21T15:24:46.708Z] Betting phase started for game 1
[2025-03-21T15:24:46.708Z] Game state updated: State=BETTING, Pot=0, CurrentBet=0, StateVersion=3
[2025-03-21T15:24:46.988Z] Phase end time: 2025-03-21T15:30:13.000Z
[2025-03-21T15:24:46.989Z] Buffer end time: 2025-03-21T15:25:13.000Z
[2025-03-21T15:24:46.989Z] Waiting 27 seconds for buffer period to end...
[2025-03-21T15:24:46.989Z] Waiting for buffer period to end on TEN network...
[2025-03-21T15:25:16.995Z] Buffer period ended
[2025-03-21T15:25:16.996Z] 
----- PLAYERS PLACING BETS -----
[2025-03-21T15:25:22.707Z] Player 1 (0x9Fde625ED8A6eC0f3cA393A62be34231a5c167F4) bet 5 chips
[2025-03-21T15:25:22.985Z] Pot after bet 1: 5, Current bet: 5
[2025-03-21T15:25:26.713Z] Player 2 (0x0Fae37437c1347c23dc279b424663579d2df67df) bet 5 chips
[2025-03-21T15:25:26.996Z] Pot after bet 2: 10, Current bet: 5
[2025-03-21T15:25:30.712Z] Player 3 (0xd2e443F6CF19d5d359e82bbEea76e1133028fda5) bet 10 chips (raising to 10)
[2025-03-21T15:25:30.713Z] Player action: bet, Amount: 10, Nonce: 3
[2025-03-21T15:25:31.003Z] Pot after bet 3: 20, Current bet: 10
[2025-03-21T15:25:34.714Z] Player 1 (0x9Fde625ED8A6eC0f3cA393A62be34231a5c167F4) bet additional 5 chips (calling the raise)
[2025-03-21T15:25:34.996Z] Pot after bet 4: 25, Current bet: 10
[2025-03-21T15:25:38.716Z] Player 2 (0x0Fae37437c1347c23dc279b424663579d2df67df) bet additional 5 chips (calling the raise)
[2025-03-21T15:25:38.994Z] Pot after bet 5: 30, Current bet: 10
[2025-03-21T15:25:42.720Z] Player 4 (0x7B7057B07218fa9f357E39cb2fC2E723C2bfcf9F) folded
[2025-03-21T15:25:42.720Z] Player action: fold, Amount: 0, Nonce: 1
[2025-03-21T15:25:43.001Z] Active players after fold: 4
[2025-03-21T15:25:43.001Z] 
----- PLAYER STATUS AFTER BETTING -----
[2025-03-21T15:25:43.291Z] Player 1 (0x9Fde625ED8A6eC0f3cA393A62be34231a5c167F4):
[2025-03-21T15:25:43.291Z]   Chip balance: 10
[2025-03-21T15:25:43.291Z]   Current bet: 10
[2025-03-21T15:25:43.291Z]   Has folded: false
[2025-03-21T15:25:43.291Z]   Action nonce: 3
[2025-03-21T15:25:43.569Z] Player 2 (0x0Fae37437c1347c23dc279b424663579d2df67df):
[2025-03-21T15:25:43.569Z]   Chip balance: 10
[2025-03-21T15:25:43.569Z]   Current bet: 10
[2025-03-21T15:25:43.569Z]   Has folded: false
[2025-03-21T15:25:43.569Z]   Action nonce: 3
[2025-03-21T15:25:43.846Z] Player 3 (0xd2e443F6CF19d5d359e82bbEea76e1133028fda5):
[2025-03-21T15:25:43.846Z]   Chip balance: 8
[2025-03-21T15:25:43.846Z]   Current bet: 10
[2025-03-21T15:25:43.846Z]   Has folded: false
[2025-03-21T15:25:43.846Z]   Action nonce: 3
[2025-03-21T15:25:44.131Z] Player 4 (0x7B7057B07218fa9f357E39cb2fC2E723C2bfcf9F):
[2025-03-21T15:25:44.131Z]   Chip balance: 25
[2025-03-21T15:25:44.131Z]   Current bet: 0
[2025-03-21T15:25:44.131Z]   Has folded: true
[2025-03-21T15:25:44.131Z]   Action nonce: 1
[2025-03-21T15:25:44.408Z] Have all active players matched the current bet? false
[2025-03-21T15:25:44.409Z] 
----- WAITING FOR BETTING PHASE TO END -----
[2025-03-21T15:25:44.690Z] Betting phase ends in 269 seconds at 2025-03-21T15:30:13.000Z
[2025-03-21T15:25:44.690Z] All players have matched bets, manually ending betting phase...
[2025-03-21T15:25:44.690Z] 
----- CHECKING GAME STATE BEFORE ENDING BETTING PHASE -----
[2025-03-21T15:25:44.957Z] Current game state: BETTING
[2025-03-21T15:25:44.957Z] Phase end time: 2025-03-21T15:30:13.000Z
[2025-03-21T15:25:44.957Z] Current time: 2025-03-21T15:25:44.957Z
[2025-03-21T15:25:44.957Z] Buffer end time: 2025-03-21T15:25:13.000Z
[2025-03-21T15:25:44.957Z] Is in buffer period: false
[2025-03-21T15:25:44.957Z] Is phase ended: false
[2025-03-21T15:25:45.235Z] Is caller (0x1dA9aCB41763f97F744Da547F2d103042e8Ab239) a keeper: true
[2025-03-21T15:25:45.235Z] Betting phase hasn't ended yet. Waiting 268 seconds...
[2025-03-21T15:25:45.235Z] Waiting for phase to end on TEN network...
[2025-03-21T15:30:15.311Z] Betting phase has now ended
[2025-03-21T15:30:15.594Z] Game state after waiting: BETTING
[2025-03-21T15:30:15.594Z] Updated phase end time: 2025-03-21T15:30:13.000Z
[2025-03-21T15:30:15.594Z] Updated buffer end time: 2025-03-21T15:25:13.000Z
[2025-03-21T15:30:15.594Z] 
----- ENDING BETTING PHASE -----
[2025-03-21T15:30:16.697Z] endBettingPhase transaction submitted, waiting for confirmation...
[2025-03-21T15:30:18.789Z] endBettingPhase transaction confirmed!
[2025-03-21T15:30:18.789Z] Showdown phase started
[2025-03-21T15:30:18.789Z] Game ended event not found in transaction logs - waiting for async event
[2025-03-21T15:30:18.838Z] Card for 0x1dA9aCB41763f97F744Da547F2d103042e8Ab239: 8 of Spades
[2025-03-21T15:30:18.839Z] Card for 0x9Fde625ED8A6eC0f3cA393A62be34231a5c167F4: 8 of Diamonds
[2025-03-21T15:30:18.839Z] Card for 0x0Fae37437c1347c23dc279b424663579d2df67df: Queen of Spades
[2025-03-21T15:30:18.839Z] Card for 0xd2e443F6CF19d5d359e82bbEea76e1133028fda5: 4 of Spades
[2025-03-21T15:30:19.092Z] 
===== GAME ENDED EVENT CAPTURED =====
[2025-03-21T15:30:19.092Z] Winner: 0x0Fae37437c1347c23dc279b424663579d2df67df
[2025-03-21T15:30:19.092Z] Pot Amount: 30 chips
[2025-03-21T15:30:19.092Z] Player 2 (0x0Fae37437c1347c23dc279b424663579d2df67df) won the game!
[2025-03-21T15:30:19.092Z] Async winner detection: 0x0Fae37437c1347c23dc279b424663579d2df67df
[2025-03-21T15:30:19.093Z] Final game state: State=SHOWDOWN, Pot=30, CurrentBet=10, StateVersion=4
[2025-03-21T15:30:19.093Z] 
----- REVEALED CARDS DURING SHOWDOWN -----
[2025-03-21T15:30:19.096Z] Error getting revealed cards: spectatorContract.getRevealedCards is not a function
[2025-03-21T15:30:19.096Z] 
----- FINAL GAME STATE -----
[2025-03-21T15:30:19.373Z] Game state: ENDED
[2025-03-21T15:30:19.373Z] Pot amount: 0
[2025-03-21T15:30:19.373Z] State version: 5
[2025-03-21T15:30:19.373Z] Is cleaned up: false
[2025-03-21T15:30:19.373Z] 
----- FINAL PLAYER BALANCES -----
[2025-03-21T15:30:19.647Z] Player 1 (0x9Fde625ED8A6eC0f3cA393A62be34231a5c167F4):
[2025-03-21T15:30:19.647Z]   Initial balance: 25
[2025-03-21T15:30:19.647Z]   Final balance: 10
[2025-03-21T15:30:19.648Z]   Difference: -15
[2025-03-21T15:30:19.922Z] Player 2 (0x0Fae37437c1347c23dc279b424663579d2df67df):
[2025-03-21T15:30:19.923Z]   Initial balance: 25
[2025-03-21T15:30:19.923Z]   Final balance: 40
[2025-03-21T15:30:19.923Z]   Difference: 15
[2025-03-21T15:30:19.923Z] *** Player 2 gained 15 chips - WINNER! ***
[2025-03-21T15:30:20.211Z] Player 3 (0xd2e443F6CF19d5d359e82bbEea76e1133028fda5):
[2025-03-21T15:30:20.211Z]   Initial balance: 25
[2025-03-21T15:30:20.211Z]   Final balance: 8
[2025-03-21T15:30:20.211Z]   Difference: -17
[2025-03-21T15:30:20.490Z] Player 4 (0x7B7057B07218fa9f357E39cb2fC2E723C2bfcf9F):
[2025-03-21T15:30:20.491Z]   Initial balance: 25
[2025-03-21T15:30:20.491Z]   Final balance: 25
[2025-03-21T15:30:20.491Z]   Difference: 0
[2025-03-21T15:30:20.491Z] 
----- CLEANING UP THE GAME -----
[2025-03-21T15:30:22.775Z] Game cleaned up successfully
[2025-03-21T15:30:23.051Z] Game is cleaned up: true
[2025-03-21T15:30:23.051Z] Game is no longer spectatable
[2025-03-21T15:30:23.051Z] Final state update: State=ENDED, StateVersion=6
[2025-03-21T15:30:23.052Z] 
===== ONE CARD POKER WITH MONTY HALL FULL GAME TEST COMPLETED =====
[2025-03-21T15:35:47.259Z] 
===== SETTING UP TEST ENVIRONMENT =====
[2025-03-21T15:35:47.288Z] Wallet setup complete.
[2025-03-21T15:35:47.288Z] Owner address: 0x1dA9aCB41763f97F744Da547F2d103042e8Ab239
[2025-03-21T15:35:47.288Z] Player 1 address: 0x9Fde625ED8A6eC0f3cA393A62be34231a5c167F4
[2025-03-21T15:35:47.288Z] Player 2 address: 0x0Fae37437c1347c23dc279b424663579d2df67df
[2025-03-21T15:35:47.289Z] Player 3 address: 0xd2e443F6CF19d5d359e82bbEea76e1133028fda5
[2025-03-21T15:35:47.289Z] Player 4 address: 0x7B7057B07218fa9f357E39cb2fC2E723C2bfcf9F
[2025-03-21T15:35:47.289Z] Keeper address: 0x1dA9aCB41763f97F744Da547F2d103042e8Ab239
[2025-03-21T15:35:47.289Z] 
----- CHECKING WALLET BALANCES -----
[2025-03-21T15:35:48.303Z] Address 0x1dA9aCB41763f97F744Da547F2d103042e8Ab239 has 0.60300631774 ETH
[2025-03-21T15:35:48.594Z] Address 0x9Fde625ED8A6eC0f3cA393A62be34231a5c167F4 has 0.9882921425 ETH
[2025-03-21T15:35:48.880Z] Address 0x0Fae37437c1347c23dc279b424663579d2df67df has 0.7408166795 ETH
[2025-03-21T15:35:49.159Z] Address 0xd2e443F6CF19d5d359e82bbEea76e1133028fda5 has 0.4906431706 ETH
[2025-03-21T15:35:49.431Z] Address 0x7B7057B07218fa9f357E39cb2fC2E723C2bfcf9F has 0.740153628 ETH
[2025-03-21T15:35:49.708Z] Address 0x1dA9aCB41763f97F744Da547F2d103042e8Ab239 has 0.60300631774 ETH
[2025-03-21T15:35:49.708Z] 
----- DEPLOYING CONTRACTS -----
[2025-03-21T15:35:49.708Z] Deploying CardLibrary...
[2025-03-21T15:35:56.009Z] CardLibrary deployed at: 0xB81e810FcF3Fb2606CB89842AeF0938eFD0e5696
[2025-03-21T15:35:56.009Z] Deploying GameLibrary...
[2025-03-21T15:36:02.206Z] GameLibrary deployed at: 0xB1083D1617A195d6799Be6532977C0Ad1c83795e
[2025-03-21T15:36:02.207Z] Deploying OneCard main contract...
[2025-03-21T15:36:04.243Z] OneCard contract deployed at: 0x03cAd95ff26cF123Ae534B764c8A08fBbb18c32e
[2025-03-21T15:36:04.243Z] Deploying PokerSpectatorView contract...
[2025-03-21T15:36:10.157Z] PokerSpectatorView contract deployed at: 0x25391082B71a0374e7e92675A0d521759Bf5E46F
[2025-03-21T15:36:10.157Z] 
Add these to your .env file for future use:
[2025-03-21T15:36:10.157Z] POKER_CONTRACT_ADDRESS=0x03cAd95ff26cF123Ae534B764c8A08fBbb18c32e
[2025-03-21T15:36:10.157Z] SPECTATOR_CONTRACT_ADDRESS=0x25391082B71a0374e7e92675A0d521759Bf5E46F
[2025-03-21T15:36:10.161Z] 
===== STARTING ONE CARD POKER WITH MONTY HALL GAME TEST =====
[2025-03-21T15:36:10.161Z] 
----- ADDING PLAYERS TO WHITELIST -----
[2025-03-21T15:36:16.253Z] Added 4 players to whitelist
[2025-03-21T15:36:16.253Z] 
----- CREATING A NEW GAME -----
[2025-03-21T15:36:22.336Z] Created Game with ID: 1
[2025-03-21T15:36:22.617Z] Initial players in game: 5
[2025-03-21T15:36:22.617Z] Player 1: 0x1dA9aCB41763f97F744Da547F2d103042e8Ab239
[2025-03-21T15:36:22.617Z] Player 2: 0x9Fde625ED8A6eC0f3cA393A62be34231a5c167F4
[2025-03-21T15:36:22.617Z] Player 3: 0x0Fae37437c1347c23dc279b424663579d2df67df
[2025-03-21T15:36:22.617Z] Player 4: 0xd2e443F6CF19d5d359e82bbEea76e1133028fda5
[2025-03-21T15:36:22.617Z] Player 5: 0x7B7057B07218fa9f357E39cb2fC2E723C2bfcf9F
[2025-03-21T15:36:22.617Z] 
----- VERIFYING GAME INFO BEFORE STARTING PEEK PHASE -----
[2025-03-21T15:36:22.898Z] Game state: REGISTRATION
[2025-03-21T15:36:22.898Z] Player count: 5
[2025-03-21T15:36:22.898Z] Active count: 5
[2025-03-21T15:36:22.898Z] Game keeper: 0x1dA9aCB41763f97F744Da547F2d103042e8Ab239
[2025-03-21T15:36:22.898Z] State version: 1
[2025-03-21T15:36:22.898Z] Is cleaned up: false
[2025-03-21T15:36:22.898Z] 
----- STARTING PEEK PHASE -----
[2025-03-21T15:36:24.284Z] startPeekPhase transaction submitted, waiting for confirmation...
[2025-03-21T15:36:29.690Z] startPeekPhase transaction confirmed!
[2025-03-21T15:36:29.691Z] Buffer period started before peek phase. Current state: REGISTRATION, Next state: PEEK_PHASE
[2025-03-21T15:36:29.691Z] Peek phase started for game 1
[2025-03-21T15:36:29.691Z] Game state updated: State=PEEK_PHASE, Pot=0, CurrentBet=0, StateVersion=2
[2025-03-21T15:36:29.969Z] Phase end time: 2025-03-21T15:38:54.000Z
[2025-03-21T15:36:29.969Z] Buffer end time: 2025-03-21T15:36:54.000Z
[2025-03-21T15:36:29.970Z] Waiting 25 seconds for buffer period to end...
[2025-03-21T15:36:29.970Z] Waiting for buffer period to end on TEN network...
[2025-03-21T15:36:34.972Z] 20 seconds remaining in buffer period
[2025-03-21T15:36:44.975Z] 10 seconds remaining in buffer period
[2025-03-21T15:36:54.979Z] Buffer period ended
[2025-03-21T15:36:54.984Z] 
----- PLAYERS PEEKING AT CARDS -----
[2025-03-21T15:36:56.152Z] Player 1 initial chip balance: 25
[2025-03-21T15:36:59.442Z] Player 1 (0x9Fde625ED8A6eC0f3cA393A62be34231a5c167F4) peeked at their card
[2025-03-21T15:36:59.443Z] Player action: peek, Amount: 5, Nonce: 1
[2025-03-21T15:36:59.461Z] Card for 0x9Fde625ED8A6eC0f3cA393A62be34231a5c167F4: 4 of Clubs
[2025-03-21T15:36:59.721Z] Player 1 chip balance after peeking: 20
[2025-03-21T15:37:00.015Z] Player 2 initial chip balance: 25
[2025-03-21T15:37:03.452Z] Player 2 (0x0Fae37437c1347c23dc279b424663579d2df67df) peeked at their card
[2025-03-21T15:37:03.453Z] Player action: peek, Amount: 5, Nonce: 1
[2025-03-21T15:37:03.461Z] Card for 0x0Fae37437c1347c23dc279b424663579d2df67df: 8 of Clubs
[2025-03-21T15:37:03.734Z] Player 2 chip balance after peeking: 20
[2025-03-21T15:37:03.734Z] 
----- PLAYER USING MONTY HALL OPTION -----
[2025-03-21T15:37:04.015Z] Player 3 initial chip balance: 25
[2025-03-21T15:37:07.434Z] Player 3 (0xd2e443F6CF19d5d359e82bbEea76e1133028fda5) used Monty Hall option
[2025-03-21T15:37:07.435Z] Player action: montyHall, Amount: 7, Nonce: 1
[2025-03-21T15:37:07.454Z] Monty Hall cards revealed to 0xd2e443F6CF19d5d359e82bbEea76e1133028fda5:
[2025-03-21T15:37:07.454Z] - 8 of Diamonds
[2025-03-21T15:37:07.454Z] - 10 of Spades
[2025-03-21T15:37:07.712Z] Player 3 chip balance after using Monty Hall: 18
[2025-03-21T15:37:11.422Z] Player 3 decided to swap their card
[2025-03-21T15:37:11.423Z] Player action: swapCard, Amount: 0, Nonce: 2
[2025-03-21T15:37:11.423Z] Player 4 (0x7B7057B07218fa9f357E39cb2fC2E723C2bfcf9F) chose not to peek or use Monty Hall
[2025-03-21T15:37:11.466Z] 0xd2e443F6CF19d5d359e82bbEea76e1133028fda5 swapped 7 of Hearts for 4 of Hearts
[2025-03-21T15:37:11.701Z] 
----- PLAYER STATUS AFTER PEEK PHASE -----
[2025-03-21T15:37:11.981Z] Player 1 (0x9Fde625ED8A6eC0f3cA393A62be34231a5c167F4):
[2025-03-21T15:37:11.981Z]   Chip balance: 20
[2025-03-21T15:37:11.981Z]   Has peeked: true
[2025-03-21T15:37:11.982Z]   Used Monty Hall: false
[2025-03-21T15:37:11.982Z]   Action nonce: 1
[2025-03-21T15:37:12.600Z] Player 2 (0x0Fae37437c1347c23dc279b424663579d2df67df):
[2025-03-21T15:37:12.600Z]   Chip balance: 20
[2025-03-21T15:37:12.601Z]   Has peeked: true
[2025-03-21T15:37:12.601Z]   Used Monty Hall: false
[2025-03-21T15:37:12.601Z]   Action nonce: 1
[2025-03-21T15:37:12.879Z] Player 3 (0xd2e443F6CF19d5d359e82bbEea76e1133028fda5):
[2025-03-21T15:37:12.880Z]   Chip balance: 18
[2025-03-21T15:37:12.880Z]   Has peeked: false
[2025-03-21T15:37:12.880Z]   Used Monty Hall: true
[2025-03-21T15:37:12.880Z]   Action nonce: 2
[2025-03-21T15:37:13.198Z] Player 4 (0x7B7057B07218fa9f357E39cb2fC2E723C2bfcf9F):
[2025-03-21T15:37:13.198Z]   Chip balance: 25
[2025-03-21T15:37:13.198Z]   Has peeked: false
[2025-03-21T15:37:13.198Z]   Used Monty Hall: false
[2025-03-21T15:37:13.198Z]   Action nonce: 0
[2025-03-21T15:37:13.198Z] 
----- WAITING FOR PEEK PHASE TO END -----
[2025-03-21T15:37:13.481Z] Waiting 101 seconds for peek phase to end...
[2025-03-21T15:37:13.481Z] Waiting for peek phase to end on TEN network...
[2025-03-21T15:39:03.495Z] Peek phase ended
[2025-03-21T15:39:03.496Z] 
----- ENDING PEEK PHASE -----
[2025-03-21T15:39:04.601Z] endPeekPhase transaction submitted, waiting for confirmation...
[2025-03-21T15:39:07.440Z] endPeekPhase transaction confirmed!
[2025-03-21T15:39:07.440Z] Buffer period started before betting phase. Current state: PEEK_PHASE, Next state: BETTING
[2025-03-21T15:39:07.440Z] Betting phase started for game 1
[2025-03-21T15:39:07.440Z] Game state updated: State=BETTING, Pot=0, CurrentBet=0, StateVersion=3
[2025-03-21T15:39:07.714Z] Phase end time: 2025-03-21T15:44:34.000Z
[2025-03-21T15:39:07.714Z] Buffer end time: 2025-03-21T15:39:34.000Z
[2025-03-21T15:39:07.714Z] Waiting 27 seconds for buffer period to end...
[2025-03-21T15:39:07.714Z] Waiting for buffer period to end on TEN network...
[2025-03-21T15:39:37.720Z] Buffer period ended
[2025-03-21T15:39:37.720Z] 
----- PLAYERS PLACING BETS -----
[2025-03-21T15:39:39.454Z] Player 1 (0x9Fde625ED8A6eC0f3cA393A62be34231a5c167F4) bet 5 chips
[2025-03-21T15:39:39.736Z] Pot after bet 1: 5, Current bet: 5
[2025-03-21T15:39:43.441Z] Player 2 (0x0Fae37437c1347c23dc279b424663579d2df67df) bet 5 chips
[2025-03-21T15:39:43.719Z] Pot after bet 2: 10, Current bet: 5
[2025-03-21T15:39:47.447Z] Player 3 (0xd2e443F6CF19d5d359e82bbEea76e1133028fda5) bet 10 chips (raising to 10)
[2025-03-21T15:39:47.728Z] Pot after bet 3: 20, Current bet: 10
[2025-03-21T15:39:51.446Z] Player 1 (0x9Fde625ED8A6eC0f3cA393A62be34231a5c167F4) bet additional 5 chips (calling the raise)
[2025-03-21T15:39:51.730Z] Pot after bet 4: 25, Current bet: 10
[2025-03-21T15:39:55.437Z] Player 2 (0x0Fae37437c1347c23dc279b424663579d2df67df) bet additional 5 chips (calling the raise)
[2025-03-21T15:39:55.717Z] Pot after bet 5: 30, Current bet: 10
[2025-03-21T15:39:59.447Z] Player 4 (0x7B7057B07218fa9f357E39cb2fC2E723C2bfcf9F) folded
[2025-03-21T15:39:59.728Z] Active players after fold: 4
[2025-03-21T15:39:59.729Z] 
----- PLAYER STATUS AFTER BETTING -----
[2025-03-21T15:40:00.011Z] Player 1 (0x9Fde625ED8A6eC0f3cA393A62be34231a5c167F4):
[2025-03-21T15:40:00.011Z]   Chip balance: 10
[2025-03-21T15:40:00.011Z]   Current bet: 10
[2025-03-21T15:40:00.011Z]   Has folded: false
[2025-03-21T15:40:00.011Z]   Action nonce: 3
[2025-03-21T15:40:00.291Z] Player 2 (0x0Fae37437c1347c23dc279b424663579d2df67df):
[2025-03-21T15:40:00.291Z]   Chip balance: 10
[2025-03-21T15:40:00.291Z]   Current bet: 10
[2025-03-21T15:40:00.291Z]   Has folded: false
[2025-03-21T15:40:00.291Z]   Action nonce: 3
[2025-03-21T15:40:00.569Z] Player 3 (0xd2e443F6CF19d5d359e82bbEea76e1133028fda5):
[2025-03-21T15:40:00.569Z]   Chip balance: 8
[2025-03-21T15:40:00.569Z]   Current bet: 10
[2025-03-21T15:40:00.569Z]   Has folded: false
[2025-03-21T15:40:00.569Z]   Action nonce: 3
[2025-03-21T15:40:00.842Z] Player 4 (0x7B7057B07218fa9f357E39cb2fC2E723C2bfcf9F):
[2025-03-21T15:40:00.842Z]   Chip balance: 25
[2025-03-21T15:40:00.842Z]   Current bet: 0
[2025-03-21T15:40:00.843Z]   Has folded: true
[2025-03-21T15:40:00.843Z]   Action nonce: 1
[2025-03-21T15:40:01.151Z] Have all active players matched the current bet? false
[2025-03-21T15:40:01.152Z] 
----- WAITING FOR BETTING PHASE TO END -----
[2025-03-21T15:40:01.429Z] Betting phase ends in 273 seconds at 2025-03-21T15:44:34.000Z
[2025-03-21T15:40:01.430Z] All players have matched bets, manually ending betting phase...
[2025-03-21T15:40:01.430Z] 
----- CHECKING GAME STATE BEFORE ENDING BETTING PHASE -----
[2025-03-21T15:40:01.698Z] Current game state: BETTING
[2025-03-21T15:40:01.698Z] Phase end time: 2025-03-21T15:44:34.000Z
[2025-03-21T15:40:01.698Z] Current time: 2025-03-21T15:40:01.698Z
[2025-03-21T15:40:01.699Z] Buffer end time: 2025-03-21T15:39:34.000Z
[2025-03-21T15:40:01.699Z] Is in buffer period: false
[2025-03-21T15:40:01.699Z] Is phase ended: false
[2025-03-21T15:40:01.974Z] Is caller (0x1dA9aCB41763f97F744Da547F2d103042e8Ab239) a keeper: true
[2025-03-21T15:40:01.974Z] Betting phase hasn't ended yet. Waiting 273 seconds...
[2025-03-21T15:40:01.974Z] Waiting for phase to end on TEN network...
[2025-03-21T15:44:37.046Z] Betting phase has now ended
[2025-03-21T15:44:37.325Z] Game state after waiting: BETTING
[2025-03-21T15:44:37.325Z] Updated phase end time: 2025-03-21T15:44:34.000Z
[2025-03-21T15:44:37.325Z] Updated buffer end time: 2025-03-21T15:39:34.000Z
[2025-03-21T15:44:37.325Z] 
----- ENDING BETTING PHASE -----
[2025-03-21T15:44:38.420Z] endBettingPhase transaction submitted, waiting for confirmation...
[2025-03-21T15:44:39.534Z] endBettingPhase transaction confirmed!
[2025-03-21T15:44:39.534Z] Showdown phase started
[2025-03-21T15:44:39.534Z] Game ended event not found in transaction logs - waiting for async event
[2025-03-21T15:44:43.610Z] Card for 0x1dA9aCB41763f97F744Da547F2d103042e8Ab239: King of Spades
[2025-03-21T15:44:43.610Z] Card for 0x9Fde625ED8A6eC0f3cA393A62be34231a5c167F4: 4 of Clubs
[2025-03-21T15:44:43.610Z] Card for 0x0Fae37437c1347c23dc279b424663579d2df67df: 8 of Clubs
[2025-03-21T15:44:43.610Z] Card for 0xd2e443F6CF19d5d359e82bbEea76e1133028fda5: 4 of Hearts
[2025-03-21T15:44:43.614Z] 
===== GAME ENDED EVENT CAPTURED =====
[2025-03-21T15:44:43.614Z] Winner: 0x1dA9aCB41763f97F744Da547F2d103042e8Ab239
[2025-03-21T15:44:43.614Z] Pot Amount: 30 chips
[2025-03-21T15:44:43.615Z] Async winner detection: 0x1dA9aCB41763f97F744Da547F2d103042e8Ab239
[2025-03-21T15:44:43.615Z] Final game state: State=SHOWDOWN, Pot=30, CurrentBet=10, StateVersion=4
[2025-03-21T15:44:43.615Z] 
----- REVEALED CARDS DURING SHOWDOWN -----
[2025-03-21T15:44:43.616Z] Error getting revealed cards: spectatorContract.getRevealedCardsForSpectating is not a function
[2025-03-21T15:44:43.616Z] 
----- FINAL GAME STATE -----
[2025-03-21T15:44:43.887Z] Game state: ENDED
[2025-03-21T15:44:43.888Z] Pot amount: 0
[2025-03-21T15:44:43.888Z] State version: 5
[2025-03-21T15:44:43.888Z] Is cleaned up: false
[2025-03-21T15:44:43.888Z] 
----- FINAL PLAYER BALANCES -----
[2025-03-21T15:44:44.167Z] Player 1 (0x9Fde625ED8A6eC0f3cA393A62be34231a5c167F4):
[2025-03-21T15:44:44.167Z]   Initial balance: 25
[2025-03-21T15:44:44.167Z]   Final balance: 10
[2025-03-21T15:44:44.168Z]   Difference: -15
[2025-03-21T15:44:44.443Z] Player 2 (0x0Fae37437c1347c23dc279b424663579d2df67df):
[2025-03-21T15:44:44.443Z]   Initial balance: 25
[2025-03-21T15:44:44.443Z]   Final balance: 10
[2025-03-21T15:44:44.443Z]   Difference: -15
[2025-03-21T15:44:44.730Z] Player 3 (0xd2e443F6CF19d5d359e82bbEea76e1133028fda5):
[2025-03-21T15:44:44.731Z]   Initial balance: 25
[2025-03-21T15:44:44.731Z]   Final balance: 8
[2025-03-21T15:44:44.731Z]   Difference: -17
[2025-03-21T15:44:45.004Z] Player 4 (0x7B7057B07218fa9f357E39cb2fC2E723C2bfcf9F):
[2025-03-21T15:44:45.005Z]   Initial balance: 25
[2025-03-21T15:44:45.005Z]   Final balance: 25
[2025-03-21T15:44:45.005Z]   Difference: 0
[2025-03-21T15:44:45.005Z] 
----- CLEANING UP THE GAME -----
[2025-03-21T15:44:47.531Z] Game cleaned up successfully
[2025-03-21T15:44:47.810Z] Game is cleaned up: true
[2025-03-21T15:44:47.810Z] Game is no longer spectatable
[2025-03-21T15:44:47.811Z] Final state update: State=ENDED, StateVersion=6
[2025-03-21T15:44:47.811Z] 
===== ONE CARD POKER WITH MONTY HALL FULL GAME TEST COMPLETED =====
[2025-03-21T16:34:57.473Z] 
===== SETTING UP TEST ENVIRONMENT =====
[2025-03-21T16:34:57.508Z] Wallet setup complete.
[2025-03-21T16:34:57.509Z] Owner address: 0x1dA9aCB41763f97F744Da547F2d103042e8Ab239
[2025-03-21T16:34:57.509Z] Player 1 address: 0x9Fde625ED8A6eC0f3cA393A62be34231a5c167F4
[2025-03-21T16:34:57.509Z] Player 2 address: 0x0Fae37437c1347c23dc279b424663579d2df67df
[2025-03-21T16:34:57.509Z] Player 3 address: 0xd2e443F6CF19d5d359e82bbEea76e1133028fda5
[2025-03-21T16:34:57.509Z] Player 4 address: 0x7B7057B07218fa9f357E39cb2fC2E723C2bfcf9F
[2025-03-21T16:34:57.509Z] Spectator 1 address: 0x1dA9aCB41763f97F744Da547F2d103042e8Ab239
[2025-03-21T16:34:57.509Z] Spectator 2 address: 0x52731AEDA26AB8D159226C51180a7542a4287500
[2025-03-21T16:34:57.509Z] Spectator 3 address: 0x45ab32ec402D51096398aA4e6a7aF03180E50bD0
[2025-03-21T16:34:57.509Z] Keeper address: 0x1dA9aCB41763f97F744Da547F2d103042e8Ab239
[2025-03-21T16:34:57.509Z] 
----- CHECKING WALLET BALANCES -----
[2025-03-21T16:34:58.679Z] Address 0x1dA9aCB41763f97F744Da547F2d103042e8Ab239 has 0.58848418604 ETH
[2025-03-21T16:34:58.958Z] Address 0x9Fde625ED8A6eC0f3cA393A62be34231a5c167F4 has 0.9878495867 ETH
[2025-03-21T16:34:59.238Z] Address 0x0Fae37437c1347c23dc279b424663579d2df67df has 0.7404331653 ETH
[2025-03-21T16:34:59.519Z] Address 0xd2e443F6CF19d5d359e82bbEea76e1133028fda5 has 0.4900352131 ETH
[2025-03-21T16:34:59.799Z] Address 0x7B7057B07218fa9f357E39cb2fC2E723C2bfcf9F has 0.7400216479 ETH
[2025-03-21T16:35:00.076Z] Address 0x1dA9aCB41763f97F744Da547F2d103042e8Ab239 has 0.58848418604 ETH
[2025-03-21T16:35:00.354Z] Address 0x52731AEDA26AB8D159226C51180a7542a4287500 has 0.7466408968 ETH
[2025-03-21T16:35:00.628Z] Address 0x45ab32ec402D51096398aA4e6a7aF03180E50bD0 has 0.7 ETH
[2025-03-21T16:35:00.903Z] Address 0x1dA9aCB41763f97F744Da547F2d103042e8Ab239 has 0.58848418604 ETH
[2025-03-21T16:35:00.903Z] 
----- DEPLOYING CONTRACTS -----
[2025-03-21T16:35:00.904Z] Deploying CardLibrary...
[2025-03-21T16:35:07.189Z] CardLibrary deployed at: 0x0D4b35d70b8CD72d18FAc05cd636D42F743fC16d
[2025-03-21T16:35:07.190Z] Deploying GameLibrary...
[2025-03-21T16:35:13.304Z] GameLibrary deployed at: 0xBEeccDcE403103840cda0Db998CEb0871E9c4Ce5
[2025-03-21T16:35:13.305Z] Deploying OneCard main contract...
[2025-03-21T16:35:19.881Z] OneCard contract deployed at: 0x67b718b2548C549f1CD749ceF07786d6e60D9e11
[2025-03-21T16:35:19.881Z] Deploying PokerSpectatorView contract...
[2025-03-21T16:35:22.374Z] PokerSpectatorView contract deployed at: 0xe16B78Dc54708D019D5A4D40724c374164737ECd
[2025-03-21T16:35:22.375Z] Deploying SpectatorBetting contract...
[2025-03-21T16:35:28.214Z] SpectatorBetting contract deployed at: 0xc485Ba0B459Ff7bC527688C47846ad4A5249F3EE
[2025-03-21T16:35:28.215Z] Setting spectator betting contract in OneCard contract...
[2025-03-21T16:35:34.303Z] SpectatorBetting contract set in OneCard
[2025-03-21T16:35:34.303Z] 
Add these to your .env file for future use:
[2025-03-21T16:35:34.303Z] POKER_CONTRACT_ADDRESS=0x67b718b2548C549f1CD749ceF07786d6e60D9e11
[2025-03-21T16:35:34.303Z] SPECTATOR_CONTRACT_ADDRESS=0xe16B78Dc54708D019D5A4D40724c374164737ECd
[2025-03-21T16:35:34.303Z] SPECTATOR_BETTING_ADDRESS=0xc485Ba0B459Ff7bC527688C47846ad4A5249F3EE
[2025-03-21T16:35:34.307Z] 
===== STARTING ONE CARD POKER WITH MONTY HALL AND SPECTATOR BETTING TEST =====
[2025-03-21T16:35:34.307Z] 
----- ADDING PLAYERS TO WHITELIST -----
[2025-03-21T16:35:40.373Z] Added 4 players to whitelist
[2025-03-21T16:35:40.374Z] 
----- CREATING A NEW GAME -----
[2025-03-21T16:35:46.443Z] Created Game with ID: 1
[2025-03-21T16:35:46.733Z] Initial players in game: 5
[2025-03-21T16:35:46.733Z] Player 1: 0x1dA9aCB41763f97F744Da547F2d103042e8Ab239
[2025-03-21T16:35:46.733Z] Player 2: 0x9Fde625ED8A6eC0f3cA393A62be34231a5c167F4
[2025-03-21T16:35:46.733Z] Player 3: 0x0Fae37437c1347c23dc279b424663579d2df67df
[2025-03-21T16:35:46.733Z] Player 4: 0xd2e443F6CF19d5d359e82bbEea76e1133028fda5
[2025-03-21T16:35:46.733Z] Player 5: 0x7B7057B07218fa9f357E39cb2fC2E723C2bfcf9F
[2025-03-21T16:35:46.733Z] 
----- VERIFYING GAME INFO BEFORE SPECTATOR BETTING -----
[2025-03-21T16:35:47.012Z] Game state: REGISTRATION
[2025-03-21T16:35:47.012Z] Player count: 5
[2025-03-21T16:35:47.012Z] Active count: 5
[2025-03-21T16:35:47.012Z] Game keeper: 0x1dA9aCB41763f97F744Da547F2d103042e8Ab239
[2025-03-21T16:35:47.012Z] State version: 1
[2025-03-21T16:35:47.012Z] Is cleaned up: false
[2025-03-21T16:35:47.012Z] 
----- CHECKING IF BETTING IS OPEN -----
[2025-03-21T16:35:47.289Z] Betting open: true
[2025-03-21T16:35:47.289Z] Results processed: false
[2025-03-21T16:35:47.290Z] Total bet amount: 0.0 ETH
[2025-03-21T16:35:47.290Z] 
----- SPECTATORS PLACING BETS -----
[2025-03-21T16:35:50.868Z] Spectator 1 (0x1dA9aCB41763f97F744Da547F2d103042e8Ab239) bet 0.01 ETH on Player 1 (0x9Fde625ED8A6eC0f3cA393A62be34231a5c167F4)
[2025-03-21T16:35:51.160Z] Verified bet - Player: 0x9Fde625ED8A6eC0f3cA393A62be34231a5c167F4, Amount: 0.01 ETH, Claimed: false
[2025-03-21T16:35:54.870Z] Spectator 2 (0x52731AEDA26AB8D159226C51180a7542a4287500) bet 0.01 ETH on Player 2 (0x0Fae37437c1347c23dc279b424663579d2df67df)
[2025-03-21T16:35:54.934Z] Spectator 0x52731AEDA26AB8D159226C51180a7542a4287500 placed a bet of 0.01 ETH on player 0x0Fae37437c1347c23dc279b424663579d2df67df
[2025-03-21T16:35:55.148Z] Verified bet - Player: 0x0Fae37437c1347c23dc279b424663579d2df67df, Amount: 0.01 ETH, Claimed: false
[2025-03-21T16:35:58.885Z] Spectator 3 (0x45ab32ec402D51096398aA4e6a7aF03180E50bD0) bet 0.01 ETH on Player 3 (0xd2e443F6CF19d5d359e82bbEea76e1133028fda5)
[2025-03-21T16:35:58.912Z] Spectator 0x45ab32ec402D51096398aA4e6a7aF03180E50bD0 placed a bet of 0.01 ETH on player 0xd2e443F6CF19d5d359e82bbEea76e1133028fda5
[2025-03-21T16:35:59.166Z] Verified bet - Player: 0xd2e443F6CF19d5d359e82bbEea76e1133028fda5, Amount: 0.01 ETH, Claimed: false
[2025-03-21T16:35:59.167Z] 
----- CHECKING TOTAL BETS ON EACH PLAYER -----
[2025-03-21T16:35:59.445Z] Total bet on Player 1 (0x9Fde625ED8A6eC0f3cA393A62be34231a5c167F4): 0.01 ETH
[2025-03-21T16:35:59.725Z] Total bet on Player 2 (0x0Fae37437c1347c23dc279b424663579d2df67df): 0.01 ETH
[2025-03-21T16:36:00.002Z] Total bet on Player 3 (0xd2e443F6CF19d5d359e82bbEea76e1133028fda5): 0.01 ETH
[2025-03-21T16:36:00.287Z] Total bet on Player 4 (0x7B7057B07218fa9f357E39cb2fC2E723C2bfcf9F): 0.0 ETH
[2025-03-21T16:36:00.566Z] Total betting pool: 0.03 ETH
[2025-03-21T16:36:00.567Z] 
----- STARTING PEEK PHASE -----
[2025-03-21T16:36:01.665Z] startPeekPhase transaction submitted, waiting for confirmation...
[2025-03-21T16:36:02.866Z] startPeekPhase transaction confirmed!
[2025-03-21T16:36:02.866Z] Buffer period started before peek phase. Current state: REGISTRATION, Next state: PEEK_PHASE
[2025-03-21T16:36:02.866Z] Peek phase started for game 1
[2025-03-21T16:36:02.866Z] Game state updated: State=PEEK_PHASE, Pot=0, CurrentBet=0, StateVersion=2
[2025-03-21T16:36:02.929Z] Betting closed for game 1
[2025-03-21T16:36:03.141Z] Betting open after peek phase start: false
[2025-03-21T16:36:03.418Z] Phase end time: 2025-03-21T16:38:32.000Z
[2025-03-21T16:36:03.418Z] Buffer end time: 2025-03-21T16:36:32.000Z
[2025-03-21T16:36:03.418Z] Waiting 29 seconds for buffer period to end...
[2025-03-21T16:36:03.418Z] Waiting for buffer period to end on TEN network...
[2025-03-21T16:36:33.421Z] Buffer period ended
[2025-03-21T16:36:33.423Z] 
----- PLAYERS PEEKING AT CARDS -----
[2025-03-21T16:36:33.704Z] Player 1 initial chip balance: 25
[2025-03-21T16:36:38.893Z] Player 1 (0x9Fde625ED8A6eC0f3cA393A62be34231a5c167F4) peeked at their card
[2025-03-21T16:36:38.894Z] Player action: peek, Amount: 5, Nonce: 1
[2025-03-21T16:36:39.169Z] Player 1 chip balance after peeking: 20
[2025-03-21T16:36:39.452Z] Player 2 initial chip balance: 25
[2025-03-21T16:36:42.918Z] Player 2 (0x0Fae37437c1347c23dc279b424663579d2df67df) peeked at their card
[2025-03-21T16:36:42.919Z] Player action: peek, Amount: 5, Nonce: 1
[2025-03-21T16:36:42.938Z] Card for 0x9Fde625ED8A6eC0f3cA393A62be34231a5c167F4: 9 of Hearts
[2025-03-21T16:36:42.939Z] Card for 0x0Fae37437c1347c23dc279b424663579d2df67df: Jack of Diamonds
[2025-03-21T16:36:43.196Z] Player 2 chip balance after peeking: 20
[2025-03-21T16:36:43.196Z] 
----- PLAYER USING MONTY HALL OPTION -----
[2025-03-21T16:36:43.474Z] Player 3 initial chip balance: 25
[2025-03-21T16:36:46.894Z] Player 3 (0xd2e443F6CF19d5d359e82bbEea76e1133028fda5) used Monty Hall option
[2025-03-21T16:36:46.894Z] Player action: montyHall, Amount: 7, Nonce: 1
[2025-03-21T16:36:46.947Z] Monty Hall cards revealed to 0xd2e443F6CF19d5d359e82bbEea76e1133028fda5:
[2025-03-21T16:36:46.948Z] - 6 of Clubs
[2025-03-21T16:36:46.948Z] - 8 of Diamonds
[2025-03-21T16:36:47.174Z] Player 3 chip balance after using Monty Hall: 18
[2025-03-21T16:36:50.904Z] Player 3 decided to swap their card
[2025-03-21T16:36:50.905Z] Player action: swapCard, Amount: 0, Nonce: 2
[2025-03-21T16:36:50.905Z] Player 4 (0x7B7057B07218fa9f357E39cb2fC2E723C2bfcf9F) chose not to peek or use Monty Hall
[2025-03-21T16:36:50.968Z] 0xd2e443F6CF19d5d359e82bbEea76e1133028fda5 swapped 2 of Clubs for 7 of Clubs
[2025-03-21T16:36:51.184Z] 
----- PLAYER STATUS AFTER PEEK PHASE -----
[2025-03-21T16:36:51.465Z] Player 1 (0x9Fde625ED8A6eC0f3cA393A62be34231a5c167F4):
[2025-03-21T16:36:51.465Z]   Chip balance: 20
[2025-03-21T16:36:51.465Z]   Has peeked: true
[2025-03-21T16:36:51.465Z]   Used Monty Hall: false
[2025-03-21T16:36:51.466Z]   Action nonce: 1
[2025-03-21T16:36:51.745Z] Player 2 (0x0Fae37437c1347c23dc279b424663579d2df67df):
[2025-03-21T16:36:51.745Z]   Chip balance: 20
[2025-03-21T16:36:51.745Z]   Has peeked: true
[2025-03-21T16:36:51.745Z]   Used Monty Hall: false
[2025-03-21T16:36:51.745Z]   Action nonce: 1
[2025-03-21T16:36:52.023Z] Player 3 (0xd2e443F6CF19d5d359e82bbEea76e1133028fda5):
[2025-03-21T16:36:52.024Z]   Chip balance: 18
[2025-03-21T16:36:52.024Z]   Has peeked: false
[2025-03-21T16:36:52.024Z]   Used Monty Hall: true
[2025-03-21T16:36:52.024Z]   Action nonce: 2
[2025-03-21T16:36:52.304Z] Player 4 (0x7B7057B07218fa9f357E39cb2fC2E723C2bfcf9F):
[2025-03-21T16:36:52.305Z]   Chip balance: 25
[2025-03-21T16:36:52.305Z]   Has peeked: false
[2025-03-21T16:36:52.305Z]   Used Monty Hall: false
[2025-03-21T16:36:52.305Z]   Action nonce: 0
[2025-03-21T16:36:52.305Z] 
----- WAITING FOR PEEK PHASE TO END -----
[2025-03-21T16:36:52.584Z] Waiting 100 seconds for peek phase to end...
[2025-03-21T16:36:52.585Z] Waiting for peek phase to end on TEN network...
[2025-03-21T16:37:02.587Z] 90 seconds remaining in peek phase
[2025-03-21T16:37:32.592Z] 60 seconds remaining in peek phase
[2025-03-21T16:38:02.596Z] 30 seconds remaining in peek phase
[2025-03-21T16:38:32.600Z] Peek phase ended
[2025-03-21T16:38:32.600Z] 
----- ENDING PEEK PHASE -----
[2025-03-21T16:38:34.070Z] endPeekPhase transaction submitted, waiting for confirmation...
[2025-03-21T16:38:38.936Z] endPeekPhase transaction confirmed!
[2025-03-21T16:38:38.936Z] Buffer period started before betting phase. Current state: PEEK_PHASE, Next state: BETTING
[2025-03-21T16:38:38.936Z] Betting phase started for game 1
[2025-03-21T16:38:38.936Z] Game state updated: State=BETTING, Pot=0, CurrentBet=0, StateVersion=3
[2025-03-21T16:38:39.569Z] Phase end time: 2025-03-21T16:44:04.000Z
[2025-03-21T16:38:39.570Z] Buffer end time: 2025-03-21T16:39:04.000Z
[2025-03-21T16:38:39.570Z] Waiting 25 seconds for buffer period to end...
[2025-03-21T16:38:39.570Z] Waiting for buffer period to end on TEN network...
[2025-03-21T16:38:44.570Z] 20 seconds remaining in buffer period
[2025-03-21T16:38:54.573Z] 10 seconds remaining in buffer period
[2025-03-21T16:39:04.576Z] Buffer period ended
[2025-03-21T16:39:04.576Z] 
----- PLAYERS PLACING BETS -----
[2025-03-21T16:39:06.330Z] Player 1 (0x9Fde625ED8A6eC0f3cA393A62be34231a5c167F4) bet 5 chips
[2025-03-21T16:39:06.609Z] Pot after bet 1: 5, Current bet: 5
[2025-03-21T16:39:10.900Z] Player 2 (0x0Fae37437c1347c23dc279b424663579d2df67df) bet 5 chips
[2025-03-21T16:39:11.176Z] Pot after bet 2: 10, Current bet: 5
[2025-03-21T16:39:14.903Z] Player 3 (0xd2e443F6CF19d5d359e82bbEea76e1133028fda5) bet 10 chips (raising to 10)
[2025-03-21T16:39:15.182Z] Pot after bet 3: 20, Current bet: 10
[2025-03-21T16:39:17.293Z] Player 1 (0x9Fde625ED8A6eC0f3cA393A62be34231a5c167F4) bet additional 5 chips (calling the raise)
[2025-03-21T16:39:17.572Z] Pot after bet 4: 25, Current bet: 10
[2025-03-21T16:39:22.911Z] Player 2 (0x0Fae37437c1347c23dc279b424663579d2df67df) bet additional 5 chips (calling the raise)
[2025-03-21T16:39:23.190Z] Pot after bet 5: 30, Current bet: 10
[2025-03-21T16:39:25.235Z] Player 4 (0x7B7057B07218fa9f357E39cb2fC2E723C2bfcf9F) folded
[2025-03-21T16:39:25.510Z] Active players after fold: 4
[2025-03-21T16:39:25.510Z] 
----- PLAYER STATUS AFTER BETTING -----
[2025-03-21T16:39:25.788Z] Player 1 (0x9Fde625ED8A6eC0f3cA393A62be34231a5c167F4):
[2025-03-21T16:39:25.788Z]   Chip balance: 10
[2025-03-21T16:39:25.788Z]   Current bet: 10
[2025-03-21T16:39:25.788Z]   Has folded: false
[2025-03-21T16:39:25.788Z]   Action nonce: 3
[2025-03-21T16:39:26.071Z] Player 2 (0x0Fae37437c1347c23dc279b424663579d2df67df):
[2025-03-21T16:39:26.072Z]   Chip balance: 10
[2025-03-21T16:39:26.072Z]   Current bet: 10
[2025-03-21T16:39:26.072Z]   Has folded: false
[2025-03-21T16:39:26.072Z]   Action nonce: 3
[2025-03-21T16:39:26.350Z] Player 3 (0xd2e443F6CF19d5d359e82bbEea76e1133028fda5):
[2025-03-21T16:39:26.350Z]   Chip balance: 8
[2025-03-21T16:39:26.350Z]   Current bet: 10
[2025-03-21T16:39:26.350Z]   Has folded: false
[2025-03-21T16:39:26.350Z]   Action nonce: 3
[2025-03-21T16:39:26.639Z] Player 4 (0x7B7057B07218fa9f357E39cb2fC2E723C2bfcf9F):
[2025-03-21T16:39:26.639Z]   Chip balance: 25
[2025-03-21T16:39:26.639Z]   Current bet: 0
[2025-03-21T16:39:26.639Z]   Has folded: true
[2025-03-21T16:39:26.639Z]   Action nonce: 1
[2025-03-21T16:39:26.908Z] Error during game flow: missing revert data in call exception; Transaction reverted without a reason string [ See: https://links.ethers.org/v5-errors-CALL_EXCEPTION ] (data="0x", transaction={"from":"0x1dA9aCB41763f97F744Da547F2d103042e8Ab239","to":"0x67b718b2548C549f1CD749ceF07786d6e60D9e11","data":"0xba3a95200000000000000000000000000000000000000000000000000000000000000001","accessList":null}, error={"name":"ProviderError","_stack":"ProviderError: rate limit exceeded\n    at HttpProvider.request (/Users/0xjba/agent-arena/node_modules/hardhat/src/internal/core/providers/http.ts:107:21)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at EthersProviderWrapper.send (/Users/0xjba/agent-arena/node_modules/@nomiclabs/hardhat-ethers/src/internal/ethers-provider-wrapper.ts:13:20)","code":-32000,"_isProviderError":true}, code=CALL_EXCEPTION, version=providers/5.7.2)
[2025-03-21T16:41:22.279Z] 
===== SETTING UP TEST ENVIRONMENT =====
[2025-03-21T16:41:22.315Z] Wallet setup complete.
[2025-03-21T16:41:22.315Z] Owner address: 0x1dA9aCB41763f97F744Da547F2d103042e8Ab239
[2025-03-21T16:41:22.315Z] Player 1 address: 0x9Fde625ED8A6eC0f3cA393A62be34231a5c167F4
[2025-03-21T16:41:22.315Z] Player 2 address: 0x0Fae37437c1347c23dc279b424663579d2df67df
[2025-03-21T16:41:22.315Z] Player 3 address: 0xd2e443F6CF19d5d359e82bbEea76e1133028fda5
[2025-03-21T16:41:22.315Z] Player 4 address: 0x7B7057B07218fa9f357E39cb2fC2E723C2bfcf9F
[2025-03-21T16:41:22.315Z] Spectator 1 address: 0x1dA9aCB41763f97F744Da547F2d103042e8Ab239
[2025-03-21T16:41:22.315Z] Spectator 2 address: 0x52731AEDA26AB8D159226C51180a7542a4287500
[2025-03-21T16:41:22.315Z] Spectator 3 address: 0x45ab32ec402D51096398aA4e6a7aF03180E50bD0
[2025-03-21T16:41:22.315Z] Keeper address: 0x1dA9aCB41763f97F744Da547F2d103042e8Ab239
[2025-03-21T16:41:22.315Z] 
----- CHECKING WALLET BALANCES -----
[2025-03-21T16:41:23.336Z] Address 0x1dA9aCB41763f97F744Da547F2d103042e8Ab239 has 0.56218321374 ETH
[2025-03-21T16:41:23.624Z] Address 0x9Fde625ED8A6eC0f3cA393A62be34231a5c167F4 has 0.9873478807 ETH
[2025-03-21T16:41:23.902Z] Address 0x0Fae37437c1347c23dc279b424663579d2df67df has 0.7399905509 ETH
[2025-03-21T16:41:24.187Z] Address 0xd2e443F6CF19d5d359e82bbEea76e1133028fda5 has 0.4893708104 ETH
[2025-03-21T16:41:24.465Z] Address 0x7B7057B07218fa9f357E39cb2fC2E723C2bfcf9F has 0.7398679504 ETH
[2025-03-21T16:41:24.743Z] Address 0x1dA9aCB41763f97F744Da547F2d103042e8Ab239 has 0.56218321374 ETH
[2025-03-21T16:41:25.019Z] Address 0x52731AEDA26AB8D159226C51180a7542a4287500 has 0.7364609549 ETH
[2025-03-21T16:41:25.294Z] Address 0x45ab32ec402D51096398aA4e6a7aF03180E50bD0 has 0.6898200581 ETH
[2025-03-21T16:41:25.572Z] Address 0x1dA9aCB41763f97F744Da547F2d103042e8Ab239 has 0.56218321374 ETH
[2025-03-21T16:41:25.572Z] 
----- DEPLOYING CONTRACTS -----
[2025-03-21T16:41:25.572Z] Deploying CardLibrary...
[2025-03-21T16:41:32.063Z] CardLibrary deployed at: 0x22f0791262B59fef84bA1791F3a33949EdacfC4F
[2025-03-21T16:41:32.063Z] Deploying GameLibrary...
[2025-03-21T16:41:38.173Z] GameLibrary deployed at: 0x95949E81429a62A956dE4e56A0e9e4Ad4dd3ed96
[2025-03-21T16:41:38.173Z] Deploying OneCard main contract...
[2025-03-21T16:41:40.609Z] OneCard contract deployed at: 0x1838917a6014704Be7A5Df337028948c4D32f067
[2025-03-21T16:41:40.610Z] Deploying PokerSpectatorView contract...
[2025-03-21T16:41:46.479Z] PokerSpectatorView contract deployed at: 0x5eBF570aE09d337c894bC4CAECeaF4Ed1Fa4f8ea
[2025-03-21T16:41:46.479Z] Deploying SpectatorBetting contract...
[2025-03-21T16:41:52.622Z] SpectatorBetting contract deployed at: 0x101B5a88F51347b536AeEabeB9a65B9720c0Ee90
[2025-03-21T16:41:52.622Z] Setting spectator betting contract in OneCard contract...
[2025-03-21T16:41:54.295Z] SpectatorBetting contract set in OneCard
[2025-03-21T16:41:54.295Z] 
Add these to your .env file for future use:
[2025-03-21T16:41:54.295Z] POKER_CONTRACT_ADDRESS=0x1838917a6014704Be7A5Df337028948c4D32f067
[2025-03-21T16:41:54.295Z] SPECTATOR_CONTRACT_ADDRESS=0x5eBF570aE09d337c894bC4CAECeaF4Ed1Fa4f8ea
[2025-03-21T16:41:54.295Z] SPECTATOR_BETTING_ADDRESS=0x101B5a88F51347b536AeEabeB9a65B9720c0Ee90
[2025-03-21T16:41:54.300Z] 
===== STARTING ONE CARD POKER WITH MONTY HALL AND SPECTATOR BETTING TEST =====
[2025-03-21T16:41:54.300Z] 
----- ADDING PLAYERS TO WHITELIST -----
[2025-03-21T16:42:00.090Z] Added 4 players to whitelist
[2025-03-21T16:42:00.090Z] 
----- CREATING A NEW GAME -----
[2025-03-21T16:42:06.262Z] Created Game with ID: 1
[2025-03-21T16:42:06.541Z] Initial players in game: 5
[2025-03-21T16:42:06.541Z] Player 1: 0x1dA9aCB41763f97F744Da547F2d103042e8Ab239
[2025-03-21T16:42:06.541Z] Player 2: 0x9Fde625ED8A6eC0f3cA393A62be34231a5c167F4
[2025-03-21T16:42:06.541Z] Player 3: 0x0Fae37437c1347c23dc279b424663579d2df67df
[2025-03-21T16:42:06.541Z] Player 4: 0xd2e443F6CF19d5d359e82bbEea76e1133028fda5
[2025-03-21T16:42:06.541Z] Player 5: 0x7B7057B07218fa9f357E39cb2fC2E723C2bfcf9F
[2025-03-21T16:42:06.541Z] 
----- VERIFYING GAME INFO BEFORE SPECTATOR BETTING -----
[2025-03-21T16:42:06.818Z] Game state: REGISTRATION
[2025-03-21T16:42:06.818Z] Player count: 5
[2025-03-21T16:42:06.818Z] Active count: 5
[2025-03-21T16:42:06.818Z] Game keeper: 0x1dA9aCB41763f97F744Da547F2d103042e8Ab239
[2025-03-21T16:42:06.818Z] State version: 1
[2025-03-21T16:42:06.818Z] Is cleaned up: false
[2025-03-21T16:42:06.818Z] 
----- CHECKING IF BETTING IS OPEN -----
[2025-03-21T16:42:07.367Z] Betting open: true
[2025-03-21T16:42:07.367Z] Results processed: false
[2025-03-21T16:42:07.368Z] Total bet amount: 0.0 ETH
[2025-03-21T16:42:07.368Z] 
----- SPECTATORS PLACING BETS -----
[2025-03-21T16:42:10.696Z] Spectator 1 (0x1dA9aCB41763f97F744Da547F2d103042e8Ab239) bet 0.01 ETH on Player 1 (0x9Fde625ED8A6eC0f3cA393A62be34231a5c167F4)
[2025-03-21T16:42:10.971Z] Verified bet - Player: 0x9Fde625ED8A6eC0f3cA393A62be34231a5c167F4, Amount: 0.01 ETH, Claimed: false
[2025-03-21T16:42:14.697Z] Spectator 2 (0x52731AEDA26AB8D159226C51180a7542a4287500) bet 0.01 ETH on Player 2 (0x0Fae37437c1347c23dc279b424663579d2df67df)
[2025-03-21T16:42:14.974Z] Verified bet - Player: 0x0Fae37437c1347c23dc279b424663579d2df67df, Amount: 0.01 ETH, Claimed: false
[2025-03-21T16:42:18.782Z] Spectator 3 (0x45ab32ec402D51096398aA4e6a7aF03180E50bD0) bet 0.01 ETH on Player 3 (0xd2e443F6CF19d5d359e82bbEea76e1133028fda5)
[2025-03-21T16:42:19.066Z] Spectator 0x52731AEDA26AB8D159226C51180a7542a4287500 placed a bet of 0.01 ETH on player 0x0Fae37437c1347c23dc279b424663579d2df67df
[2025-03-21T16:42:19.067Z] Spectator 0x45ab32ec402D51096398aA4e6a7aF03180E50bD0 placed a bet of 0.01 ETH on player 0xd2e443F6CF19d5d359e82bbEea76e1133028fda5
[2025-03-21T16:42:19.068Z] Verified bet - Player: 0xd2e443F6CF19d5d359e82bbEea76e1133028fda5, Amount: 0.01 ETH, Claimed: false
[2025-03-21T16:42:19.068Z] 
----- CHECKING TOTAL BETS ON EACH PLAYER -----
[2025-03-21T16:42:19.349Z] Total bet on Player 1 (0x9Fde625ED8A6eC0f3cA393A62be34231a5c167F4): 0.01 ETH
[2025-03-21T16:42:19.642Z] Total bet on Player 2 (0x0Fae37437c1347c23dc279b424663579d2df67df): 0.01 ETH
[2025-03-21T16:42:19.926Z] Total bet on Player 3 (0xd2e443F6CF19d5d359e82bbEea76e1133028fda5): 0.01 ETH
[2025-03-21T16:42:20.204Z] Total bet on Player 4 (0x7B7057B07218fa9f357E39cb2fC2E723C2bfcf9F): 0.0 ETH
[2025-03-21T16:42:20.482Z] Total betting pool: 0.03 ETH
[2025-03-21T16:42:20.483Z] 
----- STARTING PEEK PHASE -----
[2025-03-21T16:42:21.589Z] startPeekPhase transaction submitted, waiting for confirmation...
[2025-03-21T16:42:22.724Z] startPeekPhase transaction confirmed!
[2025-03-21T16:42:22.724Z] Buffer period started before peek phase. Current state: REGISTRATION, Next state: PEEK_PHASE
[2025-03-21T16:42:22.724Z] Peek phase started for game 1
[2025-03-21T16:42:22.725Z] Game state updated: State=PEEK_PHASE, Pot=0, CurrentBet=0, StateVersion=2
[2025-03-21T16:42:22.888Z] Betting closed for game 1
[2025-03-21T16:42:23.007Z] Betting open after peek phase start: false
[2025-03-21T16:42:23.287Z] Phase end time: 2025-03-21T16:44:51.000Z
[2025-03-21T16:42:23.287Z] Buffer end time: 2025-03-21T16:42:51.000Z
[2025-03-21T16:42:23.287Z] Waiting 28 seconds for buffer period to end...
[2025-03-21T16:42:23.287Z] Waiting for buffer period to end on TEN network...
[2025-03-21T16:42:53.295Z] Buffer period ended
[2025-03-21T16:42:53.297Z] 
----- PLAYERS PEEKING AT CARDS -----
[2025-03-21T16:42:53.578Z] Player 1 initial chip balance: 25
[2025-03-21T16:42:58.879Z] Player 1 (0x9Fde625ED8A6eC0f3cA393A62be34231a5c167F4) peeked at their card
[2025-03-21T16:42:58.879Z] Player action: peek, Amount: 5, Nonce: 1
[2025-03-21T16:42:58.924Z] Card for 0x9Fde625ED8A6eC0f3cA393A62be34231a5c167F4: 8 of Spades
[2025-03-21T16:42:59.159Z] Player 1 chip balance after peeking: 20
[2025-03-21T16:42:59.439Z] Player 2 initial chip balance: 25
[2025-03-21T16:43:02.839Z] Player 2 (0x0Fae37437c1347c23dc279b424663579d2df67df) peeked at their card
[2025-03-21T16:43:02.839Z] Player action: peek, Amount: 5, Nonce: 1
[2025-03-21T16:43:03.117Z] Player 2 chip balance after peeking: 20
[2025-03-21T16:43:03.118Z] 
----- PLAYER USING MONTY HALL OPTION -----
[2025-03-21T16:43:03.394Z] Player 3 initial chip balance: 25
[2025-03-21T16:43:06.916Z] Player 3 (0xd2e443F6CF19d5d359e82bbEea76e1133028fda5) used Monty Hall option
[2025-03-21T16:43:06.916Z] Player action: montyHall, Amount: 7, Nonce: 1
[2025-03-21T16:43:07.209Z] Player 3 chip balance after using Monty Hall: 18
[2025-03-21T16:43:10.855Z] Player 3 decided to swap their card
[2025-03-21T16:43:10.856Z] Player action: swapCard, Amount: 0, Nonce: 2
[2025-03-21T16:43:10.856Z] Player 4 (0x7B7057B07218fa9f357E39cb2fC2E723C2bfcf9F) chose not to peek or use Monty Hall
[2025-03-21T16:43:10.876Z] Monty Hall cards revealed to 0xd2e443F6CF19d5d359e82bbEea76e1133028fda5:
[2025-03-21T16:43:10.876Z] - 6 of Diamonds
[2025-03-21T16:43:10.876Z] - 6 of Clubs
[2025-03-21T16:43:11.137Z] 
----- PLAYER STATUS AFTER PEEK PHASE -----
[2025-03-21T16:43:11.412Z] Player 1 (0x9Fde625ED8A6eC0f3cA393A62be34231a5c167F4):
[2025-03-21T16:43:11.413Z]   Chip balance: 20
[2025-03-21T16:43:11.413Z]   Has peeked: true
[2025-03-21T16:43:11.413Z]   Used Monty Hall: false
[2025-03-21T16:43:11.413Z]   Action nonce: 1
[2025-03-21T16:43:11.692Z] Player 2 (0x0Fae37437c1347c23dc279b424663579d2df67df):
[2025-03-21T16:43:11.693Z]   Chip balance: 20
[2025-03-21T16:43:11.693Z]   Has peeked: true
[2025-03-21T16:43:11.693Z]   Used Monty Hall: false
[2025-03-21T16:43:11.693Z]   Action nonce: 1
[2025-03-21T16:43:11.979Z] Player 3 (0xd2e443F6CF19d5d359e82bbEea76e1133028fda5):
[2025-03-21T16:43:11.979Z]   Chip balance: 18
[2025-03-21T16:43:11.979Z]   Has peeked: false
[2025-03-21T16:43:11.979Z]   Used Monty Hall: true
[2025-03-21T16:43:11.979Z]   Action nonce: 2
[2025-03-21T16:43:12.258Z] Player 4 (0x7B7057B07218fa9f357E39cb2fC2E723C2bfcf9F):
[2025-03-21T16:43:12.258Z]   Chip balance: 25
[2025-03-21T16:43:12.258Z]   Has peeked: false
[2025-03-21T16:43:12.258Z]   Used Monty Hall: false
[2025-03-21T16:43:12.258Z]   Action nonce: 0
[2025-03-21T16:43:12.258Z] 
----- WAITING FOR PEEK PHASE TO END -----
[2025-03-21T16:43:12.538Z] Waiting 99 seconds for peek phase to end...
[2025-03-21T16:43:12.538Z] Waiting for peek phase to end on TEN network...
[2025-03-21T16:44:52.551Z] Peek phase ended
[2025-03-21T16:44:52.552Z] 
----- ENDING PEEK PHASE -----
[2025-03-21T16:44:53.654Z] endPeekPhase transaction submitted, waiting for confirmation...
[2025-03-21T16:44:54.752Z] endPeekPhase transaction confirmed!
[2025-03-21T16:44:54.752Z] Buffer period started before betting phase. Current state: PEEK_PHASE, Next state: BETTING
[2025-03-21T16:44:54.753Z] Betting phase started for game 1
[2025-03-21T16:44:54.753Z] Game state updated: State=BETTING, Pot=0, CurrentBet=0, StateVersion=3
[2025-03-21T16:44:55.027Z] Phase end time: 2025-03-21T16:50:23.000Z
[2025-03-21T16:44:55.028Z] Buffer end time: 2025-03-21T16:45:23.000Z
[2025-03-21T16:44:55.028Z] Waiting 28 seconds for buffer period to end...
[2025-03-21T16:44:55.028Z] Waiting for buffer period to end on TEN network...
[2025-03-21T16:45:25.037Z] Buffer period ended
[2025-03-21T16:45:25.037Z] 
----- PLAYERS PLACING BETS -----
[2025-03-21T16:45:30.732Z] Player 1 (0x9Fde625ED8A6eC0f3cA393A62be34231a5c167F4) bet 5 chips
[2025-03-21T16:45:31.008Z] Pot after bet 1: 5, Current bet: 5
[2025-03-21T16:45:34.727Z] Player 2 (0x0Fae37437c1347c23dc279b424663579d2df67df) bet 5 chips
[2025-03-21T16:45:34.999Z] Pot after bet 2: 10, Current bet: 5
[2025-03-21T16:45:38.733Z] Player 3 (0xd2e443F6CF19d5d359e82bbEea76e1133028fda5) bet 10 chips (raising to 10)
[2025-03-21T16:45:39.009Z] Pot after bet 3: 20, Current bet: 10
[2025-03-21T16:45:42.739Z] Player 1 (0x9Fde625ED8A6eC0f3cA393A62be34231a5c167F4) bet additional 5 chips (calling the raise)
[2025-03-21T16:45:43.013Z] Pot after bet 4: 25, Current bet: 10
[2025-03-21T16:45:46.735Z] Player 2 (0x0Fae37437c1347c23dc279b424663579d2df67df) bet additional 5 chips (calling the raise)
[2025-03-21T16:45:47.008Z] Pot after bet 5: 30, Current bet: 10
[2025-03-21T16:45:50.736Z] Player 4 (0x7B7057B07218fa9f357E39cb2fC2E723C2bfcf9F) folded
[2025-03-21T16:45:51.052Z] Active players after fold: 4
[2025-03-21T16:45:51.052Z] 
----- PLAYER STATUS AFTER BETTING -----
[2025-03-21T16:45:51.330Z] Player 1 (0x9Fde625ED8A6eC0f3cA393A62be34231a5c167F4):
[2025-03-21T16:45:51.331Z]   Chip balance: 10
[2025-03-21T16:45:51.331Z]   Current bet: 10
[2025-03-21T16:45:51.331Z]   Has folded: false
[2025-03-21T16:45:51.331Z]   Action nonce: 3
[2025-03-21T16:45:51.624Z] Player 2 (0x0Fae37437c1347c23dc279b424663579d2df67df):
[2025-03-21T16:45:51.624Z]   Chip balance: 10
[2025-03-21T16:45:51.624Z]   Current bet: 10
[2025-03-21T16:45:51.624Z]   Has folded: false
[2025-03-21T16:45:51.624Z]   Action nonce: 3
[2025-03-21T16:45:51.898Z] Player 3 (0xd2e443F6CF19d5d359e82bbEea76e1133028fda5):
[2025-03-21T16:45:51.898Z]   Chip balance: 8
[2025-03-21T16:45:51.898Z]   Current bet: 10
[2025-03-21T16:45:51.898Z]   Has folded: false
[2025-03-21T16:45:51.898Z]   Action nonce: 3
[2025-03-21T16:45:52.173Z] Player 4 (0x7B7057B07218fa9f357E39cb2fC2E723C2bfcf9F):
[2025-03-21T16:45:52.174Z]   Chip balance: 25
[2025-03-21T16:45:52.174Z]   Current bet: 0
[2025-03-21T16:45:52.174Z]   Has folded: true
[2025-03-21T16:45:52.174Z]   Action nonce: 1
[2025-03-21T16:45:52.452Z] Have all active players matched the current bet? false
[2025-03-21T16:45:52.453Z] 
----- WAITING FOR BETTING PHASE TO END -----
[2025-03-21T16:45:52.729Z] Betting phase ends in 271 seconds at 2025-03-21T16:50:23.000Z
[2025-03-21T16:45:52.730Z] All players have matched bets, manually ending betting phase...
[2025-03-21T16:45:52.730Z] 
----- CHECKING GAME STATE BEFORE ENDING BETTING PHASE -----
[2025-03-21T16:45:52.999Z] Current game state: BETTING
[2025-03-21T16:45:52.999Z] Phase end time: 2025-03-21T16:50:23.000Z
[2025-03-21T16:45:52.999Z] Current time: 2025-03-21T16:45:52.999Z
[2025-03-21T16:45:52.999Z] Buffer end time: 2025-03-21T16:45:23.000Z
[2025-03-21T16:45:52.999Z] Is in buffer period: false
[2025-03-21T16:45:52.999Z] Is phase ended: false
[2025-03-21T16:45:53.275Z] Is caller (0x1dA9aCB41763f97F744Da547F2d103042e8Ab239) a keeper: true
[2025-03-21T16:45:53.276Z] Betting phase hasn't ended yet. Waiting 270 seconds...
[2025-03-21T16:45:53.276Z] Waiting for phase to end on TEN network...
[2025-03-21T16:46:03.279Z] 260 seconds remaining until phase ends
[2025-03-21T16:46:13.283Z] 250 seconds remaining until phase ends
[2025-03-21T16:46:23.285Z] 240 seconds remaining until phase ends
[2025-03-21T16:46:33.288Z] 230 seconds remaining until phase ends
[2025-03-21T16:46:43.293Z] 220 seconds remaining until phase ends
[2025-03-21T16:46:53.297Z] 210 seconds remaining until phase ends
[2025-03-21T16:47:03.301Z] 200 seconds remaining until phase ends
[2025-03-21T16:47:13.302Z] 190 seconds remaining until phase ends
[2025-03-21T16:47:23.306Z] 180 seconds remaining until phase ends
[2025-03-21T16:47:33.310Z] 170 seconds remaining until phase ends
[2025-03-21T16:47:43.314Z] 160 seconds remaining until phase ends
[2025-03-21T16:47:53.318Z] 150 seconds remaining until phase ends
[2025-03-21T16:48:03.322Z] 140 seconds remaining until phase ends
[2025-03-21T16:48:13.325Z] 130 seconds remaining until phase ends
[2025-03-21T16:48:23.328Z] 120 seconds remaining until phase ends
[2025-03-21T16:48:33.352Z] 110 seconds remaining until phase ends
[2025-03-21T16:48:43.361Z] 100 seconds remaining until phase ends
[2025-03-21T16:48:53.366Z] 90 seconds remaining until phase ends
[2025-03-21T16:49:03.370Z] 80 seconds remaining until phase ends
[2025-03-21T16:49:13.373Z] 70 seconds remaining until phase ends
[2025-03-21T16:49:23.378Z] 60 seconds remaining until phase ends
[2025-03-21T16:49:33.382Z] 50 seconds remaining until phase ends
[2025-03-21T16:49:43.386Z] 40 seconds remaining until phase ends
[2025-03-21T16:49:53.390Z] 30 seconds remaining until phase ends
[2025-03-21T16:50:03.394Z] 20 seconds remaining until phase ends
[2025-03-21T16:50:13.399Z] 10 seconds remaining until phase ends
[2025-03-21T16:50:23.404Z] Betting phase has now ended
[2025-03-21T16:50:23.698Z] Game state after waiting: BETTING
[2025-03-21T16:50:23.698Z] Updated phase end time: 2025-03-21T16:50:23.000Z
[2025-03-21T16:50:23.698Z] Updated buffer end time: 2025-03-21T16:45:23.000Z
[2025-03-21T16:50:23.698Z] 
----- ENDING BETTING PHASE -----
[2025-03-21T16:50:24.795Z] endBettingPhase transaction submitted, waiting for confirmation...
[2025-03-21T16:50:26.862Z] endBettingPhase transaction confirmed!
[2025-03-21T16:50:26.863Z] Showdown phase started
[2025-03-21T16:50:26.863Z] Game ended event not found in transaction logs - waiting for async event
[2025-03-21T16:50:27.180Z] 
===== GAME ENDED EVENT CAPTURED =====
[2025-03-21T16:50:27.180Z] Winner: 0x0Fae37437c1347c23dc279b424663579d2df67df
[2025-03-21T16:50:27.180Z] Pot Amount: 30 chips
[2025-03-21T16:50:27.180Z] Player 2 (0x0Fae37437c1347c23dc279b424663579d2df67df) won the game!
[2025-03-21T16:50:27.180Z] Async winner detection: 0x0Fae37437c1347c23dc279b424663579d2df67df
[2025-03-21T16:50:27.180Z] Final game state: State=SHOWDOWN, Pot=30, CurrentBet=10, StateVersion=4
[2025-03-21T16:50:27.180Z] 
----- REVEALED CARDS DURING SHOWDOWN -----
[2025-03-21T16:50:27.467Z] Error getting revealed cards: cardValues[i].toNumber is not a function
[2025-03-21T16:50:27.467Z] 
----- FINAL GAME STATE -----
[2025-03-21T16:50:27.746Z] Game state: ENDED
[2025-03-21T16:50:27.747Z] Pot amount: 0
[2025-03-21T16:50:27.747Z] State version: 5
[2025-03-21T16:50:27.747Z] Is cleaned up: false
[2025-03-21T16:50:27.747Z] 
----- FINAL PLAYER BALANCES -----
[2025-03-21T16:50:28.025Z] Player 1 (0x9Fde625ED8A6eC0f3cA393A62be34231a5c167F4):
[2025-03-21T16:50:28.025Z]   Initial balance: 25
[2025-03-21T16:50:28.025Z]   Final balance: 10
[2025-03-21T16:50:28.026Z]   Difference: -15
[2025-03-21T16:50:28.306Z] Player 2 (0x0Fae37437c1347c23dc279b424663579d2df67df):
[2025-03-21T16:50:28.306Z]   Initial balance: 25
[2025-03-21T16:50:28.306Z]   Final balance: 40
[2025-03-21T16:50:28.306Z]   Difference: 15
[2025-03-21T16:50:28.306Z] *** Player 2 gained 15 chips - WINNER! ***
[2025-03-21T16:50:28.586Z] Player 3 (0xd2e443F6CF19d5d359e82bbEea76e1133028fda5):
[2025-03-21T16:50:28.586Z]   Initial balance: 25
[2025-03-21T16:50:28.586Z]   Final balance: 8
[2025-03-21T16:50:28.586Z]   Difference: -17
[2025-03-21T16:50:28.868Z] Player 4 (0x7B7057B07218fa9f357E39cb2fC2E723C2bfcf9F):
[2025-03-21T16:50:28.868Z]   Initial balance: 25
[2025-03-21T16:50:28.869Z]   Final balance: 25
[2025-03-21T16:50:28.869Z]   Difference: 0
[2025-03-21T16:50:28.869Z] 
----- SPECTATOR BETTING RESULTS -----
[2025-03-21T16:50:29.173Z] Betting results processed: true
[2025-03-21T16:50:29.174Z] Game winner: 0x0Fae37437c1347c23dc279b424663579d2df67df
[2025-03-21T16:50:29.175Z] Total betting pool: 0.03 ETH
[2025-03-21T16:50:29.175Z] 
----- SPECTATOR WINNINGS CHECK -----
[2025-03-21T16:50:29.728Z] Spectator 1 (0x1dA9aCB41763f97F744Da547F2d103042e8Ab239):
[2025-03-21T16:50:29.728Z]   Bet on: 0x9Fde625ED8A6eC0f3cA393A62be34231a5c167F4
[2025-03-21T16:50:29.729Z]   Bet amount: 0.01 ETH
[2025-03-21T16:50:29.729Z]   Has winnings: false
[2025-03-21T16:50:30.285Z] Spectator 2 (0x52731AEDA26AB8D159226C51180a7542a4287500):
[2025-03-21T16:50:30.285Z]   Bet on: 0x0Fae37437c1347c23dc279b424663579d2df67df
[2025-03-21T16:50:30.286Z]   Bet amount: 0.01 ETH
[2025-03-21T16:50:30.286Z]   Has winnings: true
[2025-03-21T16:50:30.287Z]   Winnings amount: 0.03 ETH
[2025-03-21T16:50:30.844Z] Error processing spectator betting results: missing revert data in call exception; Transaction reverted without a reason string [ See: https://links.ethers.org/v5-errors-CALL_EXCEPTION ] (data="0x", transaction={"from":"0x1dA9aCB41763f97F744Da547F2d103042e8Ab239","to":"0x101B5a88F51347b536AeEabeB9a65B9720c0Ee90","data":"0x0e6c893a000000000000000000000000000000000000000000000000000000000000000100000000000000000000000045ab32ec402d51096398aa4e6a7af03180e50bd0","accessList":null}, error={"name":"ProviderError","_stack":"ProviderError: rate limit exceeded\n    at HttpProvider.request (/Users/0xjba/agent-arena/node_modules/hardhat/src/internal/core/providers/http.ts:107:21)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at EthersProviderWrapper.send (/Users/0xjba/agent-arena/node_modules/@nomiclabs/hardhat-ethers/src/internal/ethers-provider-wrapper.ts:13:20)","code":-32000,"_isProviderError":true}, code=CALL_EXCEPTION, version=providers/5.7.2)
[2025-03-21T16:50:30.845Z] 
----- CLEANING UP THE GAME -----
[2025-03-21T16:50:30.901Z] Betting results processed for game 1, winner: 0x0Fae37437c1347c23dc279b424663579d2df67df
[2025-03-21T16:50:32.228Z] Game cleaned up successfully
[2025-03-21T16:50:32.507Z] Game is cleaned up: true
[2025-03-21T16:50:32.507Z] Game is no longer spectatable
[2025-03-21T16:50:32.507Z] Final state update: State=ENDED, StateVersion=6
[2025-03-21T16:50:32.507Z] 
===== ONE CARD POKER WITH MONTY HALL AND SPECTATOR BETTING TEST COMPLETED =====
[2025-03-21T16:59:04.229Z] 
===== SETTING UP TEST ENVIRONMENT =====
[2025-03-21T16:59:04.264Z] Wallet setup complete.
[2025-03-21T16:59:04.265Z] Owner address: 0x1dA9aCB41763f97F744Da547F2d103042e8Ab239
[2025-03-21T16:59:04.265Z] Player 1 address: 0x9Fde625ED8A6eC0f3cA393A62be34231a5c167F4
[2025-03-21T16:59:04.265Z] Player 2 address: 0x0Fae37437c1347c23dc279b424663579d2df67df
[2025-03-21T16:59:04.265Z] Player 3 address: 0xd2e443F6CF19d5d359e82bbEea76e1133028fda5
[2025-03-21T16:59:04.265Z] Player 4 address: 0x7B7057B07218fa9f357E39cb2fC2E723C2bfcf9F
[2025-03-21T16:59:04.265Z] Spectator 1 address: 0x1dA9aCB41763f97F744Da547F2d103042e8Ab239
[2025-03-21T16:59:04.265Z] Spectator 2 address: 0x52731AEDA26AB8D159226C51180a7542a4287500
[2025-03-21T16:59:04.265Z] Spectator 3 address: 0x45ab32ec402D51096398aA4e6a7aF03180E50bD0
[2025-03-21T16:59:04.265Z] Keeper address: 0x1dA9aCB41763f97F744Da547F2d103042e8Ab239
[2025-03-21T16:59:04.265Z] 
----- CHECKING WALLET BALANCES -----
[2025-03-21T16:59:05.446Z] Address 0x1dA9aCB41763f97F744Da547F2d103042e8Ab239 has 0.53534623934 ETH
[2025-03-21T16:59:05.725Z] Address 0x9Fde625ED8A6eC0f3cA393A62be34231a5c167F4 has 0.9868172107 ETH
[2025-03-21T16:59:06.000Z] Address 0x0Fae37437c1347c23dc279b424663579d2df67df has 0.7395189161 ETH
[2025-03-21T16:59:06.346Z] Address 0xd2e443F6CF19d5d359e82bbEea76e1133028fda5 has 0.4886735946 ETH
[2025-03-21T16:59:06.625Z] Address 0x7B7057B07218fa9f357E39cb2fC2E723C2bfcf9F has 0.7397055004 ETH
[2025-03-21T16:59:06.900Z] Address 0x1dA9aCB41763f97F744Da547F2d103042e8Ab239 has 0.53534623934 ETH
[2025-03-21T16:59:07.183Z] Address 0x52731AEDA26AB8D159226C51180a7542a4287500 has 0.7262715757 ETH
[2025-03-21T16:59:07.458Z] Address 0x45ab32ec402D51096398aA4e6a7aF03180E50bD0 has 0.6796306789 ETH
[2025-03-21T16:59:07.741Z] Address 0x1dA9aCB41763f97F744Da547F2d103042e8Ab239 has 0.53534623934 ETH
[2025-03-21T16:59:07.741Z] 
----- DEPLOYING CONTRACTS -----
[2025-03-21T16:59:07.741Z] Deploying CardLibrary...
[2025-03-21T16:59:14.163Z] CardLibrary deployed at: 0x48c45Ff596e4FF1511A1743367c616D32d8fdbf4
[2025-03-21T16:59:14.163Z] Deploying GameLibrary...
[2025-03-21T16:59:20.369Z] GameLibrary deployed at: 0xd59387847b2D08a04fFD12371Ac4f05c69eF10Df
[2025-03-21T16:59:20.369Z] Deploying OneCard main contract...
[2025-03-21T16:59:26.910Z] OneCard contract deployed at: 0xb54676ce00683087Fd493788092D47A4B7CE623B
[2025-03-21T16:59:26.911Z] Deploying PokerSpectatorView contract...
[2025-03-21T16:59:33.148Z] PokerSpectatorView contract deployed at: 0xfB97965a1F11BAC27a9e2D4Be57624048e2D3fB9
[2025-03-21T16:59:33.148Z] Deploying SpectatorBetting contract...
[2025-03-21T16:59:35.367Z] SpectatorBetting contract deployed at: 0x3b15393Dd5Efcb9c4455628CF4eC527c4F257dd4
[2025-03-21T16:59:35.367Z] Setting spectator betting contract in OneCard contract...
[2025-03-21T16:59:41.247Z] SpectatorBetting contract set in OneCard
[2025-03-21T16:59:41.248Z] 
Add these to your .env file for future use:
[2025-03-21T16:59:41.248Z] POKER_CONTRACT_ADDRESS=0xb54676ce00683087Fd493788092D47A4B7CE623B
[2025-03-21T16:59:41.248Z] SPECTATOR_CONTRACT_ADDRESS=0xfB97965a1F11BAC27a9e2D4Be57624048e2D3fB9
[2025-03-21T16:59:41.248Z] SPECTATOR_BETTING_ADDRESS=0x3b15393Dd5Efcb9c4455628CF4eC527c4F257dd4
[2025-03-21T16:59:41.253Z] 
===== STARTING ONE CARD POKER WITH MONTY HALL AND SPECTATOR BETTING TEST =====
[2025-03-21T16:59:41.253Z] 
----- ADDING PLAYERS TO WHITELIST -----
[2025-03-21T16:59:47.373Z] Added 4 players to whitelist
[2025-03-21T16:59:47.373Z] 
----- CREATING A NEW GAME -----
[2025-03-21T16:59:49.487Z] Created Game with ID: 1
[2025-03-21T16:59:49.827Z] Initial players in game: 5
[2025-03-21T16:59:49.827Z] Player 1: 0x1dA9aCB41763f97F744Da547F2d103042e8Ab239
[2025-03-21T16:59:49.827Z] Player 2: 0x9Fde625ED8A6eC0f3cA393A62be34231a5c167F4
[2025-03-21T16:59:49.827Z] Player 3: 0x0Fae37437c1347c23dc279b424663579d2df67df
[2025-03-21T16:59:49.827Z] Player 4: 0xd2e443F6CF19d5d359e82bbEea76e1133028fda5
[2025-03-21T16:59:49.827Z] Player 5: 0x7B7057B07218fa9f357E39cb2fC2E723C2bfcf9F
[2025-03-21T16:59:49.827Z] 
----- VERIFYING GAME INFO BEFORE SPECTATOR BETTING -----
[2025-03-21T16:59:50.009Z] Betting opened for game 1
[2025-03-21T16:59:50.102Z] Game state: REGISTRATION
[2025-03-21T16:59:50.102Z] Player count: 5
[2025-03-21T16:59:50.102Z] Active count: 5
[2025-03-21T16:59:50.102Z] Game keeper: 0x1dA9aCB41763f97F744Da547F2d103042e8Ab239
[2025-03-21T16:59:50.102Z] State version: 1
[2025-03-21T16:59:50.102Z] Is cleaned up: false
[2025-03-21T16:59:50.102Z] 
----- CHECKING IF BETTING IS OPEN -----
[2025-03-21T16:59:50.452Z] Betting open: true
[2025-03-21T16:59:50.452Z] Results processed: false
[2025-03-21T16:59:50.453Z] Total bet amount: 0.0 ETH
[2025-03-21T16:59:50.453Z] 
----- SPECTATORS PLACING BETS -----
[2025-03-21T16:59:54.005Z] Spectator 1 (0x1dA9aCB41763f97F744Da547F2d103042e8Ab239) bet 0.01 ETH on Player 1 (0x9Fde625ED8A6eC0f3cA393A62be34231a5c167F4)
[2025-03-21T16:59:54.083Z] Spectator 0x1dA9aCB41763f97F744Da547F2d103042e8Ab239 placed a bet of 0.01 ETH on player 0x9Fde625ED8A6eC0f3cA393A62be34231a5c167F4
[2025-03-21T16:59:54.325Z] Verified bet - Player: 0x9Fde625ED8A6eC0f3cA393A62be34231a5c167F4, Amount: 0.01 ETH, Claimed: false
[2025-03-21T16:59:58.633Z] Spectator 2 (0x52731AEDA26AB8D159226C51180a7542a4287500) bet 0.01 ETH on Player 2 (0x0Fae37437c1347c23dc279b424663579d2df67df)
[2025-03-21T16:59:58.638Z] Spectator 0x52731AEDA26AB8D159226C51180a7542a4287500 placed a bet of 0.01 ETH on player 0x0Fae37437c1347c23dc279b424663579d2df67df
[2025-03-21T16:59:59.143Z] Verified bet - Player: 0x0Fae37437c1347c23dc279b424663579d2df67df, Amount: 0.01 ETH, Claimed: false
[2025-03-21T17:00:02.004Z] Spectator 3 (0x45ab32ec402D51096398aA4e6a7aF03180E50bD0) bet 0.01 ETH on Player 3 (0xd2e443F6CF19d5d359e82bbEea76e1133028fda5)
[2025-03-21T17:00:02.302Z] Verified bet - Player: 0xd2e443F6CF19d5d359e82bbEea76e1133028fda5, Amount: 0.01 ETH, Claimed: false
[2025-03-21T17:00:02.302Z] 
----- CHECKING TOTAL BETS ON EACH PLAYER -----
[2025-03-21T17:00:02.611Z] Total bet on Player 1 (0x9Fde625ED8A6eC0f3cA393A62be34231a5c167F4): 0.01 ETH
[2025-03-21T17:00:02.914Z] Total bet on Player 2 (0x0Fae37437c1347c23dc279b424663579d2df67df): 0.01 ETH
[2025-03-21T17:00:03.210Z] Total bet on Player 3 (0xd2e443F6CF19d5d359e82bbEea76e1133028fda5): 0.01 ETH
[2025-03-21T17:00:03.546Z] Total bet on Player 4 (0x7B7057B07218fa9f357E39cb2fC2E723C2bfcf9F): 0.0 ETH
[2025-03-21T17:00:03.825Z] Total betting pool: 0.03 ETH
[2025-03-21T17:00:03.825Z] 
----- STARTING PEEK PHASE -----
[2025-03-21T17:00:04.970Z] startPeekPhase transaction submitted, waiting for confirmation...
[2025-03-21T17:00:05.261Z] startPeekPhase transaction confirmed!
[2025-03-21T17:00:05.261Z] Buffer period started before peek phase. Current state: REGISTRATION, Next state: PEEK_PHASE
[2025-03-21T17:00:05.261Z] Peek phase started for game 1
[2025-03-21T17:00:05.261Z] Game state updated: State=PEEK_PHASE, Pot=0, CurrentBet=0, StateVersion=2
[2025-03-21T17:00:05.540Z] Betting open after peek phase start: false
[2025-03-21T17:00:05.828Z] Phase end time: 2025-03-21T17:02:34.000Z
[2025-03-21T17:00:05.829Z] Buffer end time: 2025-03-21T17:00:34.000Z
[2025-03-21T17:00:05.829Z] Waiting 29 seconds for buffer period to end...
[2025-03-21T17:00:05.829Z] Waiting for buffer period to end on TEN network...
[2025-03-21T17:00:06.002Z] Spectator 0x45ab32ec402D51096398aA4e6a7aF03180E50bD0 placed a bet of 0.01 ETH on player 0xd2e443F6CF19d5d359e82bbEea76e1133028fda5
[2025-03-21T17:00:06.002Z] Betting closed for game 1
[2025-03-21T17:00:35.835Z] Buffer period ended
[2025-03-21T17:00:35.836Z] 
----- PLAYERS PEEKING AT CARDS -----
[2025-03-21T17:00:36.116Z] Player 1 initial chip balance: 25
[2025-03-21T17:00:42.100Z] Player 1 (0x9Fde625ED8A6eC0f3cA393A62be34231a5c167F4) peeked at their card
[2025-03-21T17:00:42.100Z] Player action: peek, Amount: 5, Nonce: 1
[2025-03-21T17:00:42.127Z] Card for 0x9Fde625ED8A6eC0f3cA393A62be34231a5c167F4: Queen of Spades
[2025-03-21T17:00:42.393Z] Player 1 chip balance after peeking: 20
[2025-03-21T17:00:42.724Z] Player 2 initial chip balance: 25
[2025-03-21T17:00:45.961Z] Player 2 (0x0Fae37437c1347c23dc279b424663579d2df67df) peeked at their card
[2025-03-21T17:00:45.961Z] Player action: peek, Amount: 5, Nonce: 1
[2025-03-21T17:00:46.090Z] Card for 0x0Fae37437c1347c23dc279b424663579d2df67df: 9 of Spades
[2025-03-21T17:00:46.236Z] Player 2 chip balance after peeking: 20
[2025-03-21T17:00:46.236Z] 
----- PLAYER USING MONTY HALL OPTION -----
[2025-03-21T17:00:46.525Z] Player 3 initial chip balance: 25
[2025-03-21T17:00:49.976Z] Player 3 (0xd2e443F6CF19d5d359e82bbEea76e1133028fda5) used Monty Hall option
[2025-03-21T17:00:49.976Z] Player action: montyHall, Amount: 7, Nonce: 1
[2025-03-21T17:00:50.085Z] Monty Hall cards revealed to 0xd2e443F6CF19d5d359e82bbEea76e1133028fda5:
[2025-03-21T17:00:50.085Z] - 6 of Diamonds
[2025-03-21T17:00:50.085Z] - 4 of Spades
[2025-03-21T17:00:50.273Z] Player 3 chip balance after using Monty Hall: 18
[2025-03-21T17:00:53.990Z] Player 3 decided to swap their card
[2025-03-21T17:00:53.990Z] Player action: swapCard, Amount: 0, Nonce: 2
[2025-03-21T17:00:53.990Z] Player 4 (0x7B7057B07218fa9f357E39cb2fC2E723C2bfcf9F) chose not to peek or use Monty Hall
[2025-03-21T17:00:54.107Z] 0xd2e443F6CF19d5d359e82bbEea76e1133028fda5 swapped 8 of Diamonds for 9 of Clubs
[2025-03-21T17:00:54.265Z] 
----- PLAYER STATUS AFTER PEEK PHASE -----
[2025-03-21T17:00:54.563Z] Player 1 (0x9Fde625ED8A6eC0f3cA393A62be34231a5c167F4):
[2025-03-21T17:00:54.563Z]   Chip balance: 20
[2025-03-21T17:00:54.563Z]   Has peeked: true
[2025-03-21T17:00:54.563Z]   Used Monty Hall: false
[2025-03-21T17:00:54.563Z]   Action nonce: 1
[2025-03-21T17:00:54.879Z] Player 2 (0x0Fae37437c1347c23dc279b424663579d2df67df):
[2025-03-21T17:00:54.879Z]   Chip balance: 20
[2025-03-21T17:00:54.879Z]   Has peeked: true
[2025-03-21T17:00:54.879Z]   Used Monty Hall: false
[2025-03-21T17:00:54.879Z]   Action nonce: 1
[2025-03-21T17:00:55.163Z] Player 3 (0xd2e443F6CF19d5d359e82bbEea76e1133028fda5):
[2025-03-21T17:00:55.164Z]   Chip balance: 18
[2025-03-21T17:00:55.164Z]   Has peeked: false
[2025-03-21T17:00:55.164Z]   Used Monty Hall: true
[2025-03-21T17:00:55.164Z]   Action nonce: 2
[2025-03-21T17:00:55.498Z] Player 4 (0x7B7057B07218fa9f357E39cb2fC2E723C2bfcf9F):
[2025-03-21T17:00:55.498Z]   Chip balance: 25
[2025-03-21T17:00:55.498Z]   Has peeked: false
[2025-03-21T17:00:55.498Z]   Used Monty Hall: false
[2025-03-21T17:00:55.498Z]   Action nonce: 0
[2025-03-21T17:00:55.499Z] 
----- WAITING FOR PEEK PHASE TO END -----
[2025-03-21T17:00:55.778Z] Waiting 99 seconds for peek phase to end...
[2025-03-21T17:00:55.778Z] Waiting for peek phase to end on TEN network...
[2025-03-21T17:02:35.788Z] Peek phase ended
[2025-03-21T17:02:35.789Z] 
----- ENDING PEEK PHASE -----
[2025-03-21T17:02:36.926Z] endPeekPhase transaction submitted, waiting for confirmation...
[2025-03-21T17:02:37.952Z] endPeekPhase transaction confirmed!
[2025-03-21T17:02:37.953Z] Buffer period started before betting phase. Current state: PEEK_PHASE, Next state: BETTING
[2025-03-21T17:02:37.953Z] Betting phase started for game 1
[2025-03-21T17:02:37.953Z] Game state updated: State=BETTING, Pot=0, CurrentBet=0, StateVersion=3
[2025-03-21T17:02:38.239Z] Phase end time: 2025-03-21T17:08:06.000Z
[2025-03-21T17:02:38.239Z] Buffer end time: 2025-03-21T17:03:06.000Z
[2025-03-21T17:02:38.239Z] Waiting 28 seconds for buffer period to end...
[2025-03-21T17:02:38.239Z] Waiting for buffer period to end on TEN network...
[2025-03-21T17:03:08.249Z] Buffer period ended
[2025-03-21T17:03:08.249Z] 
----- PLAYERS PLACING BETS -----
[2025-03-21T17:03:14.137Z] Player 1 (0x9Fde625ED8A6eC0f3cA393A62be34231a5c167F4) bet 5 chips
[2025-03-21T17:03:14.435Z] Pot after bet 1: 5, Current bet: 5
[2025-03-21T17:03:17.957Z] Player 2 (0x0Fae37437c1347c23dc279b424663579d2df67df) bet 5 chips
[2025-03-21T17:03:17.958Z] Player action: bet, Amount: 5, Nonce: 2
[2025-03-21T17:03:18.236Z] Pot after bet 2: 10, Current bet: 5
[2025-03-21T17:03:21.967Z] Player 3 (0xd2e443F6CF19d5d359e82bbEea76e1133028fda5) bet 10 chips (raising to 10)
[2025-03-21T17:03:22.248Z] Pot after bet 3: 20, Current bet: 10
[2025-03-21T17:03:25.962Z] Player 1 (0x9Fde625ED8A6eC0f3cA393A62be34231a5c167F4) bet additional 5 chips (calling the raise)
[2025-03-21T17:03:26.255Z] Pot after bet 4: 25, Current bet: 10
[2025-03-21T17:03:29.962Z] Player 2 (0x0Fae37437c1347c23dc279b424663579d2df67df) bet additional 5 chips (calling the raise)
[2025-03-21T17:03:29.963Z] Player action: bet, Amount: 5, Nonce: 3
[2025-03-21T17:03:30.257Z] Pot after bet 5: 30, Current bet: 10
[2025-03-21T17:03:34.007Z] Player 4 (0x7B7057B07218fa9f357E39cb2fC2E723C2bfcf9F) folded
[2025-03-21T17:03:34.329Z] Active players after fold: 4
[2025-03-21T17:03:34.329Z] 
----- PLAYER STATUS AFTER BETTING -----
[2025-03-21T17:03:34.630Z] Player 1 (0x9Fde625ED8A6eC0f3cA393A62be34231a5c167F4):
[2025-03-21T17:03:34.631Z]   Chip balance: 10
[2025-03-21T17:03:34.631Z]   Current bet: 10
[2025-03-21T17:03:34.631Z]   Has folded: false
[2025-03-21T17:03:34.631Z]   Action nonce: 3
[2025-03-21T17:03:34.915Z] Player 2 (0x0Fae37437c1347c23dc279b424663579d2df67df):
[2025-03-21T17:03:34.915Z]   Chip balance: 10
[2025-03-21T17:03:34.915Z]   Current bet: 10
[2025-03-21T17:03:34.916Z]   Has folded: false
[2025-03-21T17:03:34.916Z]   Action nonce: 3
[2025-03-21T17:03:35.194Z] Player 3 (0xd2e443F6CF19d5d359e82bbEea76e1133028fda5):
[2025-03-21T17:03:35.194Z]   Chip balance: 8
[2025-03-21T17:03:35.194Z]   Current bet: 10
[2025-03-21T17:03:35.194Z]   Has folded: false
[2025-03-21T17:03:35.194Z]   Action nonce: 3
[2025-03-21T17:03:35.493Z] Player 4 (0x7B7057B07218fa9f357E39cb2fC2E723C2bfcf9F):
[2025-03-21T17:03:35.493Z]   Chip balance: 25
[2025-03-21T17:03:35.494Z]   Current bet: 0
[2025-03-21T17:03:35.494Z]   Has folded: true
[2025-03-21T17:03:35.494Z]   Action nonce: 1
[2025-03-21T17:03:35.781Z] Have all active players matched the current bet? false
[2025-03-21T17:03:35.782Z] 
----- WAITING FOR BETTING PHASE TO END -----
[2025-03-21T17:03:36.076Z] Betting phase ends in 270 seconds at 2025-03-21T17:08:06.000Z
[2025-03-21T17:03:36.076Z] All players have matched bets, manually ending betting phase...
[2025-03-21T17:03:36.076Z] 
----- CHECKING GAME STATE BEFORE ENDING BETTING PHASE -----
[2025-03-21T17:03:36.355Z] Current game state: BETTING
[2025-03-21T17:03:36.356Z] Phase end time: 2025-03-21T17:08:06.000Z
[2025-03-21T17:03:36.356Z] Current time: 2025-03-21T17:03:36.356Z
[2025-03-21T17:03:36.356Z] Buffer end time: 2025-03-21T17:03:06.000Z
[2025-03-21T17:03:36.356Z] Is in buffer period: false
[2025-03-21T17:03:36.356Z] Is phase ended: false
[2025-03-21T17:03:36.660Z] Is caller (0x1dA9aCB41763f97F744Da547F2d103042e8Ab239) a keeper: true
[2025-03-21T17:03:36.660Z] Betting phase hasn't ended yet. Waiting 270 seconds...
[2025-03-21T17:03:36.660Z] Waiting for phase to end on TEN network...
[2025-03-21T17:03:46.663Z] 260 seconds remaining until phase ends
[2025-03-21T17:03:56.664Z] 250 seconds remaining until phase ends
[2025-03-21T17:04:06.666Z] 240 seconds remaining until phase ends
[2025-03-21T17:04:16.669Z] 230 seconds remaining until phase ends
[2025-03-21T17:04:26.672Z] 220 seconds remaining until phase ends
[2025-03-21T17:04:36.676Z] 210 seconds remaining until phase ends
[2025-03-21T17:04:46.677Z] 200 seconds remaining until phase ends
[2025-03-21T17:04:56.680Z] 190 seconds remaining until phase ends
[2025-03-21T17:05:06.684Z] 180 seconds remaining until phase ends
[2025-03-21T17:05:16.687Z] 170 seconds remaining until phase ends
[2025-03-21T17:05:26.690Z] 160 seconds remaining until phase ends
[2025-03-21T17:05:36.694Z] 150 seconds remaining until phase ends
[2025-03-21T17:05:46.697Z] 140 seconds remaining until phase ends
[2025-03-21T17:05:56.699Z] 130 seconds remaining until phase ends
[2025-03-21T17:06:06.702Z] 120 seconds remaining until phase ends
[2025-03-21T17:06:16.704Z] 110 seconds remaining until phase ends
[2025-03-21T17:06:26.707Z] 100 seconds remaining until phase ends
[2025-03-21T17:06:36.708Z] 90 seconds remaining until phase ends
[2025-03-21T17:06:46.711Z] 80 seconds remaining until phase ends
[2025-03-21T17:06:56.713Z] 70 seconds remaining until phase ends
[2025-03-21T17:07:06.716Z] 60 seconds remaining until phase ends
[2025-03-21T17:07:16.719Z] 50 seconds remaining until phase ends
[2025-03-21T17:07:26.724Z] 40 seconds remaining until phase ends
[2025-03-21T17:07:36.729Z] 30 seconds remaining until phase ends
[2025-03-21T17:07:46.732Z] 20 seconds remaining until phase ends
[2025-03-21T17:07:56.736Z] 10 seconds remaining until phase ends
[2025-03-21T17:08:06.738Z] Betting phase has now ended
[2025-03-21T17:08:07.023Z] Game state after waiting: BETTING
[2025-03-21T17:08:07.024Z] Updated phase end time: 2025-03-21T17:08:06.000Z
[2025-03-21T17:08:07.024Z] Updated buffer end time: 2025-03-21T17:03:06.000Z
[2025-03-21T17:08:07.024Z] 
----- ENDING BETTING PHASE -----
[2025-03-21T17:08:08.146Z] endBettingPhase transaction submitted, waiting for confirmation...
[2025-03-21T17:08:10.046Z] endBettingPhase transaction confirmed!
[2025-03-21T17:08:10.046Z] Showdown phase started
[2025-03-21T17:08:10.047Z] Game ended event not found in transaction logs - waiting for async event
[2025-03-21T17:08:10.101Z] Card for 0x1dA9aCB41763f97F744Da547F2d103042e8Ab239: 9 of Diamonds
[2025-03-21T17:08:10.101Z] Card for 0x9Fde625ED8A6eC0f3cA393A62be34231a5c167F4: Queen of Spades
[2025-03-21T17:08:10.101Z] Card for 0x0Fae37437c1347c23dc279b424663579d2df67df: 9 of Spades
[2025-03-21T17:08:10.101Z] Card for 0xd2e443F6CF19d5d359e82bbEea76e1133028fda5: 9 of Clubs
[2025-03-21T17:08:10.104Z] Betting results processed for game 1, winner: 0x9Fde625ED8A6eC0f3cA393A62be34231a5c167F4
[2025-03-21T17:08:10.374Z] 
===== GAME ENDED EVENT CAPTURED =====
[2025-03-21T17:08:10.374Z] Winner: 0x9Fde625ED8A6eC0f3cA393A62be34231a5c167F4
[2025-03-21T17:08:10.374Z] Pot Amount: 30 chips
[2025-03-21T17:08:10.375Z] Player 1 (0x9Fde625ED8A6eC0f3cA393A62be34231a5c167F4) won the game!
[2025-03-21T17:08:10.375Z] Async winner detection: 0x9Fde625ED8A6eC0f3cA393A62be34231a5c167F4
[2025-03-21T17:08:10.375Z] Final game state: State=SHOWDOWN, Pot=30, CurrentBet=10, StateVersion=4
[2025-03-21T17:08:10.375Z] 
----- REVEALED CARDS DURING SHOWDOWN -----
[2025-03-21T17:08:10.693Z] Error getting revealed cards: cardValues[i].toNumber is not a function
[2025-03-21T17:08:10.693Z] 
----- FINAL GAME STATE -----
[2025-03-21T17:08:10.980Z] Game state: ENDED
[2025-03-21T17:08:10.980Z] Pot amount: 0
[2025-03-21T17:08:10.980Z] State version: 5
[2025-03-21T17:08:10.980Z] Is cleaned up: false
[2025-03-21T17:08:10.980Z] 
----- FINAL PLAYER BALANCES -----
[2025-03-21T17:08:11.276Z] Player 1 (0x9Fde625ED8A6eC0f3cA393A62be34231a5c167F4):
[2025-03-21T17:08:11.276Z]   Initial balance: 25
[2025-03-21T17:08:11.276Z]   Final balance: 40
[2025-03-21T17:08:11.277Z]   Difference: 15
[2025-03-21T17:08:11.277Z] *** Player 1 gained 15 chips - WINNER! ***
[2025-03-21T17:08:11.579Z] Player 2 (0x0Fae37437c1347c23dc279b424663579d2df67df):
[2025-03-21T17:08:11.579Z]   Initial balance: 25
[2025-03-21T17:08:11.579Z]   Final balance: 10
[2025-03-21T17:08:11.579Z]   Difference: -15
[2025-03-21T17:08:11.883Z] Player 3 (0xd2e443F6CF19d5d359e82bbEea76e1133028fda5):
[2025-03-21T17:08:11.883Z]   Initial balance: 25
[2025-03-21T17:08:11.883Z]   Final balance: 8
[2025-03-21T17:08:11.883Z]   Difference: -17
[2025-03-21T17:08:12.177Z] Player 4 (0x7B7057B07218fa9f357E39cb2fC2E723C2bfcf9F):
[2025-03-21T17:08:12.177Z]   Initial balance: 25
[2025-03-21T17:08:12.177Z]   Final balance: 25
[2025-03-21T17:08:12.177Z]   Difference: 0
[2025-03-21T17:08:12.177Z] 
----- SPECTATOR BETTING RESULTS -----
[2025-03-21T17:08:12.475Z] Betting results processed: true
[2025-03-21T17:08:12.476Z] Game winner: 0x9Fde625ED8A6eC0f3cA393A62be34231a5c167F4
[2025-03-21T17:08:12.477Z] Total betting pool: 0.03 ETH
[2025-03-21T17:08:12.477Z] 
----- SPECTATOR WINNINGS CHECK -----
[2025-03-21T17:08:13.042Z] Spectator 1 (0x1dA9aCB41763f97F744Da547F2d103042e8Ab239):
[2025-03-21T17:08:13.042Z]   Bet on: 0x9Fde625ED8A6eC0f3cA393A62be34231a5c167F4
[2025-03-21T17:08:13.043Z]   Bet amount: 0.01 ETH
[2025-03-21T17:08:13.043Z]   Has winnings: true
[2025-03-21T17:08:13.043Z]   Winnings amount: 0.03 ETH
[2025-03-21T17:08:13.601Z] Spectator 2 (0x52731AEDA26AB8D159226C51180a7542a4287500):
[2025-03-21T17:08:13.601Z]   Bet on: 0x0Fae37437c1347c23dc279b424663579d2df67df
[2025-03-21T17:08:13.602Z]   Bet amount: 0.01 ETH
[2025-03-21T17:08:13.602Z]   Has winnings: false
[2025-03-21T17:08:14.181Z] Spectator 3 (0x45ab32ec402D51096398aA4e6a7aF03180E50bD0):
[2025-03-21T17:08:14.181Z]   Bet on: 0xd2e443F6CF19d5d359e82bbEea76e1133028fda5
[2025-03-21T17:08:14.181Z]   Bet amount: 0.01 ETH
[2025-03-21T17:08:14.181Z]   Has winnings: false
[2025-03-21T17:08:14.182Z] 
----- SPECTATORS CLAIMING WINNINGS -----
[2025-03-21T17:08:16.768Z] Spectator 1 (0x1dA9aCB41763f97F744Da547F2d103042e8Ab239) successfully claimed 0.0304099815 ETH
[2025-03-21T17:08:17.050Z]   Bet now marked as claimed: true
[2025-03-21T17:08:18.161Z] Spectator 0x1dA9aCB41763f97F744Da547F2d103042e8Ab239 claimed 0.03 ETH in winnings
[2025-03-21T17:08:22.102Z] Spectator 2 (0x52731AEDA26AB8D159226C51180a7542a4287500) marked bet as claimed (no winnings)
[2025-03-21T17:08:22.382Z]   Bet now marked as claimed: true
[2025-03-21T17:08:26.035Z] Spectator 3 (0x45ab32ec402D51096398aA4e6a7aF03180E50bD0) marked bet as claimed (no winnings)
[2025-03-21T17:08:26.316Z]   Bet now marked as claimed: true
[2025-03-21T17:08:26.316Z] 
----- CLEANING UP THE GAME -----
[2025-03-21T17:08:30.079Z] Game cleaned up successfully
[2025-03-21T17:08:30.354Z] Game is cleaned up: true
[2025-03-21T17:08:30.354Z] Game is no longer spectatable
[2025-03-21T17:08:30.354Z] Final state update: State=ENDED, StateVersion=6
[2025-03-21T17:08:30.354Z] 
===== ONE CARD POKER WITH MONTY HALL AND SPECTATOR BETTING TEST COMPLETED =====
[2025-03-21T18:01:04.263Z] 
===== SETTING UP TEST ENVIRONMENT =====
[2025-03-21T18:01:04.299Z] Wallet setup complete.
[2025-03-21T18:01:04.299Z] Owner address: 0x1dA9aCB41763f97F744Da547F2d103042e8Ab239
[2025-03-21T18:01:04.299Z] Player 1 address: 0x9Fde625ED8A6eC0f3cA393A62be34231a5c167F4
[2025-03-21T18:01:04.299Z] Player 2 address: 0x0Fae37437c1347c23dc279b424663579d2df67df
[2025-03-21T18:01:04.299Z] Player 3 address: 0xd2e443F6CF19d5d359e82bbEea76e1133028fda5
[2025-03-21T18:01:04.299Z] Player 4 address: 0x7B7057B07218fa9f357E39cb2fC2E723C2bfcf9F
[2025-03-21T18:01:04.299Z] Spectator 1 address: 0x1dA9aCB41763f97F744Da547F2d103042e8Ab239
[2025-03-21T18:01:04.299Z] Spectator 2 address: 0x52731AEDA26AB8D159226C51180a7542a4287500
[2025-03-21T18:01:04.299Z] Spectator 3 address: 0x45ab32ec402D51096398aA4e6a7aF03180E50bD0
[2025-03-21T18:01:04.299Z] Keeper address: 0x1dA9aCB41763f97F744Da547F2d103042e8Ab239
[2025-03-21T18:01:04.299Z] 
----- CHECKING WALLET BALANCES -----
[2025-03-21T18:01:05.816Z] Address 0x1dA9aCB41763f97F744Da547F2d103042e8Ab239 has 0.53849717604 ETH
[2025-03-21T18:01:06.110Z] Address 0x9Fde625ED8A6eC0f3cA393A62be34231a5c167F4 has 0.9863059818 ETH
[2025-03-21T18:01:06.388Z] Address 0x0Fae37437c1347c23dc279b424663579d2df67df has 0.7390612329 ETH
[2025-03-21T18:01:06.677Z] Address 0xd2e443F6CF19d5d359e82bbEea76e1133028fda5 has 0.48800886 ETH
[2025-03-21T18:01:06.960Z] Address 0x7B7057B07218fa9f357E39cb2fC2E723C2bfcf9F has 0.7395420731 ETH
[2025-03-21T18:01:07.262Z] Address 0x1dA9aCB41763f97F744Da547F2d103042e8Ab239 has 0.53849717604 ETH
[2025-03-21T18:01:07.674Z] Address 0x52731AEDA26AB8D159226C51180a7542a4287500 has 0.71598412 ETH
[2025-03-21T18:01:07.960Z] Address 0x45ab32ec402D51096398aA4e6a7aF03180E50bD0 has 0.6693444048 ETH
[2025-03-21T18:01:08.248Z] Address 0x1dA9aCB41763f97F744Da547F2d103042e8Ab239 has 0.53849717604 ETH
[2025-03-21T18:01:08.248Z] 
----- DEPLOYING CONTRACTS -----
[2025-03-21T18:01:08.248Z] Deploying CardLibrary...
[2025-03-21T18:01:14.910Z] CardLibrary deployed at: 0x363b05963Bff5b922515ae73c48DA92607048fad
[2025-03-21T18:01:14.910Z] Deploying GameLibrary...
[2025-03-21T18:01:21.091Z] GameLibrary deployed at: 0xF19F40853eC8017445B84740FA358DB94455e3E2
[2025-03-21T18:01:21.091Z] Deploying OneCard main contract...
[2025-03-21T18:01:23.625Z] OneCard contract deployed at: 0x21781B95Bd5c74570Df0C7fC7bd8cC607f6Ba90D
[2025-03-21T18:01:23.625Z] Deploying PokerSpectatorView contract...
[2025-03-21T18:01:29.632Z] PokerSpectatorView contract deployed at: 0x98e4379a90A43F22352a3653b63Db2760a9325Df
[2025-03-21T18:01:29.633Z] Deploying SpectatorBetting contract...
[2025-03-21T18:01:36.155Z] SpectatorBetting contract deployed at: 0x6eD1de21Ae6FEeF48A535faDBd761f5d8cab0A4B
[2025-03-21T18:01:36.156Z] Setting spectator betting contract in OneCard contract...
[2025-03-21T18:01:38.570Z] SpectatorBetting contract set in OneCard
[2025-03-21T18:01:38.570Z] 
Add these to your .env file for future use:
[2025-03-21T18:01:38.570Z] POKER_CONTRACT_ADDRESS=0x21781B95Bd5c74570Df0C7fC7bd8cC607f6Ba90D
[2025-03-21T18:01:38.570Z] SPECTATOR_CONTRACT_ADDRESS=0x98e4379a90A43F22352a3653b63Db2760a9325Df
[2025-03-21T18:01:38.570Z] SPECTATOR_BETTING_ADDRESS=0x6eD1de21Ae6FEeF48A535faDBd761f5d8cab0A4B
[2025-03-21T18:01:38.575Z] 
===== STARTING ONE CARD POKER WITH MONTY HALL AND SPECTATOR BETTING TEST =====
[2025-03-21T18:01:38.575Z] 
----- ADDING PLAYERS TO WHITELIST -----
[2025-03-21T18:01:44.704Z] Added 4 players to whitelist
[2025-03-21T18:01:44.704Z] 
----- CREATING A NEW GAME -----
[2025-03-21T18:01:51.189Z] Created Game with ID: 1
[2025-03-21T18:01:51.473Z] Initial players in game: 5
[2025-03-21T18:01:51.473Z] Player 1: 0x1dA9aCB41763f97F744Da547F2d103042e8Ab239
[2025-03-21T18:01:51.474Z] Player 2: 0x9Fde625ED8A6eC0f3cA393A62be34231a5c167F4
[2025-03-21T18:01:51.474Z] Player 3: 0x0Fae37437c1347c23dc279b424663579d2df67df
[2025-03-21T18:01:51.474Z] Player 4: 0xd2e443F6CF19d5d359e82bbEea76e1133028fda5
[2025-03-21T18:01:51.474Z] Player 5: 0x7B7057B07218fa9f357E39cb2fC2E723C2bfcf9F
[2025-03-21T18:01:51.474Z] 
----- VERIFYING GAME INFO BEFORE SPECTATOR BETTING -----
[2025-03-21T18:01:51.761Z] Game state: REGISTRATION
[2025-03-21T18:01:51.767Z] Player count: 5
[2025-03-21T18:01:51.767Z] Active count: 5
[2025-03-21T18:01:51.767Z] Game keeper: 0x1dA9aCB41763f97F744Da547F2d103042e8Ab239
[2025-03-21T18:01:51.767Z] State version: 1
[2025-03-21T18:01:51.767Z] Is cleaned up: false
[2025-03-21T18:01:51.767Z] 
----- CHECKING IF BETTING IS OPEN -----
[2025-03-21T18:01:52.359Z] Betting open: true
[2025-03-21T18:01:52.359Z] Results processed: false
[2025-03-21T18:01:52.360Z] Total bet amount: 0.0 ETH
[2025-03-21T18:01:52.360Z] 
----- SPECTATORS PLACING BETS -----
[2025-03-21T18:01:55.622Z] Spectator 1 (0x1dA9aCB41763f97F744Da547F2d103042e8Ab239) bet 0.01 ETH on Player 1 (0x9Fde625ED8A6eC0f3cA393A62be34231a5c167F4)
[2025-03-21T18:01:55.907Z] Verified bet - Player: 0x9Fde625ED8A6eC0f3cA393A62be34231a5c167F4, Amount: 0.01 ETH, Claimed: false
[2025-03-21T18:01:57.461Z] Spectator 2 (0x52731AEDA26AB8D159226C51180a7542a4287500) bet 0.01 ETH on Player 2 (0x0Fae37437c1347c23dc279b424663579d2df67df)
[2025-03-21T18:01:57.744Z] Verified bet - Player: 0x0Fae37437c1347c23dc279b424663579d2df67df, Amount: 0.01 ETH, Claimed: false
[2025-03-21T18:01:59.341Z] Spectator 3 (0x45ab32ec402D51096398aA4e6a7aF03180E50bD0) bet 0.01 ETH on Player 3 (0xd2e443F6CF19d5d359e82bbEea76e1133028fda5)
[2025-03-21T18:01:59.644Z] Verified bet - Player: 0xd2e443F6CF19d5d359e82bbEea76e1133028fda5, Amount: 0.01 ETH, Claimed: false
[2025-03-21T18:01:59.645Z] 
----- CHECKING TOTAL BETS ON EACH PLAYER -----
[2025-03-21T18:01:59.708Z] Spectator 0x52731AEDA26AB8D159226C51180a7542a4287500 placed a bet of 0.01 ETH on player 0x0Fae37437c1347c23dc279b424663579d2df67df
[2025-03-21T18:01:59.708Z] Spectator 0x45ab32ec402D51096398aA4e6a7aF03180E50bD0 placed a bet of 0.01 ETH on player 0xd2e443F6CF19d5d359e82bbEea76e1133028fda5
[2025-03-21T18:01:59.926Z] Total bet on Player 1 (0x9Fde625ED8A6eC0f3cA393A62be34231a5c167F4): 0.01 ETH
[2025-03-21T18:02:00.242Z] Total bet on Player 2 (0x0Fae37437c1347c23dc279b424663579d2df67df): 0.01 ETH
[2025-03-21T18:02:00.533Z] Total bet on Player 3 (0xd2e443F6CF19d5d359e82bbEea76e1133028fda5): 0.01 ETH
[2025-03-21T18:02:00.817Z] Total bet on Player 4 (0x7B7057B07218fa9f357E39cb2fC2E723C2bfcf9F): 0.0 ETH
[2025-03-21T18:02:01.118Z] Total betting pool: 0.03 ETH
[2025-03-21T18:02:01.118Z] 
----- STARTING PEEK PHASE -----
[2025-03-21T18:02:02.315Z] startPeekPhase transaction submitted, waiting for confirmation...
[2025-03-21T18:02:03.618Z] startPeekPhase transaction confirmed!
[2025-03-21T18:02:03.618Z] Buffer period started before peek phase. Current state: REGISTRATION, Next state: PEEK_PHASE
[2025-03-21T18:02:03.618Z] Peek phase started for game 1
[2025-03-21T18:02:03.618Z] Game state updated: State=PEEK_PHASE, Pot=0, CurrentBet=0, StateVersion=2
[2025-03-21T18:02:03.673Z] Betting closed for game 1
[2025-03-21T18:02:03.911Z] Betting open after peek phase start: false
[2025-03-21T18:02:04.210Z] Phase end time: 2025-03-21T18:04:32.000Z
[2025-03-21T18:02:04.210Z] Buffer end time: 2025-03-21T18:02:32.000Z
[2025-03-21T18:02:04.210Z] Waiting 28 seconds for buffer period to end...
[2025-03-21T18:02:04.210Z] Waiting for buffer period to end on TEN network...
[2025-03-21T18:02:34.221Z] Buffer period ended
[2025-03-21T18:02:34.223Z] 
----- PLAYERS PEEKING AT CARDS -----
[2025-03-21T18:02:34.595Z] Player 1 initial chip balance: 25
[2025-03-21T18:02:39.715Z] Player 1 (0x9Fde625ED8A6eC0f3cA393A62be34231a5c167F4) peeked at their card
[2025-03-21T18:02:39.716Z] Player action: peek, Amount: 5, Nonce: 1
[2025-03-21T18:02:39.732Z] Card for 0x9Fde625ED8A6eC0f3cA393A62be34231a5c167F4: 7 of Spades
[2025-03-21T18:02:40.019Z] Player 1 chip balance after peeking: 20
[2025-03-21T18:02:40.307Z] Player 2 initial chip balance: 25
[2025-03-21T18:02:43.717Z] Player 2 (0x0Fae37437c1347c23dc279b424663579d2df67df) peeked at their card
[2025-03-21T18:02:43.718Z] Player action: peek, Amount: 5, Nonce: 1
[2025-03-21T18:02:43.828Z] Card for 0x0Fae37437c1347c23dc279b424663579d2df67df: 5 of Clubs
[2025-03-21T18:02:43.995Z] Player 2 chip balance after peeking: 20
[2025-03-21T18:02:43.996Z] 
----- PLAYER USING MONTY HALL OPTION -----
[2025-03-21T18:02:44.318Z] Player 3 initial chip balance: 25
[2025-03-21T18:02:47.676Z] Player 3 (0xd2e443F6CF19d5d359e82bbEea76e1133028fda5) used Monty Hall option
[2025-03-21T18:02:47.676Z] Player action: montyHall, Amount: 7, Nonce: 1
[2025-03-21T18:02:47.776Z] Monty Hall cards revealed to 0xd2e443F6CF19d5d359e82bbEea76e1133028fda5:
[2025-03-21T18:02:47.777Z] - 7 of Diamonds
[2025-03-21T18:02:47.777Z] - Queen of Hearts
[2025-03-21T18:02:47.955Z] Player 3 chip balance after using Monty Hall: 18
[2025-03-21T18:02:51.661Z] Player 3 decided to swap their card
[2025-03-21T18:02:51.661Z] Player action: swapCard, Amount: 0, Nonce: 2
[2025-03-21T18:02:51.662Z] Player 4 (0x7B7057B07218fa9f357E39cb2fC2E723C2bfcf9F) chose not to peek or use Monty Hall
[2025-03-21T18:02:51.767Z] 0xd2e443F6CF19d5d359e82bbEea76e1133028fda5 swapped Queen of Spades for 9 of Diamonds
[2025-03-21T18:02:51.930Z] 
----- PLAYER STATUS AFTER PEEK PHASE -----
[2025-03-21T18:02:52.210Z] Player 1 (0x9Fde625ED8A6eC0f3cA393A62be34231a5c167F4):
[2025-03-21T18:02:52.210Z]   Chip balance: 20
[2025-03-21T18:02:52.210Z]   Has peeked: true
[2025-03-21T18:02:52.210Z]   Used Monty Hall: false
[2025-03-21T18:02:52.210Z]   Action nonce: 1
[2025-03-21T18:02:52.513Z] Player 2 (0x0Fae37437c1347c23dc279b424663579d2df67df):
[2025-03-21T18:02:52.513Z]   Chip balance: 20
[2025-03-21T18:02:52.513Z]   Has peeked: true
[2025-03-21T18:02:52.513Z]   Used Monty Hall: false
[2025-03-21T18:02:52.513Z]   Action nonce: 1
[2025-03-21T18:02:52.796Z] Player 3 (0xd2e443F6CF19d5d359e82bbEea76e1133028fda5):
[2025-03-21T18:02:52.797Z]   Chip balance: 18
[2025-03-21T18:02:52.797Z]   Has peeked: false
[2025-03-21T18:02:52.797Z]   Used Monty Hall: true
[2025-03-21T18:02:52.797Z]   Action nonce: 2
[2025-03-21T18:02:53.073Z] Player 4 (0x7B7057B07218fa9f357E39cb2fC2E723C2bfcf9F):
[2025-03-21T18:02:53.074Z]   Chip balance: 25
[2025-03-21T18:02:53.074Z]   Has peeked: false
[2025-03-21T18:02:53.074Z]   Used Monty Hall: false
[2025-03-21T18:02:53.074Z]   Action nonce: 0
[2025-03-21T18:02:53.074Z] 
----- WAITING FOR PEEK PHASE TO END -----
[2025-03-21T18:02:53.410Z] Waiting 99 seconds for peek phase to end...
[2025-03-21T18:02:53.410Z] Waiting for peek phase to end on TEN network...
[2025-03-21T18:04:33.421Z] Peek phase ended
[2025-03-21T18:04:33.422Z] 
----- ENDING PEEK PHASE -----
[2025-03-21T18:04:34.626Z] endPeekPhase transaction submitted, waiting for confirmation...
[2025-03-21T18:04:35.706Z] endPeekPhase transaction confirmed!
[2025-03-21T18:04:35.707Z] Buffer period started before betting phase. Current state: PEEK_PHASE, Next state: BETTING
[2025-03-21T18:04:35.707Z] Betting phase started for game 1
[2025-03-21T18:04:35.707Z] Game state updated: State=BETTING, Pot=0, CurrentBet=0, StateVersion=3
[2025-03-21T18:04:36.006Z] Phase end time: 2025-03-21T18:10:04.000Z
[2025-03-21T18:04:36.006Z] Buffer end time: 2025-03-21T18:05:04.000Z
[2025-03-21T18:04:36.006Z] Waiting 28 seconds for buffer period to end...
[2025-03-21T18:04:36.006Z] Waiting for buffer period to end on TEN network...
[2025-03-21T18:05:06.018Z] Buffer period ended
[2025-03-21T18:05:06.018Z] 
----- PLAYERS PLACING BETS -----
[2025-03-21T18:05:11.661Z] Player 1 (0x9Fde625ED8A6eC0f3cA393A62be34231a5c167F4) bet 5 chips
[2025-03-21T18:05:11.935Z] Pot after bet 1: 5, Current bet: 5
[2025-03-21T18:05:15.672Z] Player 2 (0x0Fae37437c1347c23dc279b424663579d2df67df) bet 5 chips
[2025-03-21T18:05:15.953Z] Pot after bet 2: 10, Current bet: 5
[2025-03-21T18:05:19.900Z] Player 3 (0xd2e443F6CF19d5d359e82bbEea76e1133028fda5) bet 10 chips (raising to 10)
[2025-03-21T18:05:20.221Z] Pot after bet 3: 20, Current bet: 10
[2025-03-21T18:05:24.021Z] Player 1 (0x9Fde625ED8A6eC0f3cA393A62be34231a5c167F4) bet additional 5 chips (calling the raise)
[2025-03-21T18:05:24.359Z] Pot after bet 4: 25, Current bet: 10
[2025-03-21T18:05:27.673Z] Player 2 (0x0Fae37437c1347c23dc279b424663579d2df67df) bet additional 5 chips (calling the raise)
[2025-03-21T18:05:27.984Z] Pot after bet 5: 30, Current bet: 10
[2025-03-21T18:05:31.708Z] Player 4 (0x7B7057B07218fa9f357E39cb2fC2E723C2bfcf9F) folded
[2025-03-21T18:05:32.038Z] Active players after fold: 4
[2025-03-21T18:05:32.038Z] 
----- PLAYER STATUS AFTER BETTING -----
[2025-03-21T18:05:32.317Z] Player 1 (0x9Fde625ED8A6eC0f3cA393A62be34231a5c167F4):
[2025-03-21T18:05:32.317Z]   Chip balance: 10
[2025-03-21T18:05:32.317Z]   Current bet: 10
[2025-03-21T18:05:32.317Z]   Has folded: false
[2025-03-21T18:05:32.317Z]   Action nonce: 3
[2025-03-21T18:05:32.615Z] Player 2 (0x0Fae37437c1347c23dc279b424663579d2df67df):
[2025-03-21T18:05:32.615Z]   Chip balance: 10
[2025-03-21T18:05:32.615Z]   Current bet: 10
[2025-03-21T18:05:32.615Z]   Has folded: false
[2025-03-21T18:05:32.615Z]   Action nonce: 3
[2025-03-21T18:05:32.917Z] Player 3 (0xd2e443F6CF19d5d359e82bbEea76e1133028fda5):
[2025-03-21T18:05:32.917Z]   Chip balance: 8
[2025-03-21T18:05:32.917Z]   Current bet: 10
[2025-03-21T18:05:32.917Z]   Has folded: false
[2025-03-21T18:05:32.917Z]   Action nonce: 3
[2025-03-21T18:05:33.228Z] Player 4 (0x7B7057B07218fa9f357E39cb2fC2E723C2bfcf9F):
[2025-03-21T18:05:33.228Z]   Chip balance: 25
[2025-03-21T18:05:33.228Z]   Current bet: 0
[2025-03-21T18:05:33.228Z]   Has folded: true
[2025-03-21T18:05:33.228Z]   Action nonce: 1
[2025-03-21T18:05:33.576Z] Have all active players matched the current bet? false
[2025-03-21T18:05:33.578Z] 
----- WAITING FOR BETTING PHASE TO END -----
[2025-03-21T18:05:33.878Z] Betting phase ends in 271 seconds at 2025-03-21T18:10:04.000Z
[2025-03-21T18:05:33.878Z] All players have matched bets, manually ending betting phase...
[2025-03-21T18:05:33.878Z] 
----- CHECKING GAME STATE BEFORE ENDING BETTING PHASE -----
[2025-03-21T18:05:34.155Z] Current game state: BETTING
[2025-03-21T18:05:34.155Z] Phase end time: 2025-03-21T18:10:04.000Z
[2025-03-21T18:05:34.155Z] Current time: 2025-03-21T18:05:34.155Z
[2025-03-21T18:05:34.155Z] Buffer end time: 2025-03-21T18:05:04.000Z
[2025-03-21T18:05:34.155Z] Is in buffer period: false
[2025-03-21T18:05:34.155Z] Is phase ended: false
[2025-03-21T18:05:34.436Z] Is caller (0x1dA9aCB41763f97F744Da547F2d103042e8Ab239) a keeper: true
[2025-03-21T18:05:34.436Z] Betting phase hasn't ended yet. Waiting 270 seconds...
[2025-03-21T18:05:34.437Z] Waiting for phase to end on TEN network...
[2025-03-21T18:05:44.440Z] 260 seconds remaining until phase ends
[2025-03-21T18:05:54.442Z] 250 seconds remaining until phase ends
[2025-03-21T18:06:04.445Z] 240 seconds remaining until phase ends
[2025-03-21T18:06:14.450Z] 230 seconds remaining until phase ends
[2025-03-21T18:06:24.452Z] 220 seconds remaining until phase ends
[2025-03-21T18:06:34.454Z] 210 seconds remaining until phase ends
[2025-03-21T18:06:44.458Z] 200 seconds remaining until phase ends
[2025-03-21T18:06:54.462Z] 190 seconds remaining until phase ends
[2025-03-21T18:07:04.466Z] 180 seconds remaining until phase ends
[2025-03-21T18:07:14.469Z] 170 seconds remaining until phase ends
[2025-03-21T18:07:24.472Z] 160 seconds remaining until phase ends
[2025-03-21T18:07:34.474Z] 150 seconds remaining until phase ends
[2025-03-21T18:07:44.477Z] 140 seconds remaining until phase ends
[2025-03-21T18:07:54.481Z] 130 seconds remaining until phase ends
[2025-03-21T18:08:04.484Z] 120 seconds remaining until phase ends
[2025-03-21T18:08:14.487Z] 110 seconds remaining until phase ends
[2025-03-21T18:08:24.490Z] 100 seconds remaining until phase ends
[2025-03-21T18:08:34.494Z] 90 seconds remaining until phase ends
[2025-03-21T18:08:44.495Z] 80 seconds remaining until phase ends
[2025-03-21T18:08:54.506Z] 70 seconds remaining until phase ends
[2025-03-21T18:09:04.509Z] 60 seconds remaining until phase ends
[2025-03-21T18:09:14.511Z] 50 seconds remaining until phase ends
[2025-03-21T18:09:24.514Z] 40 seconds remaining until phase ends
[2025-03-21T18:09:34.518Z] 30 seconds remaining until phase ends
[2025-03-21T18:09:44.521Z] 20 seconds remaining until phase ends
[2025-03-21T18:09:54.524Z] 10 seconds remaining until phase ends
[2025-03-21T18:10:04.527Z] Betting phase has now ended
[2025-03-21T18:10:04.818Z] Game state after waiting: BETTING
[2025-03-21T18:10:04.818Z] Updated phase end time: 2025-03-21T18:10:04.000Z
[2025-03-21T18:10:04.818Z] Updated buffer end time: 2025-03-21T18:05:04.000Z
[2025-03-21T18:10:04.818Z] 
----- ENDING BETTING PHASE -----
[2025-03-21T18:10:06.022Z] endBettingPhase transaction submitted, waiting for confirmation...
[2025-03-21T18:10:06.313Z] endBettingPhase transaction confirmed!
[2025-03-21T18:10:06.313Z] Showdown phase started
[2025-03-21T18:10:06.313Z] Game ended event not found in transaction logs - waiting for async event
[2025-03-21T18:10:07.840Z] 
===== GAME ENDED EVENT CAPTURED =====
[2025-03-21T18:10:07.840Z] Winner: 0xd2e443F6CF19d5d359e82bbEea76e1133028fda5
[2025-03-21T18:10:07.840Z] Pot Amount: 30 chips
[2025-03-21T18:10:07.841Z] Player 3 (0xd2e443F6CF19d5d359e82bbEea76e1133028fda5) won the game!
[2025-03-21T18:10:07.841Z] Async winner detection: 0xd2e443F6CF19d5d359e82bbEea76e1133028fda5
[2025-03-21T18:10:07.841Z] Final game state: State=SHOWDOWN, Pot=30, CurrentBet=10, StateVersion=4
[2025-03-21T18:10:07.841Z] 
----- REVEALED CARDS DURING SHOWDOWN -----
[2025-03-21T18:10:07.849Z] Card for 0x1dA9aCB41763f97F744Da547F2d103042e8Ab239: 4 of Clubs
[2025-03-21T18:10:07.849Z] Card for 0x9Fde625ED8A6eC0f3cA393A62be34231a5c167F4: 7 of Spades
[2025-03-21T18:10:07.849Z] Card for 0x0Fae37437c1347c23dc279b424663579d2df67df: 5 of Clubs
[2025-03-21T18:10:07.849Z] Card for 0xd2e443F6CF19d5d359e82bbEea76e1133028fda5: 9 of Diamonds
[2025-03-21T18:10:07.850Z] Betting results processed for game 1, winner: 0xd2e443F6CF19d5d359e82bbEea76e1133028fda5
[2025-03-21T18:10:08.135Z] Error getting revealed cards: cardValues[i].toNumber is not a function
[2025-03-21T18:10:08.136Z] 
----- FINAL GAME STATE -----
[2025-03-21T18:10:08.414Z] Game state: ENDED
[2025-03-21T18:10:08.414Z] Pot amount: 0
[2025-03-21T18:10:08.414Z] State version: 5
[2025-03-21T18:10:08.414Z] Is cleaned up: false
[2025-03-21T18:10:08.414Z] 
----- FINAL PLAYER BALANCES -----
[2025-03-21T18:10:08.693Z] Player 1 (0x9Fde625ED8A6eC0f3cA393A62be34231a5c167F4):
[2025-03-21T18:10:08.694Z]   Initial balance: 25
[2025-03-21T18:10:08.694Z]   Final balance: 10
[2025-03-21T18:10:08.694Z]   Difference: -15
[2025-03-21T18:10:08.988Z] Player 2 (0x0Fae37437c1347c23dc279b424663579d2df67df):
[2025-03-21T18:10:08.989Z]   Initial balance: 25
[2025-03-21T18:10:08.989Z]   Final balance: 10
[2025-03-21T18:10:08.989Z]   Difference: -15
[2025-03-21T18:10:09.410Z] Player 3 (0xd2e443F6CF19d5d359e82bbEea76e1133028fda5):
[2025-03-21T18:10:09.411Z]   Initial balance: 25
[2025-03-21T18:10:09.411Z]   Final balance: 38
[2025-03-21T18:10:09.411Z]   Difference: 13
[2025-03-21T18:10:09.411Z] *** Player 3 gained 13 chips - WINNER! ***
[2025-03-21T18:10:09.715Z] Player 4 (0x7B7057B07218fa9f357E39cb2fC2E723C2bfcf9F):
[2025-03-21T18:10:09.715Z]   Initial balance: 25
[2025-03-21T18:10:09.715Z]   Final balance: 25
[2025-03-21T18:10:09.715Z]   Difference: 0
[2025-03-21T18:10:09.715Z] 
----- SPECTATOR BETTING RESULTS -----
[2025-03-21T18:10:09.995Z] Betting results processed: true
[2025-03-21T18:10:09.995Z] Game winner: 0xd2e443F6CF19d5d359e82bbEea76e1133028fda5
[2025-03-21T18:10:09.997Z] Total betting pool: 0.03 ETH
[2025-03-21T18:10:09.997Z] 
----- SPECTATOR WINNINGS CHECK -----
[2025-03-21T18:10:10.575Z] Spectator 1 (0x1dA9aCB41763f97F744Da547F2d103042e8Ab239):
[2025-03-21T18:10:10.575Z]   Bet on: 0x9Fde625ED8A6eC0f3cA393A62be34231a5c167F4
[2025-03-21T18:10:10.575Z]   Bet amount: 0.01 ETH
[2025-03-21T18:10:10.575Z]   Has winnings: false
[2025-03-21T18:10:11.170Z] Spectator 2 (0x52731AEDA26AB8D159226C51180a7542a4287500):
[2025-03-21T18:10:11.171Z]   Bet on: 0x0Fae37437c1347c23dc279b424663579d2df67df
[2025-03-21T18:10:11.171Z]   Bet amount: 0.01 ETH
[2025-03-21T18:10:11.172Z]   Has winnings: false
[2025-03-21T18:10:11.775Z] Spectator 3 (0x45ab32ec402D51096398aA4e6a7aF03180E50bD0):
[2025-03-21T18:10:11.775Z]   Bet on: 0xd2e443F6CF19d5d359e82bbEea76e1133028fda5
[2025-03-21T18:10:11.776Z]   Bet amount: 0.01 ETH
[2025-03-21T18:10:11.776Z]   Has winnings: true
[2025-03-21T18:10:11.776Z]   Winnings amount: 0.03 ETH
[2025-03-21T18:10:11.776Z] 
----- SPECTATORS CLAIMING WINNINGS -----
[2025-03-21T18:10:15.891Z] Spectator 1 (0x1dA9aCB41763f97F744Da547F2d103042e8Ab239) marked bet as claimed (no winnings)
[2025-03-21T18:10:16.390Z]   Bet now marked as claimed: true
[2025-03-21T18:10:19.878Z] Spectator 2 (0x52731AEDA26AB8D159226C51180a7542a4287500) marked bet as claimed (no winnings)
[2025-03-21T18:10:20.165Z]   Bet now marked as claimed: true
[2025-03-21T18:10:22.582Z] Spectator 3 (0x45ab32ec402D51096398aA4e6a7aF03180E50bD0) successfully claimed 0.0300227625 ETH
[2025-03-21T18:10:22.876Z]   Bet now marked as claimed: true
[2025-03-21T18:10:22.876Z] 
----- CLEANING UP THE GAME -----
[2025-03-21T18:10:23.811Z] Spectator 0x45ab32ec402D51096398aA4e6a7aF03180E50bD0 claimed 0.03 ETH in winnings
[2025-03-21T18:10:27.724Z] Game cleaned up successfully
[2025-03-21T18:10:28.009Z] Game is cleaned up: true
[2025-03-21T18:10:28.010Z] Game is no longer spectatable
[2025-03-21T18:10:28.010Z] Final state update: State=ENDED, StateVersion=6
[2025-03-21T18:10:28.010Z] 
===== ONE CARD POKER WITH MONTY HALL AND SPECTATOR BETTING TEST COMPLETED =====
[2025-03-21T19:02:42.287Z] 
===== SETTING UP TEST ENVIRONMENT =====
[2025-03-21T19:02:42.341Z] Wallet setup complete.
[2025-03-21T19:02:42.341Z] Owner address: 0x1dA9aCB41763f97F744Da547F2d103042e8Ab239
[2025-03-21T19:02:42.341Z] Player 1 address: 0x9Fde625ED8A6eC0f3cA393A62be34231a5c167F4
[2025-03-21T19:02:42.342Z] Player 2 address: 0x0Fae37437c1347c23dc279b424663579d2df67df
[2025-03-21T19:02:42.342Z] Player 3 address: 0xd2e443F6CF19d5d359e82bbEea76e1133028fda5
[2025-03-21T19:02:42.342Z] Player 4 address: 0x7B7057B07218fa9f357E39cb2fC2E723C2bfcf9F
[2025-03-21T19:02:42.342Z] Spectator 1 address: 0x1dA9aCB41763f97F744Da547F2d103042e8Ab239
[2025-03-21T19:02:42.342Z] Spectator 2 address: 0x52731AEDA26AB8D159226C51180a7542a4287500
[2025-03-21T19:02:42.342Z] Spectator 3 address: 0x45ab32ec402D51096398aA4e6a7aF03180E50bD0
[2025-03-21T19:02:42.342Z] Keeper address: 0x1dA9aCB41763f97F744Da547F2d103042e8Ab239
[2025-03-21T19:02:42.342Z] 
----- CHECKING WALLET BALANCES -----
[2025-03-21T19:02:43.956Z] Address 0x1dA9aCB41763f97F744Da547F2d103042e8Ab239 has 0.51186111754 ETH
[2025-03-21T19:02:44.237Z] Address 0x9Fde625ED8A6eC0f3cA393A62be34231a5c167F4 has 0.9858549641 ETH
[2025-03-21T19:02:44.516Z] Address 0x0Fae37437c1347c23dc279b424663579d2df67df has 0.7386696113 ETH
[2025-03-21T19:02:44.804Z] Address 0xd2e443F6CF19d5d359e82bbEea76e1133028fda5 has 0.4873921456 ETH
[2025-03-21T19:02:45.083Z] Address 0x7B7057B07218fa9f357E39cb2fC2E723C2bfcf9F has 0.7394077035 ETH
[2025-03-21T19:02:45.379Z] Address 0x1dA9aCB41763f97F744Da547F2d103042e8Ab239 has 0.51186111754 ETH
[2025-03-21T19:02:45.684Z] Address 0x52731AEDA26AB8D159226C51180a7542a4287500 has 0.7057327591 ETH
[2025-03-21T19:02:45.961Z] Address 0x45ab32ec402D51096398aA4e6a7aF03180E50bD0 has 0.6890715207 ETH
[2025-03-21T19:02:46.246Z] Address 0x1dA9aCB41763f97F744Da547F2d103042e8Ab239 has 0.51186111754 ETH
[2025-03-21T19:02:46.246Z] 
----- DEPLOYING CONTRACTS -----
[2025-03-21T19:02:46.246Z] Deploying CardLibrary...
[2025-03-21T19:02:48.292Z] CardLibrary deployed at: 0x0936f431edeD9D7991d819E9e10e6A273c50f962
[2025-03-21T19:02:48.292Z] Deploying GameLibrary...
[2025-03-21T19:02:54.138Z] GameLibrary deployed at: 0x54611cf2a2198A27dAB140FA33488856BaE73Be6
[2025-03-21T19:02:54.138Z] Deploying OneCard main contract...
[2025-03-21T19:03:00.802Z] OneCard contract deployed at: 0xcE4ae60413B6Bdad2c60BeEB84BB9C55DA787b02
[2025-03-21T19:03:00.803Z] Deploying PokerSpectatorView contract...
[2025-03-21T19:03:07.268Z] PokerSpectatorView contract deployed at: 0x7B5c15A7C02D78E0b5894488f0E74F10dEfdb773
[2025-03-21T19:03:07.268Z] Deploying SpectatorBetting contract...
[2025-03-21T19:03:13.454Z] SpectatorBetting contract deployed at: 0xc9dB4D7bF096965f78398350D78600931858b9e8
[2025-03-21T19:03:13.454Z] Setting spectator betting contract in OneCard contract...
[2025-03-21T19:03:19.587Z] SpectatorBetting contract set in OneCard
[2025-03-21T19:03:19.588Z] 
Add these to your .env file for future use:
[2025-03-21T19:03:19.588Z] POKER_CONTRACT_ADDRESS=0xcE4ae60413B6Bdad2c60BeEB84BB9C55DA787b02
[2025-03-21T19:03:19.588Z] SPECTATOR_CONTRACT_ADDRESS=0x7B5c15A7C02D78E0b5894488f0E74F10dEfdb773
[2025-03-21T19:03:19.588Z] SPECTATOR_BETTING_ADDRESS=0xc9dB4D7bF096965f78398350D78600931858b9e8
[2025-03-21T19:03:19.594Z] 
===== STARTING ONE CARD POKER WITH MONTY HALL AND SPECTATOR BETTING TEST =====
[2025-03-21T19:03:19.595Z] 
----- ADDING PLAYERS TO WHITELIST -----
[2025-03-21T19:03:21.261Z] Added 4 players to whitelist
[2025-03-21T19:03:21.261Z] 
----- CREATING A NEW GAME -----
[2025-03-21T19:03:27.114Z] Created Game with ID: 1
[2025-03-21T19:03:27.433Z] Initial players in game: 5
[2025-03-21T19:03:27.433Z] Player 1: 0x1dA9aCB41763f97F744Da547F2d103042e8Ab239
[2025-03-21T19:03:27.433Z] Player 2: 0x9Fde625ED8A6eC0f3cA393A62be34231a5c167F4
[2025-03-21T19:03:27.433Z] Player 3: 0x0Fae37437c1347c23dc279b424663579d2df67df
[2025-03-21T19:03:27.433Z] Player 4: 0xd2e443F6CF19d5d359e82bbEea76e1133028fda5
[2025-03-21T19:03:27.433Z] Player 5: 0x7B7057B07218fa9f357E39cb2fC2E723C2bfcf9F
[2025-03-21T19:03:27.433Z] 
----- VERIFYING GAME INFO BEFORE SPECTATOR BETTING -----
[2025-03-21T19:03:27.715Z] Game state: REGISTRATION
[2025-03-21T19:03:27.716Z] Player count: 5
[2025-03-21T19:03:27.716Z] Active count: 5
[2025-03-21T19:03:27.716Z] Game keeper: 0x1dA9aCB41763f97F744Da547F2d103042e8Ab239
[2025-03-21T19:03:27.716Z] State version: 1
[2025-03-21T19:03:27.716Z] Is cleaned up: false
[2025-03-21T19:03:27.716Z] 
----- CHECKING IF BETTING IS OPEN -----
[2025-03-21T19:03:27.996Z] Betting open: true
[2025-03-21T19:03:27.996Z] Results processed: false
[2025-03-21T19:03:27.997Z] Total bet amount: 0.0 ETH
[2025-03-21T19:03:27.997Z] 
----- SPECTATORS PLACING BETS -----
[2025-03-21T19:03:31.529Z] Spectator 1 (0x1dA9aCB41763f97F744Da547F2d103042e8Ab239) bet 0.01 ETH on Player 1 (0x9Fde625ED8A6eC0f3cA393A62be34231a5c167F4)
[2025-03-21T19:03:31.811Z] Verified bet - Player: 0x9Fde625ED8A6eC0f3cA393A62be34231a5c167F4, Amount: 0.01 ETH, Claimed: false
[2025-03-21T19:03:33.276Z] Spectator 2 (0x52731AEDA26AB8D159226C51180a7542a4287500) bet 0.01 ETH on Player 2 (0x0Fae37437c1347c23dc279b424663579d2df67df)
[2025-03-21T19:03:33.575Z] Verified bet - Player: 0x0Fae37437c1347c23dc279b424663579d2df67df, Amount: 0.01 ETH, Claimed: false
[2025-03-21T19:03:35.555Z] Spectator 3 (0x45ab32ec402D51096398aA4e6a7aF03180E50bD0) bet 0.01 ETH on Player 3 (0xd2e443F6CF19d5d359e82bbEea76e1133028fda5)
[2025-03-21T19:03:35.643Z] Spectator 0x52731AEDA26AB8D159226C51180a7542a4287500 placed a bet of 0.01 ETH on player 0x0Fae37437c1347c23dc279b424663579d2df67df
[2025-03-21T19:03:35.644Z] Spectator 0x45ab32ec402D51096398aA4e6a7aF03180E50bD0 placed a bet of 0.01 ETH on player 0xd2e443F6CF19d5d359e82bbEea76e1133028fda5
[2025-03-21T19:03:35.835Z] Verified bet - Player: 0xd2e443F6CF19d5d359e82bbEea76e1133028fda5, Amount: 0.01 ETH, Claimed: false
[2025-03-21T19:03:35.835Z] 
----- CHECKING TOTAL BETS ON EACH PLAYER -----
[2025-03-21T19:03:36.110Z] Total bet on Player 1 (0x9Fde625ED8A6eC0f3cA393A62be34231a5c167F4): 0.01 ETH
[2025-03-21T19:03:36.390Z] Total bet on Player 2 (0x0Fae37437c1347c23dc279b424663579d2df67df): 0.01 ETH
[2025-03-21T19:03:36.699Z] Total bet on Player 3 (0xd2e443F6CF19d5d359e82bbEea76e1133028fda5): 0.01 ETH
[2025-03-21T19:03:36.992Z] Total bet on Player 4 (0x7B7057B07218fa9f357E39cb2fC2E723C2bfcf9F): 0.0 ETH
[2025-03-21T19:03:37.282Z] Total betting pool: 0.03 ETH
[2025-03-21T19:03:37.282Z] 
----- STARTING PEEK PHASE -----
[2025-03-21T19:03:38.393Z] startPeekPhase transaction submitted, waiting for confirmation...
[2025-03-21T19:03:39.554Z] startPeekPhase transaction confirmed!
[2025-03-21T19:03:39.555Z] Buffer period started before peek phase. Current state: REGISTRATION, Next state: PEEK_PHASE
[2025-03-21T19:03:39.555Z] Peek phase started for game 1
[2025-03-21T19:03:39.555Z] Game state updated: State=PEEK_PHASE, Pot=0, CurrentBet=0, StateVersion=2
[2025-03-21T19:03:40.190Z] Betting open after peek phase start: false
[2025-03-21T19:03:40.473Z] Phase end time: 2025-03-21T19:06:08.000Z
[2025-03-21T19:03:40.473Z] Buffer end time: 2025-03-21T19:04:08.000Z
[2025-03-21T19:03:40.474Z] Waiting 28 seconds for buffer period to end...
[2025-03-21T19:03:40.474Z] Waiting for buffer period to end on TEN network...
[2025-03-21T19:03:43.669Z] Betting closed for game 1
[2025-03-21T19:04:10.482Z] Buffer period ended
[2025-03-21T19:04:10.484Z] 
----- PLAYERS PEEKING AT CARDS -----
[2025-03-21T19:04:10.761Z] Player 1 initial chip balance: 25
[2025-03-21T19:04:15.555Z] Player 1 (0x9Fde625ED8A6eC0f3cA393A62be34231a5c167F4) peeked at their card
[2025-03-21T19:04:15.555Z] Player action: peek, Amount: 5, Nonce: 1
[2025-03-21T19:04:15.678Z] Card for 0x9Fde625ED8A6eC0f3cA393A62be34231a5c167F4: 4 of Spades
[2025-03-21T19:04:15.894Z] Player 1 chip balance after peeking: 20
[2025-03-21T19:04:16.183Z] Player 2 initial chip balance: 25
[2025-03-21T19:04:19.630Z] Player 2 (0x0Fae37437c1347c23dc279b424663579d2df67df) peeked at their card
[2025-03-21T19:04:19.630Z] Player action: peek, Amount: 5, Nonce: 1
[2025-03-21T19:04:19.714Z] Card for 0x0Fae37437c1347c23dc279b424663579d2df67df: Ace of Clubs
[2025-03-21T19:04:19.903Z] Player 2 chip balance after peeking: 20
[2025-03-21T19:04:19.904Z] 
----- PLAYER USING MONTY HALL OPTION -----
[2025-03-21T19:04:20.182Z] Player 3 initial chip balance: 25
[2025-03-21T19:04:23.604Z] Player 3 (0xd2e443F6CF19d5d359e82bbEea76e1133028fda5) used Monty Hall option
[2025-03-21T19:04:23.605Z] Player action: montyHall, Amount: 7, Nonce: 1
[2025-03-21T19:04:23.699Z] Monty Hall cards revealed to 0xd2e443F6CF19d5d359e82bbEea76e1133028fda5:
[2025-03-21T19:04:23.699Z] - Queen of Hearts
[2025-03-21T19:04:23.699Z] - 5 of Hearts
[2025-03-21T19:04:23.891Z] Player 3 chip balance after using Monty Hall: 18
[2025-03-21T19:04:27.677Z] Player 3 decided to swap their card
[2025-03-21T19:04:27.677Z] Player action: swapCard, Amount: 0, Nonce: 2
[2025-03-21T19:04:27.677Z] Player 4 (0x7B7057B07218fa9f357E39cb2fC2E723C2bfcf9F) chose not to peek or use Monty Hall
[2025-03-21T19:04:27.752Z] 0xd2e443F6CF19d5d359e82bbEea76e1133028fda5 swapped King of Spades for King of Hearts
[2025-03-21T19:04:27.992Z] 
----- PLAYER STATUS AFTER PEEK PHASE -----
[2025-03-21T19:04:28.278Z] Player 1 (0x9Fde625ED8A6eC0f3cA393A62be34231a5c167F4):
[2025-03-21T19:04:28.278Z]   Chip balance: 20
[2025-03-21T19:04:28.278Z]   Has peeked: true
[2025-03-21T19:04:28.278Z]   Used Monty Hall: false
[2025-03-21T19:04:28.278Z]   Action nonce: 1
[2025-03-21T19:04:28.595Z] Player 2 (0x0Fae37437c1347c23dc279b424663579d2df67df):
[2025-03-21T19:04:28.595Z]   Chip balance: 20
[2025-03-21T19:04:28.595Z]   Has peeked: true
[2025-03-21T19:04:28.595Z]   Used Monty Hall: false
[2025-03-21T19:04:28.595Z]   Action nonce: 1
[2025-03-21T19:04:28.905Z] Player 3 (0xd2e443F6CF19d5d359e82bbEea76e1133028fda5):
[2025-03-21T19:04:28.906Z]   Chip balance: 18
[2025-03-21T19:04:28.906Z]   Has peeked: false
[2025-03-21T19:04:28.906Z]   Used Monty Hall: true
[2025-03-21T19:04:28.906Z]   Action nonce: 2
[2025-03-21T19:04:29.224Z] Player 4 (0x7B7057B07218fa9f357E39cb2fC2E723C2bfcf9F):
[2025-03-21T19:04:29.225Z]   Chip balance: 25
[2025-03-21T19:04:29.225Z]   Has peeked: false
[2025-03-21T19:04:29.225Z]   Used Monty Hall: false
[2025-03-21T19:04:29.225Z]   Action nonce: 0
[2025-03-21T19:04:29.225Z] 
----- WAITING FOR PEEK PHASE TO END -----
[2025-03-21T19:04:29.524Z] Waiting 99 seconds for peek phase to end...
[2025-03-21T19:04:29.524Z] Waiting for peek phase to end on TEN network...
[2025-03-21T19:06:09.537Z] Peek phase ended
[2025-03-21T19:06:09.538Z] 
----- ENDING PEEK PHASE -----
[2025-03-21T19:06:10.639Z] endPeekPhase transaction submitted, waiting for confirmation...
[2025-03-21T19:06:11.654Z] endPeekPhase transaction confirmed!
[2025-03-21T19:06:11.655Z] Buffer period started before betting phase. Current state: PEEK_PHASE, Next state: BETTING
[2025-03-21T19:06:11.658Z] Betting phase started for game 1
[2025-03-21T19:06:11.659Z] Game state updated: State=BETTING, Pot=0, CurrentBet=0, StateVersion=3
[2025-03-21T19:06:11.975Z] Phase end time: 2025-03-21T19:11:41.000Z
[2025-03-21T19:06:11.976Z] Buffer end time: 2025-03-21T19:06:41.000Z
[2025-03-21T19:06:11.976Z] Waiting 30 seconds for buffer period to end...
[2025-03-21T19:06:11.976Z] Waiting for buffer period to end on TEN network...
[2025-03-21T19:06:21.977Z] 20 seconds remaining in buffer period
[2025-03-21T19:06:31.980Z] 10 seconds remaining in buffer period
[2025-03-21T19:06:41.983Z] Buffer period ended
[2025-03-21T19:06:41.983Z] 
----- PLAYERS PLACING BETS -----
[2025-03-21T19:06:47.620Z] Player 1 (0x9Fde625ED8A6eC0f3cA393A62be34231a5c167F4) bet 5 chips
[2025-03-21T19:06:47.896Z] Pot after bet 1: 5, Current bet: 5
[2025-03-21T19:06:49.313Z] Player 2 (0x0Fae37437c1347c23dc279b424663579d2df67df) bet 5 chips
[2025-03-21T19:06:49.607Z] Pot after bet 2: 10, Current bet: 5
[2025-03-21T19:06:51.627Z] Player 3 (0xd2e443F6CF19d5d359e82bbEea76e1133028fda5) bet 10 chips (raising to 10)
[2025-03-21T19:06:51.912Z] Pot after bet 3: 20, Current bet: 10
[2025-03-21T19:06:55.594Z] Player 1 (0x9Fde625ED8A6eC0f3cA393A62be34231a5c167F4) bet additional 5 chips (calling the raise)
[2025-03-21T19:06:55.870Z] Pot after bet 4: 25, Current bet: 10
[2025-03-21T19:06:57.292Z] Player 2 (0x0Fae37437c1347c23dc279b424663579d2df67df) bet additional 5 chips (calling the raise)
[2025-03-21T19:06:57.570Z] Pot after bet 5: 30, Current bet: 10
[2025-03-21T19:06:59.588Z] Player 4 (0x7B7057B07218fa9f357E39cb2fC2E723C2bfcf9F) folded
[2025-03-21T19:06:59.867Z] Active players after fold: 4
[2025-03-21T19:06:59.867Z] 
----- PLAYER STATUS AFTER BETTING -----
[2025-03-21T19:07:00.148Z] Player 1 (0x9Fde625ED8A6eC0f3cA393A62be34231a5c167F4):
[2025-03-21T19:07:00.148Z]   Chip balance: 10
[2025-03-21T19:07:00.148Z]   Current bet: 10
[2025-03-21T19:07:00.148Z]   Has folded: false
[2025-03-21T19:07:00.148Z]   Action nonce: 3
[2025-03-21T19:07:00.442Z] Player 2 (0x0Fae37437c1347c23dc279b424663579d2df67df):
[2025-03-21T19:07:00.442Z]   Chip balance: 10
[2025-03-21T19:07:00.442Z]   Current bet: 10
[2025-03-21T19:07:00.442Z]   Has folded: false
[2025-03-21T19:07:00.442Z]   Action nonce: 3
[2025-03-21T19:07:00.737Z] Player 3 (0xd2e443F6CF19d5d359e82bbEea76e1133028fda5):
[2025-03-21T19:07:00.738Z]   Chip balance: 8
[2025-03-21T19:07:00.738Z]   Current bet: 10
[2025-03-21T19:07:00.738Z]   Has folded: false
[2025-03-21T19:07:00.738Z]   Action nonce: 3
[2025-03-21T19:07:01.039Z] Player 4 (0x7B7057B07218fa9f357E39cb2fC2E723C2bfcf9F):
[2025-03-21T19:07:01.040Z]   Chip balance: 25
[2025-03-21T19:07:01.040Z]   Current bet: 0
[2025-03-21T19:07:01.040Z]   Has folded: true
[2025-03-21T19:07:01.040Z]   Action nonce: 1
[2025-03-21T19:07:01.319Z] Have all active players matched the current bet? false
[2025-03-21T19:07:01.320Z] 
----- WAITING FOR BETTING PHASE TO END -----
[2025-03-21T19:07:01.597Z] Betting phase ends in 280 seconds at 2025-03-21T19:11:41.000Z
[2025-03-21T19:07:01.597Z] All players have matched bets, manually ending betting phase...
[2025-03-21T19:07:01.597Z] 
----- CHECKING GAME STATE BEFORE ENDING BETTING PHASE -----
[2025-03-21T19:07:01.879Z] Current game state: BETTING
[2025-03-21T19:07:01.879Z] Phase end time: 2025-03-21T19:11:41.000Z
[2025-03-21T19:07:01.879Z] Current time: 2025-03-21T19:07:01.879Z
[2025-03-21T19:07:01.879Z] Buffer end time: 2025-03-21T19:06:41.000Z
[2025-03-21T19:07:01.879Z] Is in buffer period: false
[2025-03-21T19:07:01.879Z] Is phase ended: false
[2025-03-21T19:07:02.179Z] Is caller (0x1dA9aCB41763f97F744Da547F2d103042e8Ab239) a keeper: true
[2025-03-21T19:07:02.180Z] Betting phase hasn't ended yet. Waiting 279 seconds...
[2025-03-21T19:07:02.180Z] Waiting for phase to end on TEN network...
[2025-03-21T19:10:20.868Z] 
===== SETTING UP TEST ENVIRONMENT =====
[2025-03-21T19:10:20.903Z] Wallet setup complete.
[2025-03-21T19:10:20.903Z] Owner address: 0x1dA9aCB41763f97F744Da547F2d103042e8Ab239
[2025-03-21T19:10:20.904Z] Player 1 address: 0x9Fde625ED8A6eC0f3cA393A62be34231a5c167F4
[2025-03-21T19:10:20.904Z] Player 2 address: 0x0Fae37437c1347c23dc279b424663579d2df67df
[2025-03-21T19:10:20.904Z] Player 3 address: 0xd2e443F6CF19d5d359e82bbEea76e1133028fda5
[2025-03-21T19:10:20.904Z] Player 4 address: 0x7B7057B07218fa9f357E39cb2fC2E723C2bfcf9F
[2025-03-21T19:10:20.904Z] Spectator 1 address: 0x1dA9aCB41763f97F744Da547F2d103042e8Ab239
[2025-03-21T19:10:20.904Z] Spectator 2 address: 0x52731AEDA26AB8D159226C51180a7542a4287500
[2025-03-21T19:10:20.904Z] Spectator 3 address: 0x45ab32ec402D51096398aA4e6a7aF03180E50bD0
[2025-03-21T19:10:20.904Z] Keeper address: 0x1dA9aCB41763f97F744Da547F2d103042e8Ab239
[2025-03-21T19:10:20.904Z] 
----- CHECKING WALLET BALANCES -----
[2025-03-21T19:10:21.954Z] Address 0x1dA9aCB41763f97F744Da547F2d103042e8Ab239 has 0.48576003454 ETH
[2025-03-21T19:10:22.245Z] Address 0x9Fde625ED8A6eC0f3cA393A62be34231a5c167F4 has 0.9854124441 ETH
[2025-03-21T19:10:22.537Z] Address 0x0Fae37437c1347c23dc279b424663579d2df67df has 0.7382861879 ETH
[2025-03-21T19:10:22.828Z] Address 0xd2e443F6CF19d5d359e82bbEea76e1133028fda5 has 0.4867843877 ETH
[2025-03-21T19:10:23.118Z] Address 0x7B7057B07218fa9f357E39cb2fC2E723C2bfcf9F has 0.7392757006 ETH
[2025-03-21T19:10:23.395Z] Address 0x1dA9aCB41763f97F744Da547F2d103042e8Ab239 has 0.48576003454 ETH
[2025-03-21T19:10:23.674Z] Address 0x52731AEDA26AB8D159226C51180a7542a4287500 has 0.6955707676 ETH
[2025-03-21T19:10:23.952Z] Address 0x45ab32ec402D51096398aA4e6a7aF03180E50bD0 has 0.6789095292 ETH
[2025-03-21T19:10:24.238Z] Address 0x1dA9aCB41763f97F744Da547F2d103042e8Ab239 has 0.48576003454 ETH
[2025-03-21T19:10:24.238Z] 
----- DEPLOYING CONTRACTS -----
[2025-03-21T19:10:24.238Z] Deploying CardLibrary...
[2025-03-21T19:10:26.303Z] CardLibrary deployed at: 0x8e178Ab3284F0a98274d54E1bad7a41bb9DC90a1
[2025-03-21T19:10:26.303Z] Deploying GameLibrary...
[2025-03-21T19:10:32.236Z] GameLibrary deployed at: 0x3e40A03F75E5ee4E9a9324E131a878F9fcfEb877
[2025-03-21T19:10:32.236Z] Deploying OneCard main contract...
[2025-03-21T19:10:38.944Z] OneCard contract deployed at: 0x51Ec30f47dD6978dd355863a4585Fd18d3a5489A
[2025-03-21T19:10:38.944Z] Deploying PokerSpectatorView contract...
[2025-03-21T19:10:45.168Z] PokerSpectatorView contract deployed at: 0xEc58B0610b1082F9c7a8D53d46Eb28FdBA4706E5
[2025-03-21T19:10:45.168Z] Deploying SpectatorBetting contract...
[2025-03-21T19:10:51.329Z] SpectatorBetting contract deployed at: 0xfAfDb1a11B371C7F3dbbb4FBDEFfE5a835237996
[2025-03-21T19:10:51.329Z] Setting spectator betting contract in OneCard contract...
[2025-03-21T19:10:57.447Z] SpectatorBetting contract set in OneCard
[2025-03-21T19:10:57.448Z] 
Add these to your .env file for future use:
[2025-03-21T19:10:57.448Z] POKER_CONTRACT_ADDRESS=0x51Ec30f47dD6978dd355863a4585Fd18d3a5489A
[2025-03-21T19:10:57.448Z] SPECTATOR_CONTRACT_ADDRESS=0xEc58B0610b1082F9c7a8D53d46Eb28FdBA4706E5
[2025-03-21T19:10:57.448Z] SPECTATOR_BETTING_ADDRESS=0xfAfDb1a11B371C7F3dbbb4FBDEFfE5a835237996
[2025-03-21T19:10:57.452Z] 
===== STARTING ONE CARD POKER WITH MONTY HALL AND SPECTATOR BETTING TEST =====
[2025-03-21T19:10:57.452Z] 
----- ADDING PLAYERS TO WHITELIST -----
[2025-03-21T19:11:03.852Z] Added 4 players to whitelist
[2025-03-21T19:11:03.853Z] 
----- CREATING A NEW GAME -----
[2025-03-21T19:11:10.142Z] Created Game with ID: 1
[2025-03-21T19:11:10.440Z] Initial players in game: 5
[2025-03-21T19:11:10.441Z] Player 1: 0x1dA9aCB41763f97F744Da547F2d103042e8Ab239
[2025-03-21T19:11:10.441Z] Player 2: 0x9Fde625ED8A6eC0f3cA393A62be34231a5c167F4
[2025-03-21T19:11:10.441Z] Player 3: 0x0Fae37437c1347c23dc279b424663579d2df67df
[2025-03-21T19:11:10.441Z] Player 4: 0xd2e443F6CF19d5d359e82bbEea76e1133028fda5
[2025-03-21T19:11:10.442Z] Player 5: 0x7B7057B07218fa9f357E39cb2fC2E723C2bfcf9F
[2025-03-21T19:11:10.442Z] 
----- VERIFYING GAME INFO BEFORE SPECTATOR BETTING -----
[2025-03-21T19:11:10.733Z] Game state: REGISTRATION
[2025-03-21T19:11:10.733Z] Player count: 5
[2025-03-21T19:11:10.733Z] Active count: 5
[2025-03-21T19:11:10.733Z] Game keeper: 0x1dA9aCB41763f97F744Da547F2d103042e8Ab239
[2025-03-21T19:11:10.733Z] State version: 1
[2025-03-21T19:11:10.733Z] Is cleaned up: false
[2025-03-21T19:11:10.733Z] 
----- CHECKING IF BETTING IS OPEN -----
[2025-03-21T19:11:11.029Z] Betting open: true
[2025-03-21T19:11:11.030Z] Results processed: false
[2025-03-21T19:11:11.030Z] Total bet amount: 0.0 ETH
[2025-03-21T19:11:11.030Z] 
----- SPECTATORS PLACING BETS -----
[2025-03-21T19:11:14.600Z] Spectator 1 (0x1dA9aCB41763f97F744Da547F2d103042e8Ab239) bet 0.01 ETH on Player 1 (0x9Fde625ED8A6eC0f3cA393A62be34231a5c167F4)
[2025-03-21T19:11:14.878Z] Verified bet - Player: 0x9Fde625ED8A6eC0f3cA393A62be34231a5c167F4, Amount: 0.01 ETH, Claimed: false
[2025-03-21T19:11:16.293Z] Spectator 2 (0x52731AEDA26AB8D159226C51180a7542a4287500) bet 0.01 ETH on Player 2 (0x0Fae37437c1347c23dc279b424663579d2df67df)
[2025-03-21T19:11:16.578Z] Verified bet - Player: 0x0Fae37437c1347c23dc279b424663579d2df67df, Amount: 0.01 ETH, Claimed: false
[2025-03-21T19:11:18.589Z] Spectator 3 (0x45ab32ec402D51096398aA4e6a7aF03180E50bD0) bet 0.01 ETH on Player 3 (0xd2e443F6CF19d5d359e82bbEea76e1133028fda5)
[2025-03-21T19:11:18.629Z] Spectator 0x52731AEDA26AB8D159226C51180a7542a4287500 placed a bet of 0.01 ETH on player 0x0Fae37437c1347c23dc279b424663579d2df67df
[2025-03-21T19:11:18.629Z] Spectator 0x45ab32ec402D51096398aA4e6a7aF03180E50bD0 placed a bet of 0.01 ETH on player 0xd2e443F6CF19d5d359e82bbEea76e1133028fda5
[2025-03-21T19:11:19.096Z] Verified bet - Player: 0xd2e443F6CF19d5d359e82bbEea76e1133028fda5, Amount: 0.01 ETH, Claimed: false
[2025-03-21T19:11:19.097Z] 
----- CHECKING TOTAL BETS ON EACH PLAYER -----
[2025-03-21T19:11:19.422Z] Total bet on Player 1 (0x9Fde625ED8A6eC0f3cA393A62be34231a5c167F4): 0.01 ETH
[2025-03-21T19:11:19.735Z] Total bet on Player 2 (0x0Fae37437c1347c23dc279b424663579d2df67df): 0.01 ETH
[2025-03-21T19:11:20.024Z] Total bet on Player 3 (0xd2e443F6CF19d5d359e82bbEea76e1133028fda5): 0.01 ETH
[2025-03-21T19:11:20.321Z] Total bet on Player 4 (0x7B7057B07218fa9f357E39cb2fC2E723C2bfcf9F): 0.0 ETH
[2025-03-21T19:11:20.603Z] Total betting pool: 0.03 ETH
[2025-03-21T19:11:20.604Z] 
----- STARTING PEEK PHASE -----
[2025-03-21T19:11:21.713Z] startPeekPhase transaction submitted, waiting for confirmation...
[2025-03-21T19:11:22.569Z] startPeekPhase transaction confirmed!
[2025-03-21T19:11:22.569Z] Buffer period started before peek phase. Current state: REGISTRATION, Next state: PEEK_PHASE
[2025-03-21T19:11:22.569Z] Peek phase started for game 1
[2025-03-21T19:11:22.569Z] Game state updated: State=PEEK_PHASE, Pot=0, CurrentBet=0, StateVersion=2
[2025-03-21T19:11:22.641Z] Betting closed for game 1
[2025-03-21T19:11:22.854Z] Betting open after peek phase start: false
[2025-03-21T19:11:23.137Z] Phase end time: 2025-03-21T19:13:52.000Z
[2025-03-21T19:11:23.137Z] Buffer end time: 2025-03-21T19:11:52.000Z
[2025-03-21T19:11:23.137Z] Waiting 29 seconds for buffer period to end...
[2025-03-21T19:11:23.137Z] Waiting for buffer period to end on TEN network...
[2025-03-21T19:11:53.146Z] Buffer period ended
[2025-03-21T19:11:53.150Z] 
----- PLAYERS PEEKING AT CARDS -----
[2025-03-21T19:11:53.436Z] Player 1 initial chip balance: 25
[2025-03-21T19:11:58.640Z] Player 1 (0x9Fde625ED8A6eC0f3cA393A62be34231a5c167F4) peeked at their card
[2025-03-21T19:11:58.640Z] Player action: peek, Amount: 5, Nonce: 1
[2025-03-21T19:11:58.701Z] Card for 0x9Fde625ED8A6eC0f3cA393A62be34231a5c167F4: 6 of Diamonds
[2025-03-21T19:11:58.945Z] Player 1 chip balance after peeking: 20
[2025-03-21T19:11:59.316Z] Player 2 initial chip balance: 25
[2025-03-21T19:12:02.702Z] Player 2 (0x0Fae37437c1347c23dc279b424663579d2df67df) peeked at their card
[2025-03-21T19:12:02.703Z] Player action: peek, Amount: 5, Nonce: 1
[2025-03-21T19:12:02.789Z] Card for 0x0Fae37437c1347c23dc279b424663579d2df67df: 4 of Hearts
[2025-03-21T19:12:03.001Z] Player 2 chip balance after peeking: 20
[2025-03-21T19:12:03.002Z] 
----- PLAYER USING MONTY HALL OPTION -----
[2025-03-21T19:12:03.277Z] Player 3 initial chip balance: 25
[2025-03-21T19:12:06.618Z] Player 3 (0xd2e443F6CF19d5d359e82bbEea76e1133028fda5) used Monty Hall option
[2025-03-21T19:12:06.619Z] Player action: montyHall, Amount: 7, Nonce: 1
[2025-03-21T19:12:06.667Z] Monty Hall cards revealed to 0xd2e443F6CF19d5d359e82bbEea76e1133028fda5:
[2025-03-21T19:12:06.668Z] - 4 of Spades
[2025-03-21T19:12:06.668Z] - Queen of Spades
[2025-03-21T19:12:06.898Z] Player 3 chip balance after using Monty Hall: 18
[2025-03-21T19:12:08.375Z] Player 3 decided to swap their card
[2025-03-21T19:12:08.375Z] Player action: swapCard, Amount: 0, Nonce: 2
[2025-03-21T19:12:08.375Z] Player 4 (0x7B7057B07218fa9f357E39cb2fC2E723C2bfcf9F) chose not to peek or use Monty Hall
[2025-03-21T19:12:08.656Z] 
----- PLAYER STATUS AFTER PEEK PHASE -----
[2025-03-21T19:12:08.940Z] Player 1 (0x9Fde625ED8A6eC0f3cA393A62be34231a5c167F4):
[2025-03-21T19:12:08.940Z]   Chip balance: 20
[2025-03-21T19:12:08.940Z]   Has peeked: true
[2025-03-21T19:12:08.940Z]   Used Monty Hall: false
[2025-03-21T19:12:08.940Z]   Action nonce: 1
[2025-03-21T19:12:09.225Z] Player 2 (0x0Fae37437c1347c23dc279b424663579d2df67df):
[2025-03-21T19:12:09.225Z]   Chip balance: 20
[2025-03-21T19:12:09.225Z]   Has peeked: true
[2025-03-21T19:12:09.225Z]   Used Monty Hall: false
[2025-03-21T19:12:09.225Z]   Action nonce: 1
[2025-03-21T19:12:09.505Z] Player 3 (0xd2e443F6CF19d5d359e82bbEea76e1133028fda5):
[2025-03-21T19:12:09.505Z]   Chip balance: 18
[2025-03-21T19:12:09.505Z]   Has peeked: false
[2025-03-21T19:12:09.505Z]   Used Monty Hall: true
[2025-03-21T19:12:09.505Z]   Action nonce: 2
[2025-03-21T19:12:09.783Z] Player 4 (0x7B7057B07218fa9f357E39cb2fC2E723C2bfcf9F):
[2025-03-21T19:12:09.783Z]   Chip balance: 25
[2025-03-21T19:12:09.783Z]   Has peeked: false
[2025-03-21T19:12:09.783Z]   Used Monty Hall: false
[2025-03-21T19:12:09.784Z]   Action nonce: 0
[2025-03-21T19:12:09.784Z] 
----- WAITING FOR PEEK PHASE TO END -----
[2025-03-21T19:12:10.066Z] Waiting 102 seconds for peek phase to end...
[2025-03-21T19:12:10.066Z] Waiting for peek phase to end on TEN network...
[2025-03-21T19:12:10.658Z] 0xd2e443F6CF19d5d359e82bbEea76e1133028fda5 swapped 5 of Spades for King of Hearts
[2025-03-21T19:14:00.081Z] Peek phase ended
[2025-03-21T19:14:00.082Z] 
----- ENDING PEEK PHASE -----
[2025-03-21T19:14:01.214Z] endPeekPhase transaction submitted, waiting for confirmation...
[2025-03-21T19:14:02.600Z] endPeekPhase transaction confirmed!
[2025-03-21T19:14:02.600Z] Buffer period started before betting phase. Current state: PEEK_PHASE, Next state: BETTING
[2025-03-21T19:14:02.600Z] Betting phase started for game 1
[2025-03-21T19:14:02.600Z] Game state updated: State=BETTING, Pot=0, CurrentBet=0, StateVersion=3
[2025-03-21T19:14:02.879Z] Phase end time: 2025-03-21T19:19:32.000Z
[2025-03-21T19:14:02.879Z] Buffer end time: 2025-03-21T19:14:32.000Z
[2025-03-21T19:14:02.879Z] Waiting 30 seconds for buffer period to end...
[2025-03-21T19:14:02.879Z] Waiting for buffer period to end on TEN network...
[2025-03-21T19:14:12.881Z] 20 seconds remaining in buffer period
[2025-03-21T19:14:22.885Z] 10 seconds remaining in buffer period
[2025-03-21T19:14:32.887Z] Buffer period ended
[2025-03-21T19:14:32.888Z] 
----- PLAYERS PLACING BETS -----
[2025-03-21T19:14:34.333Z] Player 1 (0x9Fde625ED8A6eC0f3cA393A62be34231a5c167F4) bet 5 chips
[2025-03-21T19:14:34.903Z] Pot after bet 1: 5, Current bet: 5
[2025-03-21T19:14:38.674Z] Player 2 (0x0Fae37437c1347c23dc279b424663579d2df67df) bet 5 chips
[2025-03-21T19:14:38.961Z] Pot after bet 2: 10, Current bet: 5
[2025-03-21T19:14:42.620Z] Player 3 (0xd2e443F6CF19d5d359e82bbEea76e1133028fda5) bet 10 chips (raising to 10)
[2025-03-21T19:14:42.949Z] Pot after bet 3: 20, Current bet: 10
[2025-03-21T19:14:46.623Z] Player 1 (0x9Fde625ED8A6eC0f3cA393A62be34231a5c167F4) bet additional 5 chips (calling the raise)
[2025-03-21T19:14:46.623Z] Player action: bet, Amount: 5, Nonce: 3
[2025-03-21T19:14:46.901Z] Pot after bet 4: 25, Current bet: 10
[2025-03-21T19:14:50.714Z] Player 2 (0x0Fae37437c1347c23dc279b424663579d2df67df) bet additional 5 chips (calling the raise)
[2025-03-21T19:14:51.016Z] Pot after bet 5: 30, Current bet: 10
[2025-03-21T19:14:54.634Z] Player 4 (0x7B7057B07218fa9f357E39cb2fC2E723C2bfcf9F) folded
[2025-03-21T19:14:54.918Z] Active players after fold: 4
[2025-03-21T19:14:54.918Z] 
----- PLAYER STATUS AFTER BETTING -----
[2025-03-21T19:14:55.235Z] Player 1 (0x9Fde625ED8A6eC0f3cA393A62be34231a5c167F4):
[2025-03-21T19:14:55.235Z]   Chip balance: 10
[2025-03-21T19:14:55.235Z]   Current bet: 10
[2025-03-21T19:14:55.235Z]   Has folded: false
[2025-03-21T19:14:55.235Z]   Action nonce: 3
[2025-03-21T19:14:55.546Z] Player 2 (0x0Fae37437c1347c23dc279b424663579d2df67df):
[2025-03-21T19:14:55.546Z]   Chip balance: 10
[2025-03-21T19:14:55.546Z]   Current bet: 10
[2025-03-21T19:14:55.546Z]   Has folded: false
[2025-03-21T19:14:55.546Z]   Action nonce: 3
[2025-03-21T19:14:55.859Z] Player 3 (0xd2e443F6CF19d5d359e82bbEea76e1133028fda5):
[2025-03-21T19:14:55.860Z]   Chip balance: 8
[2025-03-21T19:14:55.860Z]   Current bet: 10
[2025-03-21T19:14:55.860Z]   Has folded: false
[2025-03-21T19:14:55.860Z]   Action nonce: 3
[2025-03-21T19:14:56.220Z] Player 4 (0x7B7057B07218fa9f357E39cb2fC2E723C2bfcf9F):
[2025-03-21T19:14:56.220Z]   Chip balance: 25
[2025-03-21T19:14:56.220Z]   Current bet: 0
[2025-03-21T19:14:56.220Z]   Has folded: true
[2025-03-21T19:14:56.220Z]   Action nonce: 1
[2025-03-21T19:14:56.524Z] Have all active players matched the current bet? false
[2025-03-21T19:14:56.525Z] 
----- WAITING FOR BETTING PHASE TO END -----
[2025-03-21T19:14:56.807Z] Betting phase ends in 276 seconds at 2025-03-21T19:19:32.000Z
[2025-03-21T19:14:56.807Z] All players have matched bets, manually ending betting phase...
[2025-03-21T19:14:56.807Z] 
----- CHECKING GAME STATE BEFORE ENDING BETTING PHASE -----
[2025-03-21T19:14:57.082Z] Current game state: BETTING
[2025-03-21T19:14:57.082Z] Phase end time: 2025-03-21T19:19:32.000Z
[2025-03-21T19:14:57.082Z] Current time: 2025-03-21T19:14:57.082Z
[2025-03-21T19:14:57.082Z] Buffer end time: 2025-03-21T19:14:32.000Z
[2025-03-21T19:14:57.083Z] Is in buffer period: false
[2025-03-21T19:14:57.083Z] Is phase ended: false
[2025-03-21T19:14:57.393Z] Is caller (0x1dA9aCB41763f97F744Da547F2d103042e8Ab239) a keeper: true
[2025-03-21T19:14:57.393Z] Betting phase hasn't ended yet. Waiting 275 seconds...
[2025-03-21T19:14:57.393Z] Waiting for phase to end on TEN network...
[2025-03-21T19:15:02.394Z] 270 seconds remaining until phase ends
[2025-03-21T19:15:12.397Z] 260 seconds remaining until phase ends
[2025-03-21T19:15:22.401Z] 250 seconds remaining until phase ends
[2025-03-21T19:15:32.404Z] 240 seconds remaining until phase ends
[2025-03-21T19:15:42.406Z] 230 seconds remaining until phase ends
[2025-03-21T19:15:52.410Z] 220 seconds remaining until phase ends
[2025-03-21T19:16:02.414Z] 210 seconds remaining until phase ends
[2025-03-21T19:16:12.417Z] 200 seconds remaining until phase ends
[2025-03-21T19:16:22.419Z] 190 seconds remaining until phase ends
[2025-03-21T19:16:32.423Z] 180 seconds remaining until phase ends
[2025-03-21T19:16:42.425Z] 170 seconds remaining until phase ends
[2025-03-21T19:16:52.428Z] 160 seconds remaining until phase ends
[2025-03-21T19:17:02.431Z] 150 seconds remaining until phase ends
[2025-03-21T19:17:12.433Z] 140 seconds remaining until phase ends
[2025-03-21T19:17:22.436Z] 130 seconds remaining until phase ends
[2025-03-21T19:17:32.438Z] 120 seconds remaining until phase ends
[2025-03-21T19:17:42.441Z] 110 seconds remaining until phase ends
[2025-03-21T19:17:52.444Z] 100 seconds remaining until phase ends
[2025-03-21T19:18:02.447Z] 90 seconds remaining until phase ends
[2025-03-21T19:18:12.450Z] 80 seconds remaining until phase ends
[2025-03-21T19:18:22.453Z] 70 seconds remaining until phase ends
[2025-03-21T19:18:32.455Z] 60 seconds remaining until phase ends
[2025-03-21T19:18:42.460Z] 50 seconds remaining until phase ends
[2025-03-21T19:18:52.464Z] 40 seconds remaining until phase ends
[2025-03-21T19:19:02.467Z] 30 seconds remaining until phase ends
[2025-03-21T19:19:12.469Z] 20 seconds remaining until phase ends
[2025-03-21T19:19:22.472Z] 10 seconds remaining until phase ends
[2025-03-21T19:19:32.475Z] Betting phase has now ended
[2025-03-21T19:19:32.758Z] Game state after waiting: BETTING
[2025-03-21T19:19:32.758Z] Updated phase end time: 2025-03-21T19:19:32.000Z
[2025-03-21T19:19:32.758Z] Updated buffer end time: 2025-03-21T19:14:32.000Z
[2025-03-21T19:19:32.758Z] 
----- ENDING BETTING PHASE -----
[2025-03-21T19:19:33.911Z] endBettingPhase transaction submitted, waiting for confirmation...
[2025-03-21T19:19:34.715Z] endBettingPhase transaction confirmed!
[2025-03-21T19:19:34.716Z] Showdown phase started
[2025-03-21T19:19:34.716Z] Game ended event not found in transaction logs - waiting for async event
[2025-03-21T19:19:34.880Z] Betting results processed for game 1, winner: 0xd2e443F6CF19d5d359e82bbEea76e1133028fda5
[2025-03-21T19:19:34.906Z] Card for 0x1dA9aCB41763f97F744Da547F2d103042e8Ab239: 4 of Diamonds
[2025-03-21T19:19:34.907Z] Card for 0x9Fde625ED8A6eC0f3cA393A62be34231a5c167F4: 6 of Diamonds
[2025-03-21T19:19:34.907Z] Card for 0x0Fae37437c1347c23dc279b424663579d2df67df: 4 of Hearts
[2025-03-21T19:19:34.907Z] Card for 0xd2e443F6CF19d5d359e82bbEea76e1133028fda5: King of Hearts
[2025-03-21T19:19:35.050Z] 
===== GAME ENDED EVENT CAPTURED =====
[2025-03-21T19:19:35.050Z] Winner: 0xd2e443F6CF19d5d359e82bbEea76e1133028fda5
[2025-03-21T19:19:35.050Z] Pot Amount: 30 chips
[2025-03-21T19:19:35.051Z] Player 3 (0xd2e443F6CF19d5d359e82bbEea76e1133028fda5) won the game!
[2025-03-21T19:19:35.051Z] Async winner detection: 0xd2e443F6CF19d5d359e82bbEea76e1133028fda5
[2025-03-21T19:19:35.051Z] Final game state: State=SHOWDOWN, Pot=30, CurrentBet=10, StateVersion=4
[2025-03-21T19:19:35.051Z] 
----- REVEALED CARDS DURING SHOWDOWN -----
[2025-03-21T19:19:35.346Z] Error getting revealed cards: cardValues[i].toNumber is not a function
[2025-03-21T19:19:35.346Z] 
----- FINAL GAME STATE -----
[2025-03-21T19:19:35.658Z] Game state: ENDED
[2025-03-21T19:19:35.658Z] Pot amount: 0
[2025-03-21T19:19:35.658Z] State version: 5
[2025-03-21T19:19:35.658Z] Is cleaned up: false
[2025-03-21T19:19:35.658Z] 
----- FINAL PLAYER BALANCES -----
[2025-03-21T19:19:35.943Z] Player 1 (0x9Fde625ED8A6eC0f3cA393A62be34231a5c167F4):
[2025-03-21T19:19:35.944Z]   Initial balance: 25
[2025-03-21T19:19:35.944Z]   Final balance: 10
[2025-03-21T19:19:35.944Z]   Difference: -15
[2025-03-21T19:19:36.247Z] Player 2 (0x0Fae37437c1347c23dc279b424663579d2df67df):
[2025-03-21T19:19:36.248Z]   Initial balance: 25
[2025-03-21T19:19:36.248Z]   Final balance: 10
[2025-03-21T19:19:36.248Z]   Difference: -15
[2025-03-21T19:19:36.526Z] Player 3 (0xd2e443F6CF19d5d359e82bbEea76e1133028fda5):
[2025-03-21T19:19:36.526Z]   Initial balance: 25
[2025-03-21T19:19:36.526Z]   Final balance: 38
[2025-03-21T19:19:36.526Z]   Difference: 13
[2025-03-21T19:19:36.526Z] *** Player 3 gained 13 chips - WINNER! ***
[2025-03-21T19:19:36.802Z] Player 4 (0x7B7057B07218fa9f357E39cb2fC2E723C2bfcf9F):
[2025-03-21T19:19:36.802Z]   Initial balance: 25
[2025-03-21T19:19:36.802Z]   Final balance: 25
[2025-03-21T19:19:36.802Z]   Difference: 0
[2025-03-21T19:19:36.802Z] 
----- SPECTATOR BETTING RESULTS -----
[2025-03-21T19:19:37.085Z] Betting results processed: true
[2025-03-21T19:19:37.085Z] Game winner: 0xd2e443F6CF19d5d359e82bbEea76e1133028fda5
[2025-03-21T19:19:37.086Z] Total betting pool: 0.03 ETH
[2025-03-21T19:19:37.086Z] 
----- SPECTATOR WINNINGS CHECK -----
[2025-03-21T19:19:37.679Z] Spectator 1 (0x1dA9aCB41763f97F744Da547F2d103042e8Ab239):
[2025-03-21T19:19:37.680Z]   Bet on: 0x9Fde625ED8A6eC0f3cA393A62be34231a5c167F4
[2025-03-21T19:19:37.681Z]   Bet amount: 0.01 ETH
[2025-03-21T19:19:37.681Z]   Has winnings: false
[2025-03-21T19:19:38.262Z] Spectator 2 (0x52731AEDA26AB8D159226C51180a7542a4287500):
[2025-03-21T19:19:38.262Z]   Bet on: 0x0Fae37437c1347c23dc279b424663579d2df67df
[2025-03-21T19:19:38.263Z]   Bet amount: 0.01 ETH
[2025-03-21T19:19:38.263Z]   Has winnings: false
[2025-03-21T19:19:38.825Z] Spectator 3 (0x45ab32ec402D51096398aA4e6a7aF03180E50bD0):
[2025-03-21T19:19:38.825Z]   Bet on: 0xd2e443F6CF19d5d359e82bbEea76e1133028fda5
[2025-03-21T19:19:38.825Z]   Bet amount: 0.01 ETH
[2025-03-21T19:19:38.825Z]   Has winnings: true
[2025-03-21T19:19:38.826Z]   Winnings amount: 0.03 ETH
[2025-03-21T19:19:38.826Z] 
----- SPECTATORS CLAIMING WINNINGS -----
[2025-03-21T19:19:42.709Z] Spectator 1 (0x1dA9aCB41763f97F744Da547F2d103042e8Ab239) marked bet as claimed (no winnings)
[2025-03-21T19:19:42.993Z]   Bet now marked as claimed: true
[2025-03-21T19:19:46.729Z] Spectator 2 (0x52731AEDA26AB8D159226C51180a7542a4287500) marked bet as claimed (no winnings)
[2025-03-21T19:19:47.010Z]   Bet now marked as claimed: true
[2025-03-21T19:19:50.827Z] Spectator 0x45ab32ec402D51096398aA4e6a7aF03180E50bD0 claimed 0.03 ETH in winnings
[2025-03-21T19:19:50.997Z] Spectator 3 (0x45ab32ec402D51096398aA4e6a7aF03180E50bD0) successfully claimed 0.030004032 ETH
[2025-03-21T19:19:51.301Z]   Bet now marked as claimed: true
[2025-03-21T19:19:51.301Z] 
----- CLEANING UP THE GAME -----
[2025-03-21T19:19:54.732Z] Game cleaned up successfully
[2025-03-21T19:19:55.024Z] Game is cleaned up: true
[2025-03-21T19:19:55.025Z] Game is no longer spectatable
[2025-03-21T19:19:55.025Z] Final state update: State=ENDED, StateVersion=6
[2025-03-21T19:19:55.025Z] 
===== ONE CARD POKER WITH MONTY HALL AND SPECTATOR BETTING TEST COMPLETED =====
[2025-03-22T05:19:26.698Z] 
===== SETTING UP TEST ENVIRONMENT =====
[2025-03-22T05:19:26.779Z] Wallet setup complete.
[2025-03-22T05:19:26.779Z] Owner address: 0x1dA9aCB41763f97F744Da547F2d103042e8Ab239
[2025-03-22T05:19:26.779Z] Player 1 address: 0x9Fde625ED8A6eC0f3cA393A62be34231a5c167F4
[2025-03-22T05:19:26.779Z] Player 2 address: 0x0Fae37437c1347c23dc279b424663579d2df67df
[2025-03-22T05:19:26.779Z] Player 3 address: 0xd2e443F6CF19d5d359e82bbEea76e1133028fda5
[2025-03-22T05:19:26.779Z] Player 4 address: 0x7B7057B07218fa9f357E39cb2fC2E723C2bfcf9F
[2025-03-22T05:19:26.779Z] Spectator 1 address: 0x1dA9aCB41763f97F744Da547F2d103042e8Ab239
[2025-03-22T05:19:26.779Z] Spectator 2 address: 0x52731AEDA26AB8D159226C51180a7542a4287500
[2025-03-22T05:19:26.779Z] Spectator 3 address: 0x45ab32ec402D51096398aA4e6a7aF03180E50bD0
[2025-03-22T05:19:26.779Z] Keeper address: 0x1dA9aCB41763f97F744Da547F2d103042e8Ab239
[2025-03-22T05:19:26.779Z] 
----- CHECKING WALLET BALANCES -----
[2025-03-22T05:19:28.370Z] Address 0x1dA9aCB41763f97F744Da547F2d103042e8Ab239 has 0.45917486674 ETH
[2025-03-22T05:19:28.658Z] Address 0x9Fde625ED8A6eC0f3cA393A62be34231a5c167F4 has 0.9849704437 ETH
[2025-03-22T05:19:28.952Z] Address 0x0Fae37437c1347c23dc279b424663579d2df67df has 0.737903227 ETH
[2025-03-22T05:19:29.234Z] Address 0xd2e443F6CF19d5d359e82bbEea76e1133028fda5 has 0.4861772024 ETH
[2025-03-22T05:19:29.512Z] Address 0x7B7057B07218fa9f357E39cb2fC2E723C2bfcf9F has 0.7391438129 ETH
[2025-03-22T05:19:29.783Z] Address 0x1dA9aCB41763f97F744Da547F2d103042e8Ab239 has 0.45917486674 ETH
[2025-03-22T05:19:30.056Z] Address 0x52731AEDA26AB8D159226C51180a7542a4287500 has 0.6853247327 ETH
[2025-03-22T05:19:30.328Z] Address 0x45ab32ec402D51096398aA4e6a7aF03180E50bD0 has 0.6986419957 ETH
[2025-03-22T05:19:30.599Z] Address 0x1dA9aCB41763f97F744Da547F2d103042e8Ab239 has 0.45917486674 ETH
[2025-03-22T05:19:30.599Z] 
----- DEPLOYING CONTRACTS -----
[2025-03-22T05:19:30.599Z] Deploying CardLibrary...
[2025-03-22T05:23:26.146Z] 
===== SETTING UP TEST ENVIRONMENT =====
[2025-03-22T05:23:26.184Z] Wallet setup complete.
[2025-03-22T05:23:26.184Z] Owner address: 0x1dA9aCB41763f97F744Da547F2d103042e8Ab239
[2025-03-22T05:23:26.184Z] Player 1 address: 0x9Fde625ED8A6eC0f3cA393A62be34231a5c167F4
[2025-03-22T05:23:26.184Z] Player 2 address: 0x0Fae37437c1347c23dc279b424663579d2df67df
[2025-03-22T05:23:26.184Z] Player 3 address: 0xd2e443F6CF19d5d359e82bbEea76e1133028fda5
[2025-03-22T05:23:26.184Z] Player 4 address: 0x7B7057B07218fa9f357E39cb2fC2E723C2bfcf9F
[2025-03-22T05:23:26.184Z] Spectator 1 address: 0x1dA9aCB41763f97F744Da547F2d103042e8Ab239
[2025-03-22T05:23:26.184Z] Spectator 2 address: 0x52731AEDA26AB8D159226C51180a7542a4287500
[2025-03-22T05:23:26.184Z] Spectator 3 address: 0x45ab32ec402D51096398aA4e6a7aF03180E50bD0
[2025-03-22T05:23:26.184Z] Keeper address: 0x1dA9aCB41763f97F744Da547F2d103042e8Ab239
[2025-03-22T05:23:26.184Z] 
----- CHECKING WALLET BALANCES -----
[2025-03-22T05:23:26.875Z] Address 0x1dA9aCB41763f97F744Da547F2d103042e8Ab239 has 0.365391453449314387 ETH
[2025-03-22T05:23:27.121Z] Address 0x9Fde625ED8A6eC0f3cA393A62be34231a5c167F4 has 0.925527311054374705 ETH
[2025-03-22T05:23:27.399Z] Address 0x0Fae37437c1347c23dc279b424663579d2df67df has 0.924775629930008143 ETH
[2025-03-22T05:23:27.653Z] Address 0xd2e443F6CF19d5d359e82bbEea76e1133028fda5 has 0.977086585409729975 ETH
[2025-03-22T05:23:27.892Z] Address 0x7B7057B07218fa9f357E39cb2fC2E723C2bfcf9F has 1.917304171913267386 ETH
[2025-03-22T05:23:28.155Z] Address 0x1dA9aCB41763f97F744Da547F2d103042e8Ab239 has 0.365391453449314387 ETH
[2025-03-22T05:23:28.366Z] Address 0x52731AEDA26AB8D159226C51180a7542a4287500 has 1.0 ETH
[2025-03-22T05:23:28.644Z] Address 0x45ab32ec402D51096398aA4e6a7aF03180E50bD0 has 0.0 ETH
[2025-03-22T05:23:28.644Z] WARNING: Address 0x45ab32ec402D51096398aA4e6a7aF03180E50bD0 has low balance. Please fund with ETH.
[2025-03-22T05:23:28.944Z] Address 0x1dA9aCB41763f97F744Da547F2d103042e8Ab239 has 0.365391453449314387 ETH
[2025-03-22T05:23:28.945Z] 
----- DEPLOYING CONTRACTS -----
[2025-03-22T05:23:28.945Z] Deploying CardLibrary...
[2025-03-22T05:23:38.860Z] CardLibrary deployed at: 0x5DFf49c03E1129eDfFA8738e827BA61d07FaBe69
[2025-03-22T05:23:38.860Z] Deploying GameLibrary...
[2025-03-22T05:23:52.571Z] GameLibrary deployed at: 0xCafA2435CbE8a33154A730E645A3e41221B30262
[2025-03-22T05:23:52.572Z] Deploying OneCard main contract...
[2025-03-22T05:24:02.577Z] OneCard contract deployed at: 0x88fa5aA29BFd406Cd052595cCD8B1347913Aa1E7
[2025-03-22T05:24:02.578Z] Deploying PokerSpectatorView contract...
[2025-03-22T05:24:16.323Z] PokerSpectatorView contract deployed at: 0x604fCf5984a753dA4836Bf8E384636dD982397D7
[2025-03-22T05:24:16.324Z] Deploying SpectatorBetting contract...
[2025-03-22T05:24:26.022Z] SpectatorBetting contract deployed at: 0x97CeCD7Fc18EEDcEDa07b4450d58A365c28600D0
[2025-03-22T05:24:26.022Z] Setting spectator betting contract in OneCard contract...
[2025-03-22T05:24:39.761Z] SpectatorBetting contract set in OneCard
[2025-03-22T05:24:39.761Z] 
Add these to your .env file for future use:
[2025-03-22T05:24:39.761Z] POKER_CONTRACT_ADDRESS=0x88fa5aA29BFd406Cd052595cCD8B1347913Aa1E7
[2025-03-22T05:24:39.761Z] SPECTATOR_CONTRACT_ADDRESS=0x604fCf5984a753dA4836Bf8E384636dD982397D7
[2025-03-22T05:24:39.761Z] SPECTATOR_BETTING_ADDRESS=0x97CeCD7Fc18EEDcEDa07b4450d58A365c28600D0
[2025-03-22T05:24:39.765Z] 
===== STARTING ONE CARD POKER WITH MONTY HALL AND SPECTATOR BETTING TEST =====
[2025-03-22T05:24:39.765Z] 
----- ADDING PLAYERS TO WHITELIST -----
[2025-03-22T05:24:50.100Z] Added 4 players to whitelist
[2025-03-22T05:24:50.100Z] 
----- CREATING A NEW GAME -----
[2025-03-22T05:25:03.724Z] Created Game with ID: 1
[2025-03-22T05:25:03.987Z] Initial players in game: 5
[2025-03-22T05:25:03.987Z] Player 1: 0x1dA9aCB41763f97F744Da547F2d103042e8Ab239
[2025-03-22T05:25:03.987Z] Player 2: 0x9Fde625ED8A6eC0f3cA393A62be34231a5c167F4
[2025-03-22T05:25:03.988Z] Player 3: 0x0Fae37437c1347c23dc279b424663579d2df67df
[2025-03-22T05:25:03.988Z] Player 4: 0xd2e443F6CF19d5d359e82bbEea76e1133028fda5
[2025-03-22T05:25:03.988Z] Player 5: 0x7B7057B07218fa9f357E39cb2fC2E723C2bfcf9F
[2025-03-22T05:25:03.988Z] 
----- VERIFYING GAME INFO BEFORE SPECTATOR BETTING -----
[2025-03-22T05:25:04.195Z] Game state: REGISTRATION
[2025-03-22T05:25:04.195Z] Player count: 5
[2025-03-22T05:25:04.195Z] Active count: 5
[2025-03-22T05:25:04.195Z] Game keeper: 0x1dA9aCB41763f97F744Da547F2d103042e8Ab239
[2025-03-22T05:25:04.195Z] State version: 1
[2025-03-22T05:25:04.195Z] Is cleaned up: false
[2025-03-22T05:25:04.195Z] 
----- CHECKING IF BETTING IS OPEN -----
[2025-03-22T05:25:04.435Z] Betting open: true
[2025-03-22T05:25:04.435Z] Results processed: false
[2025-03-22T05:25:04.436Z] Total bet amount: 0.0 ETH
[2025-03-22T05:25:04.436Z] 
----- SPECTATORS PLACING BETS -----
[2025-03-22T05:25:16.113Z] Spectator 1 (0x1dA9aCB41763f97F744Da547F2d103042e8Ab239) bet 0.01 ETH on Player 1 (0x9Fde625ED8A6eC0f3cA393A62be34231a5c167F4)
[2025-03-22T05:25:16.219Z] Spectator 0x1dA9aCB41763f97F744Da547F2d103042e8Ab239 placed a bet of 0.01 ETH on player 0x9Fde625ED8A6eC0f3cA393A62be34231a5c167F4
[2025-03-22T05:25:16.377Z] Verified bet - Player: 0x9Fde625ED8A6eC0f3cA393A62be34231a5c167F4, Amount: 0.01 ETH, Claimed: false
[2025-03-22T05:25:28.075Z] Spectator 2 (0x52731AEDA26AB8D159226C51180a7542a4287500) bet 0.01 ETH on Player 2 (0x0Fae37437c1347c23dc279b424663579d2df67df)
[2025-03-22T05:25:28.218Z] Spectator 0x52731AEDA26AB8D159226C51180a7542a4287500 placed a bet of 0.01 ETH on player 0x0Fae37437c1347c23dc279b424663579d2df67df
[2025-03-22T05:25:28.348Z] Verified bet - Player: 0x0Fae37437c1347c23dc279b424663579d2df67df, Amount: 0.01 ETH, Claimed: false
[2025-03-22T05:25:29.337Z] Error during spectator betting: insufficient funds for intrinsic transaction cost [ See: https://links.ethers.org/v5-errors-INSUFFICIENT_FUNDS ] (error={"name":"ProviderError","_stack":"ProviderError: insufficient funds for gas * price + value: have 0 want 13012217160000000\n    at HttpProvider.request (/Users/0xjba/agent-arena/node_modules/hardhat/src/internal/core/providers/http.ts:107:21)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at EthersProviderWrapper.send (/Users/0xjba/agent-arena/node_modules/@nomiclabs/hardhat-ethers/src/internal/ethers-provider-wrapper.ts:13:20)","code":-32003,"_isProviderError":true}, method="sendTransaction", transaction="0x02f8ba83aa36a7808459682f008459c564a4831e84809497cecd7fc18eedceda07b4450d58a365c28600d0872386f26fc10000b844bc1b60620000000000000000000000000000000000000000000000000000000000000001000000000000000000000000d2e443f6cf19d5d359e82bbeea76e1133028fda5c080a01f38e6de0c24fedf2f15a2e1779fb45a2a2b4790313668be13457b88010bb2d8a0634785f453f3ab212c8da3366f43782bb9500ce33a0b36e1fde7351d13c04025", code=INSUFFICIENT_FUNDS, version=providers/5.7.2)
[2025-03-22T05:25:29.337Z] 
----- STARTING PEEK PHASE -----
[2025-03-22T05:25:30.706Z] startPeekPhase transaction submitted, waiting for confirmation...
[2025-03-22T05:25:40.072Z] startPeekPhase transaction confirmed!
[2025-03-22T05:25:40.073Z] Buffer period started before peek phase. Current state: REGISTRATION, Next state: PEEK_PHASE
[2025-03-22T05:25:40.073Z] Peek phase started for game 1
[2025-03-22T05:25:40.073Z] Game state updated: State=PEEK_PHASE, Pot=0, CurrentBet=0, StateVersion=2
[2025-03-22T05:25:40.183Z] Betting closed for game 1
[2025-03-22T05:25:40.281Z] Betting open after peek phase start: false
[2025-03-22T05:25:40.486Z] Phase end time: 2025-03-22T05:28:06.000Z
[2025-03-22T05:25:40.486Z] Buffer end time: 2025-03-22T05:26:06.000Z
[2025-03-22T05:25:40.486Z] Waiting 26 seconds for buffer period to end...
[2025-03-22T05:25:40.486Z] Waiting for buffer period to end on TEN network...
[2025-03-22T05:26:10.493Z] Buffer period ended
[2025-03-22T05:26:10.495Z] 
----- PLAYERS PEEKING AT CARDS -----
[2025-03-22T05:26:10.736Z] Player 1 initial chip balance: 25
[2025-03-22T05:26:16.093Z] Player 1 (0x9Fde625ED8A6eC0f3cA393A62be34231a5c167F4) peeked at their card
[2025-03-22T05:26:16.094Z] Player action: peek, Amount: 5, Nonce: 1
[2025-03-22T05:26:16.164Z] Card for 0x9Fde625ED8A6eC0f3cA393A62be34231a5c167F4: 10 of Diamonds
[2025-03-22T05:26:16.307Z] Player 1 chip balance after peeking: 20
[2025-03-22T05:26:16.520Z] Player 2 initial chip balance: 25
[2025-03-22T05:26:28.111Z] Player 2 (0x0Fae37437c1347c23dc279b424663579d2df67df) peeked at their card
[2025-03-22T05:26:28.111Z] Player action: peek, Amount: 5, Nonce: 1
[2025-03-22T05:26:28.234Z] Card for 0x0Fae37437c1347c23dc279b424663579d2df67df: 5 of Clubs
[2025-03-22T05:26:28.379Z] Player 2 chip balance after peeking: 20
[2025-03-22T05:26:28.379Z] 
----- PLAYER USING MONTY HALL OPTION -----
[2025-03-22T05:26:28.573Z] Player 3 initial chip balance: 25
[2025-03-22T05:26:40.072Z] Player 3 (0xd2e443F6CF19d5d359e82bbEea76e1133028fda5) used Monty Hall option
[2025-03-22T05:26:40.072Z] Player action: montyHall, Amount: 7, Nonce: 1
[2025-03-22T05:26:40.138Z] Monty Hall cards revealed to 0xd2e443F6CF19d5d359e82bbEea76e1133028fda5:
[2025-03-22T05:26:40.138Z] - 9 of Clubs
[2025-03-22T05:26:40.138Z] - 4 of Hearts
[2025-03-22T05:26:40.368Z] Player 3 chip balance after using Monty Hall: 18
[2025-03-22T05:26:52.196Z] Player 3 decided to swap their card
[2025-03-22T05:26:52.196Z] Player action: swapCard, Amount: 0, Nonce: 2
[2025-03-22T05:26:52.197Z] Player 4 (0x7B7057B07218fa9f357E39cb2fC2E723C2bfcf9F) chose not to peek or use Monty Hall
[2025-03-22T05:26:52.312Z] 0xd2e443F6CF19d5d359e82bbEea76e1133028fda5 swapped 10 of Clubs for Queen of Hearts
[2025-03-22T05:26:52.479Z] 
----- PLAYER STATUS AFTER PEEK PHASE -----
[2025-03-22T05:26:52.689Z] Player 1 (0x9Fde625ED8A6eC0f3cA393A62be34231a5c167F4):
[2025-03-22T05:26:52.689Z]   Chip balance: 20
[2025-03-22T05:26:52.689Z]   Has peeked: true
[2025-03-22T05:26:52.689Z]   Used Monty Hall: false
[2025-03-22T05:26:52.690Z]   Action nonce: 1
[2025-03-22T05:26:52.899Z] Player 2 (0x0Fae37437c1347c23dc279b424663579d2df67df):
[2025-03-22T05:26:52.899Z]   Chip balance: 20
[2025-03-22T05:26:52.899Z]   Has peeked: true
[2025-03-22T05:26:52.900Z]   Used Monty Hall: false
[2025-03-22T05:26:52.900Z]   Action nonce: 1
[2025-03-22T05:26:53.115Z] Player 3 (0xd2e443F6CF19d5d359e82bbEea76e1133028fda5):
[2025-03-22T05:26:53.115Z]   Chip balance: 18
[2025-03-22T05:26:53.115Z]   Has peeked: false
[2025-03-22T05:26:53.115Z]   Used Monty Hall: true
[2025-03-22T05:26:53.115Z]   Action nonce: 2
[2025-03-22T05:26:53.327Z] Player 4 (0x7B7057B07218fa9f357E39cb2fC2E723C2bfcf9F):
[2025-03-22T05:26:53.327Z]   Chip balance: 25
[2025-03-22T05:26:53.327Z]   Has peeked: false
[2025-03-22T05:26:53.327Z]   Used Monty Hall: false
[2025-03-22T05:26:53.327Z]   Action nonce: 0
[2025-03-22T05:26:53.327Z] 
----- WAITING FOR PEEK PHASE TO END -----
[2025-03-22T05:26:53.536Z] Waiting 73 seconds for peek phase to end...
[2025-03-22T05:26:53.536Z] Waiting for peek phase to end on TEN network...
[2025-03-22T05:28:13.549Z] Peek phase ended
[2025-03-22T05:28:13.550Z] 
----- ENDING PEEK PHASE -----
[2025-03-22T05:28:14.558Z] endPeekPhase transaction submitted, waiting for confirmation...
[2025-03-22T05:28:28.104Z] endPeekPhase transaction confirmed!
[2025-03-22T05:28:28.104Z] Buffer period started before betting phase. Current state: PEEK_PHASE, Next state: BETTING
[2025-03-22T05:28:28.104Z] Betting phase started for game 1
[2025-03-22T05:28:28.105Z] Game state updated: State=BETTING, Pot=0, CurrentBet=0, StateVersion=3
[2025-03-22T05:28:28.338Z] Phase end time: 2025-03-22T05:33:54.000Z
[2025-03-22T05:28:28.338Z] Buffer end time: 2025-03-22T05:28:54.000Z
[2025-03-22T05:28:28.338Z] Waiting 26 seconds for buffer period to end...
[2025-03-22T05:28:28.338Z] Waiting for buffer period to end on TEN network...
[2025-03-22T05:28:58.347Z] Buffer period ended
[2025-03-22T05:28:58.347Z] 
----- PLAYERS PLACING BETS -----
[2025-03-22T05:29:04.171Z] Player 1 (0x9Fde625ED8A6eC0f3cA393A62be34231a5c167F4) bet 5 chips
[2025-03-22T05:29:04.172Z] Player action: bet, Amount: 5, Nonce: 2
[2025-03-22T05:29:04.390Z] Pot after bet 1: 5, Current bet: 5
[2025-03-22T05:29:16.120Z] Player 2 (0x0Fae37437c1347c23dc279b424663579d2df67df) bet 5 chips
[2025-03-22T05:29:16.121Z] Player action: bet, Amount: 5, Nonce: 2
[2025-03-22T05:29:16.325Z] Pot after bet 2: 10, Current bet: 5
[2025-03-22T05:29:28.219Z] Player 3 (0xd2e443F6CF19d5d359e82bbEea76e1133028fda5) bet 10 chips (raising to 10)
[2025-03-22T05:29:28.219Z] Player action: bet, Amount: 10, Nonce: 3
[2025-03-22T05:29:28.446Z] Pot after bet 3: 20, Current bet: 10
[2025-03-22T05:29:40.178Z] Player 1 (0x9Fde625ED8A6eC0f3cA393A62be34231a5c167F4) bet additional 5 chips (calling the raise)
[2025-03-22T05:29:40.179Z] Player action: bet, Amount: 5, Nonce: 3
[2025-03-22T05:29:40.392Z] Pot after bet 4: 25, Current bet: 10
[2025-03-22T05:29:52.209Z] Player 2 (0x0Fae37437c1347c23dc279b424663579d2df67df) bet additional 5 chips (calling the raise)
[2025-03-22T05:29:52.210Z] Player action: bet, Amount: 5, Nonce: 3
[2025-03-22T05:29:52.445Z] Pot after bet 5: 30, Current bet: 10
[2025-03-22T05:30:04.156Z] Player 4 (0x7B7057B07218fa9f357E39cb2fC2E723C2bfcf9F) folded
[2025-03-22T05:30:04.156Z] Player action: fold, Amount: 0, Nonce: 1
[2025-03-22T05:30:04.368Z] Active players after fold: 4
[2025-03-22T05:30:04.368Z] 
----- PLAYER STATUS AFTER BETTING -----
[2025-03-22T05:30:04.566Z] Player 1 (0x9Fde625ED8A6eC0f3cA393A62be34231a5c167F4):
[2025-03-22T05:30:04.566Z]   Chip balance: 10
[2025-03-22T05:30:04.566Z]   Current bet: 10
[2025-03-22T05:30:04.566Z]   Has folded: false
[2025-03-22T05:30:04.567Z]   Action nonce: 3
[2025-03-22T05:30:04.782Z] Player 2 (0x0Fae37437c1347c23dc279b424663579d2df67df):
[2025-03-22T05:30:04.782Z]   Chip balance: 10
[2025-03-22T05:30:04.782Z]   Current bet: 10
[2025-03-22T05:30:04.782Z]   Has folded: false
[2025-03-22T05:30:04.782Z]   Action nonce: 3
[2025-03-22T05:30:04.984Z] Player 3 (0xd2e443F6CF19d5d359e82bbEea76e1133028fda5):
[2025-03-22T05:30:04.984Z]   Chip balance: 8
[2025-03-22T05:30:04.984Z]   Current bet: 10
[2025-03-22T05:30:04.984Z]   Has folded: false
[2025-03-22T05:30:04.984Z]   Action nonce: 3
[2025-03-22T05:30:05.186Z] Player 4 (0x7B7057B07218fa9f357E39cb2fC2E723C2bfcf9F):
[2025-03-22T05:30:05.186Z]   Chip balance: 25
[2025-03-22T05:30:05.186Z]   Current bet: 0
[2025-03-22T05:30:05.186Z]   Has folded: true
[2025-03-22T05:30:05.186Z]   Action nonce: 1
[2025-03-22T05:30:05.369Z] Have all active players matched the current bet? false
[2025-03-22T05:30:05.370Z] 
----- WAITING FOR BETTING PHASE TO END -----
[2025-03-22T05:30:05.626Z] Betting phase ends in 229 seconds at 2025-03-22T05:33:54.000Z
[2025-03-22T05:30:05.626Z] All players have matched bets, manually ending betting phase...
[2025-03-22T05:30:05.626Z] 
----- CHECKING GAME STATE BEFORE ENDING BETTING PHASE -----
[2025-03-22T05:30:05.903Z] Current game state: BETTING
[2025-03-22T05:30:05.904Z] Phase end time: 2025-03-22T05:33:54.000Z
[2025-03-22T05:30:05.904Z] Current time: 2025-03-22T05:30:05.904Z
[2025-03-22T05:30:05.904Z] Buffer end time: 2025-03-22T05:28:54.000Z
[2025-03-22T05:30:05.904Z] Is in buffer period: false
[2025-03-22T05:30:05.904Z] Is phase ended: false
[2025-03-22T05:30:06.124Z] Is caller (0x1dA9aCB41763f97F744Da547F2d103042e8Ab239) a keeper: true
[2025-03-22T05:30:06.125Z] Betting phase hasn't ended yet. Waiting 228 seconds...
[2025-03-22T05:30:06.125Z] Waiting for phase to end on TEN network...
[2025-03-22T05:33:56.185Z] Betting phase has now ended
[2025-03-22T05:33:56.542Z] Game state after waiting: BETTING
[2025-03-22T05:33:56.543Z] Updated phase end time: 2025-03-22T05:33:54.000Z
[2025-03-22T05:33:56.543Z] Updated buffer end time: 2025-03-22T05:28:54.000Z
[2025-03-22T05:33:56.543Z] 
----- ENDING BETTING PHASE -----
[2025-03-22T05:33:57.468Z] endBettingPhase transaction submitted, waiting for confirmation...
[2025-03-22T05:34:04.221Z] endBettingPhase transaction confirmed!
[2025-03-22T05:34:04.222Z] Showdown phase started
[2025-03-22T05:34:04.222Z] 
===== GAME RESULTS =====
[2025-03-22T05:34:04.222Z] Winner: 0x1dA9aCB41763f97F744Da547F2d103042e8Ab239
[2025-03-22T05:34:04.222Z] Pot Amount: 30 chips
[2025-03-22T05:34:04.222Z] Final game state: State=SHOWDOWN, Pot=30, CurrentBet=10, StateVersion=4
[2025-03-22T05:34:04.222Z] 
----- REVEALED CARDS DURING SHOWDOWN -----
[2025-03-22T05:34:04.274Z] Betting results processed for game 1, winner: 0x1dA9aCB41763f97F744Da547F2d103042e8Ab239
[2025-03-22T05:34:04.291Z] Card for 0x1dA9aCB41763f97F744Da547F2d103042e8Ab239: Queen of Diamonds
[2025-03-22T05:34:04.291Z] Card for 0x9Fde625ED8A6eC0f3cA393A62be34231a5c167F4: 10 of Diamonds
[2025-03-22T05:34:04.291Z] Card for 0x0Fae37437c1347c23dc279b424663579d2df67df: 5 of Clubs
[2025-03-22T05:34:04.291Z] Card for 0xd2e443F6CF19d5d359e82bbEea76e1133028fda5: Queen of Hearts
[2025-03-22T05:34:04.291Z] 
===== GAME ENDED EVENT CAPTURED =====
[2025-03-22T05:34:04.291Z] Winner: 0x1dA9aCB41763f97F744Da547F2d103042e8Ab239
[2025-03-22T05:34:04.291Z] Pot Amount: 30 chips
[2025-03-22T05:34:04.418Z] Error getting revealed cards: cardValues[i].toNumber is not a function
[2025-03-22T05:34:04.418Z] 
----- FINAL GAME STATE -----
[2025-03-22T05:34:04.632Z] Game state: ENDED
[2025-03-22T05:34:04.632Z] Pot amount: 0
[2025-03-22T05:34:04.633Z] State version: 5
[2025-03-22T05:34:04.633Z] Is cleaned up: false
[2025-03-22T05:34:04.633Z] 
----- FINAL PLAYER BALANCES -----
[2025-03-22T05:34:04.903Z] Player 1 (0x9Fde625ED8A6eC0f3cA393A62be34231a5c167F4):
[2025-03-22T05:34:04.903Z]   Initial balance: 25
[2025-03-22T05:34:04.903Z]   Final balance: 10
[2025-03-22T05:34:04.904Z]   Difference: -15
[2025-03-22T05:34:05.135Z] Player 2 (0x0Fae37437c1347c23dc279b424663579d2df67df):
[2025-03-22T05:34:05.135Z]   Initial balance: 25
[2025-03-22T05:34:05.136Z]   Final balance: 10
[2025-03-22T05:34:05.136Z]   Difference: -15
[2025-03-22T05:34:05.364Z] Player 3 (0xd2e443F6CF19d5d359e82bbEea76e1133028fda5):
[2025-03-22T05:34:05.365Z]   Initial balance: 25
[2025-03-22T05:34:05.365Z]   Final balance: 8
[2025-03-22T05:34:05.365Z]   Difference: -17
[2025-03-22T05:34:05.572Z] Player 4 (0x7B7057B07218fa9f357E39cb2fC2E723C2bfcf9F):
[2025-03-22T05:34:05.572Z]   Initial balance: 25
[2025-03-22T05:34:05.572Z]   Final balance: 25
[2025-03-22T05:34:05.572Z]   Difference: 0
[2025-03-22T05:34:05.572Z] 
----- SPECTATOR BETTING RESULTS -----
[2025-03-22T05:34:05.824Z] Betting results processed: true
[2025-03-22T05:34:05.825Z] Game winner: 0x1dA9aCB41763f97F744Da547F2d103042e8Ab239
[2025-03-22T05:34:05.826Z] Total betting pool: 0.02 ETH
[2025-03-22T05:34:05.826Z] 
----- SPECTATOR WINNINGS CHECK -----
[2025-03-22T05:34:06.247Z] Spectator 1 (0x1dA9aCB41763f97F744Da547F2d103042e8Ab239):
[2025-03-22T05:34:06.247Z]   Bet on: 0x9Fde625ED8A6eC0f3cA393A62be34231a5c167F4
[2025-03-22T05:34:06.248Z]   Bet amount: 0.01 ETH
[2025-03-22T05:34:06.248Z]   Has winnings: false
[2025-03-22T05:34:06.720Z] Spectator 2 (0x52731AEDA26AB8D159226C51180a7542a4287500):
[2025-03-22T05:34:06.720Z]   Bet on: 0x0Fae37437c1347c23dc279b424663579d2df67df
[2025-03-22T05:34:06.721Z]   Bet amount: 0.01 ETH
[2025-03-22T05:34:06.721Z]   Has winnings: false
[2025-03-22T05:34:07.169Z] Spectator 3 (0x45ab32ec402D51096398aA4e6a7aF03180E50bD0):
[2025-03-22T05:34:07.169Z]   Bet on: 0x0000000000000000000000000000000000000000
[2025-03-22T05:34:07.169Z]   Bet amount: 0.0 ETH
[2025-03-22T05:34:07.170Z]   Has winnings: false
[2025-03-22T05:34:07.170Z] 
----- SPECTATORS CLAIMING WINNINGS -----
[2025-03-22T05:34:16.170Z] Spectator 1 (0x1dA9aCB41763f97F744Da547F2d103042e8Ab239) marked bet as claimed (no winnings)
[2025-03-22T05:34:16.401Z]   Bet now marked as claimed: true
[2025-03-22T05:34:28.224Z] Spectator 2 (0x52731AEDA26AB8D159226C51180a7542a4287500) marked bet as claimed (no winnings)
[2025-03-22T05:34:28.447Z]   Bet now marked as claimed: true
[2025-03-22T05:34:29.477Z] Error when Spectator 3 tried to claim: insufficient funds for intrinsic transaction cost [ See: https://links.ethers.org/v5-errors-INSUFFICIENT_FUNDS ] (error={"name":"ProviderError","_stack":"ProviderError: insufficient funds for gas * price + value: have 0 want 3013062236000000\n    at HttpProvider.request (/Users/0xjba/agent-arena/node_modules/hardhat/src/internal/core/providers/http.ts:107:21)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at EthersProviderWrapper.send (/Users/0xjba/agent-arena/node_modules/@nomiclabs/hardhat-ethers/src/internal/ethers-provider-wrapper.ts:13:20)","code":-32003,"_isProviderError":true}, method="sendTransaction", transaction="0x02f89283aa36a7808459682f008459cbd72e831e84809497cecd7fc18eedceda07b4450d58a365c28600d080a4677bd9ff0000000000000000000000000000000000000000000000000000000000000001c080a0760eb2bd51d627d8b9ac096345adfec3f79debb04ac34cfb0cd6281b31d726a5a016038f4dbed3520272196e6c2d3431bddedaa0d21e9d137e1f1347faf37b37a9", code=INSUFFICIENT_FUNDS, version=providers/5.7.2)
[2025-03-22T05:34:29.720Z]   Bet now marked as claimed: false
[2025-03-22T05:34:29.720Z] 
----- CLEANING UP THE GAME -----
[2025-03-22T05:34:40.168Z] Game cleaned up successfully
[2025-03-22T05:34:40.440Z] Game is cleaned up: true
[2025-03-22T05:34:40.440Z] Game is no longer spectatable
[2025-03-22T05:34:40.440Z] Final state update: State=ENDED, StateVersion=6
[2025-03-22T05:34:40.441Z] 
===== ONE CARD POKER WITH MONTY HALL AND SPECTATOR BETTING TEST COMPLETED =====
[2025-03-22T05:37:47.187Z] 
===== SETTING UP TEST ENVIRONMENT =====
[2025-03-22T05:37:47.224Z] Wallet setup complete.
[2025-03-22T05:37:47.224Z] Owner address: 0x1dA9aCB41763f97F744Da547F2d103042e8Ab239
[2025-03-22T05:37:47.225Z] Player 1 address: 0x9Fde625ED8A6eC0f3cA393A62be34231a5c167F4
[2025-03-22T05:37:47.225Z] Player 2 address: 0x0Fae37437c1347c23dc279b424663579d2df67df
[2025-03-22T05:37:47.225Z] Player 3 address: 0xd2e443F6CF19d5d359e82bbEea76e1133028fda5
[2025-03-22T05:37:47.225Z] Player 4 address: 0x7B7057B07218fa9f357E39cb2fC2E723C2bfcf9F
[2025-03-22T05:37:47.225Z] Spectator 1 address: 0x1dA9aCB41763f97F744Da547F2d103042e8Ab239
[2025-03-22T05:37:47.225Z] Spectator 2 address: 0x52731AEDA26AB8D159226C51180a7542a4287500
[2025-03-22T05:37:47.225Z] Spectator 3 address: 0x45ab32ec402D51096398aA4e6a7aF03180E50bD0
[2025-03-22T05:37:47.225Z] Keeper address: 0x1dA9aCB41763f97F744Da547F2d103042e8Ab239
[2025-03-22T05:37:47.225Z] 
----- CHECKING WALLET BALANCES -----
[2025-03-22T05:37:47.766Z] Address 0x1dA9aCB41763f97F744Da547F2d103042e8Ab239 has 0.339815036024906211 ETH
[2025-03-22T05:37:47.982Z] Address 0x9Fde625ED8A6eC0f3cA393A62be34231a5c167F4 has 0.925113042346324177 ETH
[2025-03-22T05:37:48.185Z] Address 0x0Fae37437c1347c23dc279b424663579d2df67df has 0.924416811509964361 ETH
[2025-03-22T05:37:48.384Z] Address 0xd2e443F6CF19d5d359e82bbEea76e1133028fda5 has 0.976517197443268335 ETH
[2025-03-22T05:37:48.603Z] Address 0x7B7057B07218fa9f357E39cb2fC2E723C2bfcf9F has 1.917180572026057984 ETH
[2025-03-22T05:37:48.854Z] Address 0x1dA9aCB41763f97F744Da547F2d103042e8Ab239 has 0.339815036024906211 ETH
[2025-03-22T05:37:49.052Z] Address 0x52731AEDA26AB8D159226C51180a7542a4287500 has 0.989769466955537742 ETH
[2025-03-22T05:37:49.285Z] Address 0x45ab32ec402D51096398aA4e6a7aF03180E50bD0 has 0.5 ETH
[2025-03-22T05:37:49.576Z] Address 0x1dA9aCB41763f97F744Da547F2d103042e8Ab239 has 0.339815036024906211 ETH
[2025-03-22T05:37:49.577Z] 
----- DEPLOYING CONTRACTS -----
[2025-03-22T05:37:49.577Z] Deploying CardLibrary...
[2025-03-22T05:38:03.196Z] CardLibrary deployed at: 0x2f17a3441B1D9c819F653487801C0bC0624CA8F7
[2025-03-22T05:38:03.196Z] Deploying GameLibrary...
[2025-03-22T05:38:12.731Z] GameLibrary deployed at: 0x4c7fC0a3360ffE81b63dc62F76c7F22aCEaF45c3
[2025-03-22T05:38:12.731Z] Deploying OneCard main contract...
[2025-03-22T05:38:26.549Z] OneCard contract deployed at: 0x22662c887b19fb432B7a54E9B4E64E077f182138
[2025-03-22T05:38:26.550Z] Deploying PokerSpectatorView contract...
[2025-03-22T05:38:40.176Z] PokerSpectatorView contract deployed at: 0x8dC5B6E453545a567Da1B6D300B4D7032B93c04c
[2025-03-22T05:38:40.177Z] Deploying SpectatorBetting contract...
[2025-03-22T05:38:49.814Z] SpectatorBetting contract deployed at: 0x9e6417c454fa28013f38a049a681fBc8BE34989B
[2025-03-22T05:38:49.815Z] Setting spectator betting contract in OneCard contract...
[2025-03-22T05:39:03.446Z] SpectatorBetting contract set in OneCard
[2025-03-22T05:39:03.446Z] 
Add these to your .env file for future use:
[2025-03-22T05:39:03.446Z] POKER_CONTRACT_ADDRESS=0x22662c887b19fb432B7a54E9B4E64E077f182138
[2025-03-22T05:39:03.447Z] SPECTATOR_CONTRACT_ADDRESS=0x8dC5B6E453545a567Da1B6D300B4D7032B93c04c
[2025-03-22T05:39:03.447Z] SPECTATOR_BETTING_ADDRESS=0x9e6417c454fa28013f38a049a681fBc8BE34989B
[2025-03-22T05:39:03.452Z] 
===== STARTING ONE CARD POKER WITH MONTY HALL AND SPECTATOR BETTING TEST =====
[2025-03-22T05:39:03.452Z] 
----- ADDING PLAYERS TO WHITELIST -----
[2025-03-22T05:39:12.925Z] Added 4 players to whitelist
[2025-03-22T05:39:12.925Z] 
----- CREATING A NEW GAME -----
[2025-03-22T05:39:26.371Z] Created Game with ID: 1
[2025-03-22T05:39:26.584Z] Initial players in game: 5
[2025-03-22T05:39:26.584Z] Player 1: 0x1dA9aCB41763f97F744Da547F2d103042e8Ab239
[2025-03-22T05:39:26.585Z] Player 2: 0x9Fde625ED8A6eC0f3cA393A62be34231a5c167F4
[2025-03-22T05:39:26.585Z] Player 3: 0x0Fae37437c1347c23dc279b424663579d2df67df
[2025-03-22T05:39:26.585Z] Player 4: 0xd2e443F6CF19d5d359e82bbEea76e1133028fda5
[2025-03-22T05:39:26.585Z] Player 5: 0x7B7057B07218fa9f357E39cb2fC2E723C2bfcf9F
[2025-03-22T05:39:26.585Z] 
----- VERIFYING GAME INFO BEFORE SPECTATOR BETTING -----
[2025-03-22T05:39:26.817Z] Game state: REGISTRATION
[2025-03-22T05:39:26.817Z] Player count: 5
[2025-03-22T05:39:26.817Z] Active count: 5
[2025-03-22T05:39:26.817Z] Game keeper: 0x1dA9aCB41763f97F744Da547F2d103042e8Ab239
[2025-03-22T05:39:26.817Z] State version: 1
[2025-03-22T05:39:26.817Z] Is cleaned up: false
[2025-03-22T05:39:26.817Z] 
----- CHECKING IF BETTING IS OPEN -----
[2025-03-22T05:39:27.013Z] Betting open: true
[2025-03-22T05:39:27.013Z] Results processed: false
[2025-03-22T05:39:27.014Z] Total bet amount: 0.0 ETH
[2025-03-22T05:39:27.014Z] 
----- SPECTATORS PLACING BETS -----
[2025-03-22T05:39:38.733Z] Spectator 1 (0x1dA9aCB41763f97F744Da547F2d103042e8Ab239) bet 0.01 ETH on Player 1 (0x9Fde625ED8A6eC0f3cA393A62be34231a5c167F4)
[2025-03-22T05:39:38.849Z] Spectator 0x1dA9aCB41763f97F744Da547F2d103042e8Ab239 placed a bet of 0.01 ETH on player 0x9Fde625ED8A6eC0f3cA393A62be34231a5c167F4
[2025-03-22T05:39:38.947Z] Verified bet - Player: 0x9Fde625ED8A6eC0f3cA393A62be34231a5c167F4, Amount: 0.01 ETH, Claimed: false
[2025-03-22T05:39:50.775Z] Spectator 2 (0x52731AEDA26AB8D159226C51180a7542a4287500) bet 0.01 ETH on Player 2 (0x0Fae37437c1347c23dc279b424663579d2df67df)
[2025-03-22T05:39:51.026Z] Verified bet - Player: 0x0Fae37437c1347c23dc279b424663579d2df67df, Amount: 0.01 ETH, Claimed: false
[2025-03-22T05:39:51.051Z] Spectator 0x52731AEDA26AB8D159226C51180a7542a4287500 placed a bet of 0.01 ETH on player 0x0Fae37437c1347c23dc279b424663579d2df67df
[2025-03-22T05:40:02.723Z] Spectator 3 (0x45ab32ec402D51096398aA4e6a7aF03180E50bD0) bet 0.01 ETH on Player 3 (0xd2e443F6CF19d5d359e82bbEea76e1133028fda5)
[2025-03-22T05:40:02.736Z] Spectator 0x45ab32ec402D51096398aA4e6a7aF03180E50bD0 placed a bet of 0.01 ETH on player 0xd2e443F6CF19d5d359e82bbEea76e1133028fda5
[2025-03-22T05:40:02.932Z] Verified bet - Player: 0xd2e443F6CF19d5d359e82bbEea76e1133028fda5, Amount: 0.01 ETH, Claimed: false
[2025-03-22T05:40:02.932Z] 
----- CHECKING TOTAL BETS ON EACH PLAYER -----
[2025-03-22T05:40:03.181Z] Total bet on Player 1 (0x9Fde625ED8A6eC0f3cA393A62be34231a5c167F4): 0.01 ETH
[2025-03-22T05:40:03.389Z] Total bet on Player 2 (0x0Fae37437c1347c23dc279b424663579d2df67df): 0.01 ETH
[2025-03-22T05:40:03.573Z] Total bet on Player 3 (0xd2e443F6CF19d5d359e82bbEea76e1133028fda5): 0.01 ETH
[2025-03-22T05:40:03.809Z] Total bet on Player 4 (0x7B7057B07218fa9f357E39cb2fC2E723C2bfcf9F): 0.0 ETH
[2025-03-22T05:40:04.001Z] Total betting pool: 0.03 ETH
[2025-03-22T05:40:04.001Z] 
----- STARTING PEEK PHASE -----
[2025-03-22T05:40:04.988Z] startPeekPhase transaction submitted, waiting for confirmation...
[2025-03-22T05:40:14.815Z] startPeekPhase transaction confirmed!
[2025-03-22T05:40:14.815Z] Buffer period started before peek phase. Current state: REGISTRATION, Next state: PEEK_PHASE
[2025-03-22T05:40:14.815Z] Peek phase started for game 1
[2025-03-22T05:40:14.815Z] Game state updated: State=PEEK_PHASE, Pot=0, CurrentBet=0, StateVersion=2
[2025-03-22T05:40:14.864Z] Betting closed for game 1
[2025-03-22T05:40:15.109Z] Betting open after peek phase start: false
[2025-03-22T05:40:15.304Z] Phase end time: 2025-03-22T05:42:42.000Z
[2025-03-22T05:40:15.304Z] Buffer end time: 2025-03-22T05:40:42.000Z
[2025-03-22T05:40:15.304Z] Waiting 27 seconds for buffer period to end...
[2025-03-22T05:40:15.304Z] Waiting for buffer period to end on TEN network...
[2025-03-22T05:40:45.312Z] Buffer period ended
[2025-03-22T05:40:45.314Z] 
----- PLAYERS PEEKING AT CARDS -----
[2025-03-22T05:40:45.560Z] Player 1 initial chip balance: 25
[2025-03-22T05:40:50.772Z] Player 1 (0x9Fde625ED8A6eC0f3cA393A62be34231a5c167F4) peeked at their card
[2025-03-22T05:40:50.772Z] Player action: peek, Amount: 5, Nonce: 1
[2025-03-22T05:40:50.838Z] Card for 0x9Fde625ED8A6eC0f3cA393A62be34231a5c167F4: 2 of Diamonds
[2025-03-22T05:40:51.003Z] Player 1 chip balance after peeking: 20
[2025-03-22T05:40:51.207Z] Player 2 initial chip balance: 25
[2025-03-22T05:41:02.806Z] Player 2 (0x0Fae37437c1347c23dc279b424663579d2df67df) peeked at their card
[2025-03-22T05:41:02.806Z] Player action: peek, Amount: 5, Nonce: 1
[2025-03-22T05:41:02.969Z] Card for 0x0Fae37437c1347c23dc279b424663579d2df67df: 4 of Diamonds
[2025-03-22T05:41:03.047Z] Player 2 chip balance after peeking: 20
[2025-03-22T05:41:03.048Z] 
----- PLAYER USING MONTY HALL OPTION -----
[2025-03-22T05:41:03.239Z] Player 3 initial chip balance: 25
[2025-03-22T05:41:14.695Z] Player 3 (0xd2e443F6CF19d5d359e82bbEea76e1133028fda5) used Monty Hall option
[2025-03-22T05:41:14.695Z] Player action: montyHall, Amount: 7, Nonce: 1
[2025-03-22T05:41:14.809Z] Monty Hall cards revealed to 0xd2e443F6CF19d5d359e82bbEea76e1133028fda5:
[2025-03-22T05:41:14.809Z] - 6 of Clubs
[2025-03-22T05:41:14.809Z] - 4 of Hearts
[2025-03-22T05:41:14.951Z] Player 3 chip balance after using Monty Hall: 18
[2025-03-22T05:41:26.728Z] Player 3 decided to swap their card
[2025-03-22T05:41:26.728Z] Player action: swapCard, Amount: 0, Nonce: 2
[2025-03-22T05:41:26.728Z] Player 4 (0x7B7057B07218fa9f357E39cb2fC2E723C2bfcf9F) chose not to peek or use Monty Hall
[2025-03-22T05:41:26.803Z] 0xd2e443F6CF19d5d359e82bbEea76e1133028fda5 swapped Ace of Clubs for Jack of Hearts
[2025-03-22T05:41:26.921Z] 
----- PLAYER STATUS AFTER PEEK PHASE -----
[2025-03-22T05:41:27.130Z] Player 1 (0x9Fde625ED8A6eC0f3cA393A62be34231a5c167F4):
[2025-03-22T05:41:27.131Z]   Chip balance: 20
[2025-03-22T05:41:27.131Z]   Has peeked: true
[2025-03-22T05:41:27.131Z]   Used Monty Hall: false
[2025-03-22T05:41:27.131Z]   Action nonce: 1
[2025-03-22T05:41:27.396Z] Player 2 (0x0Fae37437c1347c23dc279b424663579d2df67df):
[2025-03-22T05:41:27.397Z]   Chip balance: 20
[2025-03-22T05:41:27.397Z]   Has peeked: true
[2025-03-22T05:41:27.397Z]   Used Monty Hall: false
[2025-03-22T05:41:27.397Z]   Action nonce: 1
[2025-03-22T05:41:27.605Z] Player 3 (0xd2e443F6CF19d5d359e82bbEea76e1133028fda5):
[2025-03-22T05:41:27.606Z]   Chip balance: 18
[2025-03-22T05:41:27.606Z]   Has peeked: false
[2025-03-22T05:41:27.606Z]   Used Monty Hall: true
[2025-03-22T05:41:27.606Z]   Action nonce: 2
[2025-03-22T05:41:27.803Z] Player 4 (0x7B7057B07218fa9f357E39cb2fC2E723C2bfcf9F):
[2025-03-22T05:41:27.803Z]   Chip balance: 25
[2025-03-22T05:41:27.803Z]   Has peeked: false
[2025-03-22T05:41:27.803Z]   Used Monty Hall: false
[2025-03-22T05:41:27.803Z]   Action nonce: 0
[2025-03-22T05:41:27.803Z] 
----- WAITING FOR PEEK PHASE TO END -----
[2025-03-22T05:41:28.040Z] Waiting 74 seconds for peek phase to end...
[2025-03-22T05:41:28.040Z] Waiting for peek phase to end on TEN network...
[2025-03-22T05:42:48.051Z] Peek phase ended
[2025-03-22T05:42:48.052Z] 
----- ENDING PEEK PHASE -----
[2025-03-22T05:42:49.127Z] endPeekPhase transaction submitted, waiting for confirmation...
[2025-03-22T05:43:02.784Z] endPeekPhase transaction confirmed!
[2025-03-22T05:43:02.784Z] Buffer period started before betting phase. Current state: PEEK_PHASE, Next state: BETTING
[2025-03-22T05:43:02.784Z] Betting phase started for game 1
[2025-03-22T05:43:02.784Z] Game state updated: State=BETTING, Pot=0, CurrentBet=0, StateVersion=3
[2025-03-22T05:43:02.984Z] Phase end time: 2025-03-22T05:48:30.000Z
[2025-03-22T05:43:02.984Z] Buffer end time: 2025-03-22T05:43:30.000Z
[2025-03-22T05:43:02.984Z] Waiting 28 seconds for buffer period to end...
[2025-03-22T05:43:02.984Z] Waiting for buffer period to end on TEN network...
[2025-03-22T05:43:32.995Z] Buffer period ended
[2025-03-22T05:43:32.996Z] 
----- PLAYERS PLACING BETS -----
[2025-03-22T05:43:38.800Z] Player 1 (0x9Fde625ED8A6eC0f3cA393A62be34231a5c167F4) bet 5 chips
[2025-03-22T05:43:38.800Z] Player action: bet, Amount: 5, Nonce: 2
[2025-03-22T05:43:38.981Z] Pot after bet 1: 5, Current bet: 5
[2025-03-22T05:43:51.069Z] Player 2 (0x0Fae37437c1347c23dc279b424663579d2df67df) bet 5 chips
[2025-03-22T05:43:51.069Z] Player action: bet, Amount: 5, Nonce: 2
[2025-03-22T05:43:51.314Z] Pot after bet 2: 10, Current bet: 5
[2025-03-22T05:44:02.859Z] Player 3 (0xd2e443F6CF19d5d359e82bbEea76e1133028fda5) bet 10 chips (raising to 10)
[2025-03-22T05:44:02.860Z] Player action: bet, Amount: 10, Nonce: 3
[2025-03-22T05:44:03.089Z] Pot after bet 3: 20, Current bet: 10
[2025-03-22T05:44:14.860Z] Player 1 (0x9Fde625ED8A6eC0f3cA393A62be34231a5c167F4) bet additional 5 chips (calling the raise)
[2025-03-22T05:44:14.861Z] Player action: bet, Amount: 5, Nonce: 3
[2025-03-22T05:44:15.069Z] Pot after bet 4: 25, Current bet: 10
[2025-03-22T05:44:26.778Z] Player 2 (0x0Fae37437c1347c23dc279b424663579d2df67df) bet additional 5 chips (calling the raise)
[2025-03-22T05:44:26.778Z] Player action: bet, Amount: 5, Nonce: 3
[2025-03-22T05:44:27.002Z] Pot after bet 5: 30, Current bet: 10
[2025-03-22T05:44:38.926Z] Player 4 (0x7B7057B07218fa9f357E39cb2fC2E723C2bfcf9F) folded
[2025-03-22T05:44:38.926Z] Player action: fold, Amount: 0, Nonce: 1
[2025-03-22T05:44:39.449Z] Active players after fold: 4
[2025-03-22T05:44:39.449Z] 
----- PLAYER STATUS AFTER BETTING -----
[2025-03-22T05:44:39.678Z] Player 1 (0x9Fde625ED8A6eC0f3cA393A62be34231a5c167F4):
[2025-03-22T05:44:39.678Z]   Chip balance: 10
[2025-03-22T05:44:39.678Z]   Current bet: 10
[2025-03-22T05:44:39.678Z]   Has folded: false
[2025-03-22T05:44:39.678Z]   Action nonce: 3
[2025-03-22T05:44:39.895Z] Player 2 (0x0Fae37437c1347c23dc279b424663579d2df67df):
[2025-03-22T05:44:39.895Z]   Chip balance: 10
[2025-03-22T05:44:39.895Z]   Current bet: 10
[2025-03-22T05:44:39.895Z]   Has folded: false
[2025-03-22T05:44:39.896Z]   Action nonce: 3
[2025-03-22T05:44:40.108Z] Player 3 (0xd2e443F6CF19d5d359e82bbEea76e1133028fda5):
[2025-03-22T05:44:40.109Z]   Chip balance: 8
[2025-03-22T05:44:40.109Z]   Current bet: 10
[2025-03-22T05:44:40.109Z]   Has folded: false
[2025-03-22T05:44:40.109Z]   Action nonce: 3
[2025-03-22T05:44:40.368Z] Player 4 (0x7B7057B07218fa9f357E39cb2fC2E723C2bfcf9F):
[2025-03-22T05:44:40.368Z]   Chip balance: 25
[2025-03-22T05:44:40.368Z]   Current bet: 0
[2025-03-22T05:44:40.368Z]   Has folded: true
[2025-03-22T05:44:40.368Z]   Action nonce: 1
[2025-03-22T05:44:40.564Z] Have all active players matched the current bet? false
[2025-03-22T05:44:40.565Z] 
----- WAITING FOR BETTING PHASE TO END -----
[2025-03-22T05:44:40.787Z] Betting phase ends in 230 seconds at 2025-03-22T05:48:30.000Z
[2025-03-22T05:44:40.787Z] All players have matched bets, manually ending betting phase...
[2025-03-22T05:44:40.787Z] 
----- CHECKING GAME STATE BEFORE ENDING BETTING PHASE -----
[2025-03-22T05:44:41.007Z] Current game state: BETTING
[2025-03-22T05:44:41.008Z] Phase end time: 2025-03-22T05:48:30.000Z
[2025-03-22T05:44:41.008Z] Current time: 2025-03-22T05:44:41.008Z
[2025-03-22T05:44:41.008Z] Buffer end time: 2025-03-22T05:43:30.000Z
[2025-03-22T05:44:41.008Z] Is in buffer period: false
[2025-03-22T05:44:41.008Z] Is phase ended: false
[2025-03-22T05:44:41.226Z] Is caller (0x1dA9aCB41763f97F744Da547F2d103042e8Ab239) a keeper: true
[2025-03-22T05:44:41.226Z] Betting phase hasn't ended yet. Waiting 229 seconds...
[2025-03-22T05:44:41.226Z] Waiting for phase to end on TEN network...
[2025-03-22T05:48:31.278Z] Betting phase has now ended
[2025-03-22T05:48:31.504Z] Game state after waiting: BETTING
[2025-03-22T05:48:31.504Z] Updated phase end time: 2025-03-22T05:48:30.000Z
[2025-03-22T05:48:31.504Z] Updated buffer end time: 2025-03-22T05:43:30.000Z
[2025-03-22T05:48:31.504Z] 
----- ENDING BETTING PHASE -----
[2025-03-22T05:48:32.508Z] endBettingPhase transaction submitted, waiting for confirmation...
[2025-03-22T05:48:38.905Z] endBettingPhase transaction confirmed!
[2025-03-22T05:48:38.905Z] Showdown phase started
[2025-03-22T05:48:38.905Z] 
===== GAME RESULTS =====
[2025-03-22T05:48:38.905Z] Winner: 0xd2e443F6CF19d5d359e82bbEea76e1133028fda5
[2025-03-22T05:48:38.905Z] Pot Amount: 30 chips
[2025-03-22T05:48:38.905Z] Player 3 (0xd2e443F6CF19d5d359e82bbEea76e1133028fda5) won the game!
[2025-03-22T05:48:38.905Z] Final game state: State=SHOWDOWN, Pot=30, CurrentBet=10, StateVersion=4
[2025-03-22T05:48:38.905Z] 
----- REVEALED CARDS DURING SHOWDOWN -----
[2025-03-22T05:48:38.955Z] Betting results processed for game 1, winner: 0xd2e443F6CF19d5d359e82bbEea76e1133028fda5
[2025-03-22T05:48:38.958Z] 
===== GAME ENDED EVENT CAPTURED =====
[2025-03-22T05:48:38.958Z] Winner: 0xd2e443F6CF19d5d359e82bbEea76e1133028fda5
[2025-03-22T05:48:38.958Z] Pot Amount: 30 chips
[2025-03-22T05:48:38.958Z] Player 3 (0xd2e443F6CF19d5d359e82bbEea76e1133028fda5) won the game!
[2025-03-22T05:48:39.059Z] Card for 0x1dA9aCB41763f97F744Da547F2d103042e8Ab239: 10 of Hearts
[2025-03-22T05:48:39.061Z] Card for 0x9Fde625ED8A6eC0f3cA393A62be34231a5c167F4: 2 of Diamonds
[2025-03-22T05:48:39.061Z] Card for 0x0Fae37437c1347c23dc279b424663579d2df67df: 4 of Diamonds
[2025-03-22T05:48:39.061Z] Card for 0xd2e443F6CF19d5d359e82bbEea76e1133028fda5: Jack of Hearts
[2025-03-22T05:48:39.185Z] Error getting revealed cards: cardValues[i].toNumber is not a function
[2025-03-22T05:48:39.185Z] 
----- FINAL GAME STATE -----
[2025-03-22T05:48:39.407Z] Game state: ENDED
[2025-03-22T05:48:39.407Z] Pot amount: 0
[2025-03-22T05:48:39.407Z] State version: 5
[2025-03-22T05:48:39.408Z] Is cleaned up: false
[2025-03-22T05:48:39.408Z] 
----- FINAL PLAYER BALANCES -----
[2025-03-22T05:48:39.630Z] Player 1 (0x9Fde625ED8A6eC0f3cA393A62be34231a5c167F4):
[2025-03-22T05:48:39.630Z]   Initial balance: 25
[2025-03-22T05:48:39.631Z]   Final balance: 10
[2025-03-22T05:48:39.631Z]   Difference: -15
[2025-03-22T05:48:39.962Z] Player 2 (0x0Fae37437c1347c23dc279b424663579d2df67df):
[2025-03-22T05:48:39.962Z]   Initial balance: 25
[2025-03-22T05:48:39.962Z]   Final balance: 10
[2025-03-22T05:48:39.962Z]   Difference: -15
[2025-03-22T05:48:40.227Z] Player 3 (0xd2e443F6CF19d5d359e82bbEea76e1133028fda5):
[2025-03-22T05:48:40.228Z]   Initial balance: 25
[2025-03-22T05:48:40.228Z]   Final balance: 38
[2025-03-22T05:48:40.228Z]   Difference: 13
[2025-03-22T05:48:40.228Z] *** Player 3 gained 13 chips - WINNER! ***
[2025-03-22T05:48:40.494Z] Player 4 (0x7B7057B07218fa9f357E39cb2fC2E723C2bfcf9F):
[2025-03-22T05:48:40.495Z]   Initial balance: 25
[2025-03-22T05:48:40.495Z]   Final balance: 25
[2025-03-22T05:48:40.495Z]   Difference: 0
[2025-03-22T05:48:40.495Z] 
----- SPECTATOR BETTING RESULTS -----
[2025-03-22T05:48:40.705Z] Betting results processed: true
[2025-03-22T05:48:40.705Z] Game winner: 0xd2e443F6CF19d5d359e82bbEea76e1133028fda5
[2025-03-22T05:48:40.705Z] Total betting pool: 0.03 ETH
[2025-03-22T05:48:40.706Z] 
----- SPECTATOR WINNINGS CHECK -----
[2025-03-22T05:48:41.181Z] Spectator 1 (0x1dA9aCB41763f97F744Da547F2d103042e8Ab239):
[2025-03-22T05:48:41.181Z]   Bet on: 0x9Fde625ED8A6eC0f3cA393A62be34231a5c167F4
[2025-03-22T05:48:41.182Z]   Bet amount: 0.01 ETH
[2025-03-22T05:48:41.182Z]   Has winnings: false
[2025-03-22T05:48:41.640Z] Spectator 2 (0x52731AEDA26AB8D159226C51180a7542a4287500):
[2025-03-22T05:48:41.640Z]   Bet on: 0x0Fae37437c1347c23dc279b424663579d2df67df
[2025-03-22T05:48:41.641Z]   Bet amount: 0.01 ETH
[2025-03-22T05:48:41.641Z]   Has winnings: false
[2025-03-22T05:48:42.086Z] Spectator 3 (0x45ab32ec402D51096398aA4e6a7aF03180E50bD0):
[2025-03-22T05:48:42.086Z]   Bet on: 0xd2e443F6CF19d5d359e82bbEea76e1133028fda5
[2025-03-22T05:48:42.087Z]   Bet amount: 0.01 ETH
[2025-03-22T05:48:42.087Z]   Has winnings: true
[2025-03-22T05:48:42.087Z]   Winnings amount: 0.03 ETH
[2025-03-22T05:48:42.087Z] 
----- SPECTATORS CLAIMING WINNINGS -----
[2025-03-22T05:48:50.997Z] Spectator 1 (0x1dA9aCB41763f97F744Da547F2d103042e8Ab239) marked bet as claimed (no winnings)
[2025-03-22T05:48:51.305Z]   Bet now marked as claimed: true
[2025-03-22T05:49:02.905Z] Spectator 2 (0x52731AEDA26AB8D159226C51180a7542a4287500) marked bet as claimed (no winnings)
[2025-03-22T05:49:03.154Z]   Bet now marked as claimed: true
[2025-03-22T05:49:19.816Z] 
===== SETTING UP TEST ENVIRONMENT =====
[2025-03-22T05:49:19.851Z] Wallet setup complete.
[2025-03-22T05:49:19.851Z] Owner address: 0x1dA9aCB41763f97F744Da547F2d103042e8Ab239
[2025-03-22T05:49:19.852Z] Player 1 address: 0x9Fde625ED8A6eC0f3cA393A62be34231a5c167F4
[2025-03-22T05:49:19.852Z] Player 2 address: 0x0Fae37437c1347c23dc279b424663579d2df67df
[2025-03-22T05:49:19.852Z] Player 3 address: 0xd2e443F6CF19d5d359e82bbEea76e1133028fda5
[2025-03-22T05:49:19.852Z] Player 4 address: 0x7B7057B07218fa9f357E39cb2fC2E723C2bfcf9F
[2025-03-22T05:49:19.852Z] Spectator 1 address: 0x1dA9aCB41763f97F744Da547F2d103042e8Ab239
[2025-03-22T05:49:19.852Z] Spectator 2 address: 0x52731AEDA26AB8D159226C51180a7542a4287500
[2025-03-22T05:49:19.852Z] Spectator 3 address: 0x45ab32ec402D51096398aA4e6a7aF03180E50bD0
[2025-03-22T05:49:19.852Z] Keeper address: 0x1dA9aCB41763f97F744Da547F2d103042e8Ab239
[2025-03-22T05:49:19.852Z] 
----- CHECKING WALLET BALANCES -----
[2025-03-22T05:49:20.364Z] Address 0x1dA9aCB41763f97F744Da547F2d103042e8Ab239 has 0.314375760566225984 ETH
[2025-03-22T05:49:20.602Z] Address 0x9Fde625ED8A6eC0f3cA393A62be34231a5c167F4 has 0.924698778519113987 ETH
[2025-03-22T05:49:20.853Z] Address 0x0Fae37437c1347c23dc279b424663579d2df67df has 0.924058032162257633 ETH
[2025-03-22T05:49:21.063Z] Address 0xd2e443F6CF19d5d359e82bbEea76e1133028fda5 has 0.975947796825458403 ETH
[2025-03-22T05:49:21.269Z] Address 0x7B7057B07218fa9f357E39cb2fC2E723C2bfcf9F has 1.917057013542363211 ETH
[2025-03-22T05:49:21.482Z] Address 0x1dA9aCB41763f97F744Da547F2d103042e8Ab239 has 0.314375760566225984 ETH
[2025-03-22T05:49:21.751Z] Address 0x52731AEDA26AB8D159226C51180a7542a4287500 has 0.979538899058468128 ETH
[2025-03-22T05:49:21.970Z] Address 0x45ab32ec402D51096398aA4e6a7aF03180E50bD0 has 0.48984848986684648 ETH
[2025-03-22T05:49:22.182Z] Address 0x1dA9aCB41763f97F744Da547F2d103042e8Ab239 has 0.314375760566225984 ETH
[2025-03-22T05:49:22.182Z] 
----- DEPLOYING CONTRACTS -----
[2025-03-22T05:49:22.182Z] Deploying CardLibrary...
[2025-03-22T05:49:28.005Z] CardLibrary deployed at: 0xD881A6fa9a569bb9d38E46bfb300F3CBFFAa05Db
[2025-03-22T05:49:28.005Z] Deploying GameLibrary...
[2025-03-22T05:49:37.625Z] GameLibrary deployed at: 0x343aCe0B410b3d84A400CbC12A083dBa05029d3a
[2025-03-22T05:49:37.626Z] Deploying OneCard main contract...
[2025-03-22T05:49:52.502Z] OneCard contract deployed at: 0x0b28aA918d4fB542F5962323E033658dEEf23842
[2025-03-22T05:49:52.503Z] Deploying PokerSpectatorView contract...
[2025-03-22T05:50:02.480Z] PokerSpectatorView contract deployed at: 0x1f9498caeF1Ff488D4C4F6D7FF55C674bba40d2c
[2025-03-22T05:50:02.480Z] Deploying SpectatorBetting contract...
[2025-03-22T05:50:16.192Z] SpectatorBetting contract deployed at: 0x8707A4646E5d0001837F9562383064a96C835f67
[2025-03-22T05:50:16.192Z] Setting spectator betting contract in OneCard contract...
[2025-03-22T05:50:25.968Z] SpectatorBetting contract set in OneCard
[2025-03-22T05:50:25.969Z] 
Add these to your .env file for future use:
[2025-03-22T05:50:25.969Z] POKER_CONTRACT_ADDRESS=0x0b28aA918d4fB542F5962323E033658dEEf23842
[2025-03-22T05:50:25.969Z] SPECTATOR_CONTRACT_ADDRESS=0x1f9498caeF1Ff488D4C4F6D7FF55C674bba40d2c
[2025-03-22T05:50:25.969Z] SPECTATOR_BETTING_ADDRESS=0x8707A4646E5d0001837F9562383064a96C835f67
[2025-03-22T05:50:25.972Z] 
===== STARTING ONE CARD POKER WITH MONTY HALL AND SPECTATOR BETTING TEST =====
[2025-03-22T05:50:25.973Z] 
----- ADDING PLAYERS TO WHITELIST -----
[2025-03-22T05:50:39.584Z] Added 4 players to whitelist
[2025-03-22T05:50:39.585Z] 
----- CREATING A NEW GAME -----
[2025-03-22T05:50:53.206Z] Created Game with ID: 1
[2025-03-22T05:50:53.442Z] Initial players in game: 5
[2025-03-22T05:50:53.442Z] Player 1: 0x1dA9aCB41763f97F744Da547F2d103042e8Ab239
[2025-03-22T05:50:53.442Z] Player 2: 0x9Fde625ED8A6eC0f3cA393A62be34231a5c167F4
[2025-03-22T05:50:53.442Z] Player 3: 0x0Fae37437c1347c23dc279b424663579d2df67df
[2025-03-22T05:50:53.442Z] Player 4: 0xd2e443F6CF19d5d359e82bbEea76e1133028fda5
[2025-03-22T05:50:53.442Z] Player 5: 0x7B7057B07218fa9f357E39cb2fC2E723C2bfcf9F
[2025-03-22T05:50:53.442Z] 
----- VERIFYING GAME INFO BEFORE SPECTATOR BETTING -----
[2025-03-22T05:50:53.677Z] Game state: REGISTRATION
[2025-03-22T05:50:53.678Z] Player count: 5
[2025-03-22T05:50:53.678Z] Active count: 5
[2025-03-22T05:50:53.678Z] Game keeper: 0x1dA9aCB41763f97F744Da547F2d103042e8Ab239
[2025-03-22T05:50:53.678Z] State version: 1
[2025-03-22T05:50:53.678Z] Is cleaned up: false
[2025-03-22T05:50:53.678Z] 
----- CHECKING IF BETTING IS OPEN -----
[2025-03-22T05:50:53.934Z] Betting open: true
[2025-03-22T05:50:53.934Z] Results processed: false
[2025-03-22T05:50:53.935Z] Total bet amount: 0.0 ETH
[2025-03-22T05:50:53.935Z] 
----- SPECTATORS PLACING BETS -----
[2025-03-22T05:51:01.638Z] Spectator 1 (0x1dA9aCB41763f97F744Da547F2d103042e8Ab239) bet 0.01 ETH on Player 1 (0x9Fde625ED8A6eC0f3cA393A62be34231a5c167F4)
[2025-03-22T05:51:01.729Z] Spectator 0x1dA9aCB41763f97F744Da547F2d103042e8Ab239 placed a bet of 0.01 ETH on player 0x9Fde625ED8A6eC0f3cA393A62be34231a5c167F4
[2025-03-22T05:51:01.868Z] Verified bet - Player: 0x9Fde625ED8A6eC0f3cA393A62be34231a5c167F4, Amount: 0.01 ETH, Claimed: false
[2025-03-22T05:51:13.589Z] Spectator 2 (0x52731AEDA26AB8D159226C51180a7542a4287500) bet 0.01 ETH on Player 2 (0x0Fae37437c1347c23dc279b424663579d2df67df)
[2025-03-22T05:51:13.690Z] Spectator 0x52731AEDA26AB8D159226C51180a7542a4287500 placed a bet of 0.01 ETH on player 0x0Fae37437c1347c23dc279b424663579d2df67df
[2025-03-22T05:51:13.851Z] Verified bet - Player: 0x0Fae37437c1347c23dc279b424663579d2df67df, Amount: 0.01 ETH, Claimed: false
[2025-03-22T05:51:29.646Z] Spectator 3 (0x45ab32ec402D51096398aA4e6a7aF03180E50bD0) bet 0.01 ETH on Player 3 (0xd2e443F6CF19d5d359e82bbEea76e1133028fda5)
[2025-03-22T05:51:29.753Z] Spectator 0x45ab32ec402D51096398aA4e6a7aF03180E50bD0 placed a bet of 0.01 ETH on player 0xd2e443F6CF19d5d359e82bbEea76e1133028fda5
[2025-03-22T05:51:29.881Z] Verified bet - Player: 0xd2e443F6CF19d5d359e82bbEea76e1133028fda5, Amount: 0.01 ETH, Claimed: false
[2025-03-22T05:51:29.881Z] 
----- CHECKING TOTAL BETS ON EACH PLAYER -----
[2025-03-22T05:51:30.112Z] Total bet on Player 1 (0x9Fde625ED8A6eC0f3cA393A62be34231a5c167F4): 0.01 ETH
[2025-03-22T05:51:30.314Z] Total bet on Player 2 (0x0Fae37437c1347c23dc279b424663579d2df67df): 0.01 ETH
[2025-03-22T05:51:30.515Z] Total bet on Player 3 (0xd2e443F6CF19d5d359e82bbEea76e1133028fda5): 0.01 ETH
[2025-03-22T05:51:30.744Z] Total bet on Player 4 (0x7B7057B07218fa9f357E39cb2fC2E723C2bfcf9F): 0.0 ETH
[2025-03-22T05:51:30.998Z] Total betting pool: 0.03 ETH
[2025-03-22T05:51:30.998Z] 
----- STARTING PEEK PHASE -----
[2025-03-22T05:51:32.143Z] startPeekPhase transaction submitted, waiting for confirmation...
[2025-03-22T05:51:37.560Z] startPeekPhase transaction confirmed!
[2025-03-22T05:51:37.560Z] Buffer period started before peek phase. Current state: REGISTRATION, Next state: PEEK_PHASE
[2025-03-22T05:51:37.560Z] Peek phase started for game 1
[2025-03-22T05:51:37.560Z] Game state updated: State=PEEK_PHASE, Pot=0, CurrentBet=0, StateVersion=2
[2025-03-22T05:51:37.647Z] Betting closed for game 1
[2025-03-22T05:51:37.771Z] Betting open after peek phase start: false
[2025-03-22T05:51:37.986Z] Phase end time: 2025-03-22T05:54:06.000Z
[2025-03-22T05:51:37.986Z] Buffer end time: 2025-03-22T05:52:06.000Z
[2025-03-22T05:51:37.986Z] Waiting 29 seconds for buffer period to end...
[2025-03-22T05:51:37.986Z] Waiting for buffer period to end on TEN network...
[2025-03-22T05:52:07.993Z] Buffer period ended
[2025-03-22T05:52:07.994Z] 
----- PLAYERS PEEKING AT CARDS -----
[2025-03-22T05:52:08.205Z] Player 1 initial chip balance: 25
[2025-03-22T05:52:17.552Z] Player 1 (0x9Fde625ED8A6eC0f3cA393A62be34231a5c167F4) peeked at their card
[2025-03-22T05:52:17.552Z] Player action: peek, Amount: 5, Nonce: 1
[2025-03-22T05:52:17.618Z] Card for 0x9Fde625ED8A6eC0f3cA393A62be34231a5c167F4: 9 of Diamonds
[2025-03-22T05:52:17.848Z] Player 1 chip balance after peeking: 20
[2025-03-22T05:52:18.082Z] Player 2 initial chip balance: 25
[2025-03-22T05:52:25.591Z] Player 2 (0x0Fae37437c1347c23dc279b424663579d2df67df) peeked at their card
[2025-03-22T05:52:25.591Z] Player action: peek, Amount: 5, Nonce: 1
[2025-03-22T05:52:25.649Z] Card for 0x0Fae37437c1347c23dc279b424663579d2df67df: 3 of Spades
[2025-03-22T05:52:25.821Z] Player 2 chip balance after peeking: 20
[2025-03-22T05:52:25.822Z] 
----- PLAYER USING MONTY HALL OPTION -----
[2025-03-22T05:52:26.039Z] Player 3 initial chip balance: 25
[2025-03-22T05:52:37.626Z] Player 3 (0xd2e443F6CF19d5d359e82bbEea76e1133028fda5) used Monty Hall option
[2025-03-22T05:52:37.626Z] Player action: montyHall, Amount: 7, Nonce: 1
[2025-03-22T05:52:37.803Z] Monty Hall cards revealed to 0xd2e443F6CF19d5d359e82bbEea76e1133028fda5:
[2025-03-22T05:52:37.804Z] - 8 of Clubs
[2025-03-22T05:52:37.804Z] - 8 of Spades
[2025-03-22T05:52:37.877Z] Player 3 chip balance after using Monty Hall: 18
[2025-03-22T05:52:49.651Z] Player 3 decided to swap their card
[2025-03-22T05:52:49.652Z] Player action: swapCard, Amount: 0, Nonce: 2
[2025-03-22T05:52:49.652Z] Player 4 (0x7B7057B07218fa9f357E39cb2fC2E723C2bfcf9F) chose not to peek or use Monty Hall
[2025-03-22T05:52:49.706Z] 0xd2e443F6CF19d5d359e82bbEea76e1133028fda5 swapped 4 of Clubs for 8 of Hearts
[2025-03-22T05:52:49.885Z] 
----- PLAYER STATUS AFTER PEEK PHASE -----
[2025-03-22T05:52:50.120Z] Player 1 (0x9Fde625ED8A6eC0f3cA393A62be34231a5c167F4):
[2025-03-22T05:52:50.120Z]   Chip balance: 20
[2025-03-22T05:52:50.120Z]   Has peeked: true
[2025-03-22T05:52:50.120Z]   Used Monty Hall: false
[2025-03-22T05:52:50.120Z]   Action nonce: 1
[2025-03-22T05:52:50.360Z] Player 2 (0x0Fae37437c1347c23dc279b424663579d2df67df):
[2025-03-22T05:52:50.360Z]   Chip balance: 20
[2025-03-22T05:52:50.361Z]   Has peeked: true
[2025-03-22T05:52:50.361Z]   Used Monty Hall: false
[2025-03-22T05:52:50.361Z]   Action nonce: 1
[2025-03-22T05:52:50.625Z] Player 3 (0xd2e443F6CF19d5d359e82bbEea76e1133028fda5):
[2025-03-22T05:52:50.625Z]   Chip balance: 18
[2025-03-22T05:52:50.625Z]   Has peeked: false
[2025-03-22T05:52:50.625Z]   Used Monty Hall: true
[2025-03-22T05:52:50.625Z]   Action nonce: 2
[2025-03-22T05:52:50.851Z] Player 4 (0x7B7057B07218fa9f357E39cb2fC2E723C2bfcf9F):
[2025-03-22T05:52:50.851Z]   Chip balance: 25
[2025-03-22T05:52:50.851Z]   Has peeked: false
[2025-03-22T05:52:50.851Z]   Used Monty Hall: false
[2025-03-22T05:52:50.852Z]   Action nonce: 0
[2025-03-22T05:52:50.852Z] 
----- WAITING FOR PEEK PHASE TO END -----
[2025-03-22T05:52:51.148Z] Waiting 75 seconds for peek phase to end...
[2025-03-22T05:52:51.149Z] Waiting for peek phase to end on TEN network...
[2025-03-22T05:54:11.159Z] Peek phase ended
[2025-03-22T05:54:11.159Z] 
----- ENDING PEEK PHASE -----
[2025-03-22T05:54:12.178Z] endPeekPhase transaction submitted, waiting for confirmation...
[2025-03-22T05:54:25.635Z] endPeekPhase transaction confirmed!
[2025-03-22T05:54:25.636Z] Buffer period started before betting phase. Current state: PEEK_PHASE, Next state: BETTING
[2025-03-22T05:54:25.636Z] Betting phase started for game 1
[2025-03-22T05:54:25.636Z] Game state updated: State=BETTING, Pot=0, CurrentBet=0, StateVersion=3
[2025-03-22T05:54:25.886Z] Phase end time: 2025-03-22T05:59:54.000Z
[2025-03-22T05:54:25.886Z] Buffer end time: 2025-03-22T05:54:54.000Z
[2025-03-22T05:54:25.886Z] Waiting 29 seconds for buffer period to end...
[2025-03-22T05:54:25.886Z] Waiting for buffer period to end on TEN network...
[2025-03-22T05:54:55.893Z] Buffer period ended
[2025-03-22T05:54:55.893Z] 
----- PLAYERS PLACING BETS -----
[2025-03-22T05:55:01.694Z] Player 1 (0x9Fde625ED8A6eC0f3cA393A62be34231a5c167F4) bet 5 chips
[2025-03-22T05:55:01.695Z] Player action: bet, Amount: 5, Nonce: 2
[2025-03-22T05:55:01.941Z] Pot after bet 1: 5, Current bet: 5
[2025-03-22T05:55:13.694Z] Player 2 (0x0Fae37437c1347c23dc279b424663579d2df67df) bet 5 chips
[2025-03-22T05:55:13.694Z] Player action: bet, Amount: 5, Nonce: 2
[2025-03-22T05:55:13.914Z] Pot after bet 2: 10, Current bet: 5
[2025-03-22T05:55:25.720Z] Player 3 (0xd2e443F6CF19d5d359e82bbEea76e1133028fda5) bet 10 chips (raising to 10)
[2025-03-22T05:55:25.721Z] Player action: bet, Amount: 10, Nonce: 3
[2025-03-22T05:55:25.932Z] Pot after bet 3: 20, Current bet: 10
[2025-03-22T05:55:37.626Z] Player 1 (0x9Fde625ED8A6eC0f3cA393A62be34231a5c167F4) bet additional 5 chips (calling the raise)
[2025-03-22T05:55:37.626Z] Player action: bet, Amount: 5, Nonce: 3
[2025-03-22T05:55:37.832Z] Pot after bet 4: 25, Current bet: 10
[2025-03-22T05:55:49.647Z] Player 2 (0x0Fae37437c1347c23dc279b424663579d2df67df) bet additional 5 chips (calling the raise)
[2025-03-22T05:55:49.647Z] Player action: bet, Amount: 5, Nonce: 3
[2025-03-22T05:55:49.875Z] Pot after bet 5: 30, Current bet: 10
[2025-03-22T05:56:01.643Z] Player 4 (0x7B7057B07218fa9f357E39cb2fC2E723C2bfcf9F) folded
[2025-03-22T05:56:01.643Z] Player action: fold, Amount: 0, Nonce: 1
[2025-03-22T05:56:01.854Z] Active players after fold: 4
[2025-03-22T05:56:01.854Z] 
----- PLAYER STATUS AFTER BETTING -----
[2025-03-22T05:56:02.109Z] Player 1 (0x9Fde625ED8A6eC0f3cA393A62be34231a5c167F4):
[2025-03-22T05:56:02.109Z]   Chip balance: 10
[2025-03-22T05:56:02.109Z]   Current bet: 10
[2025-03-22T05:56:02.110Z]   Has folded: false
[2025-03-22T05:56:02.110Z]   Action nonce: 3
[2025-03-22T05:56:02.357Z] Player 2 (0x0Fae37437c1347c23dc279b424663579d2df67df):
[2025-03-22T05:56:02.357Z]   Chip balance: 10
[2025-03-22T05:56:02.357Z]   Current bet: 10
[2025-03-22T05:56:02.357Z]   Has folded: false
[2025-03-22T05:56:02.357Z]   Action nonce: 3
[2025-03-22T05:56:02.567Z] Player 3 (0xd2e443F6CF19d5d359e82bbEea76e1133028fda5):
[2025-03-22T05:56:02.567Z]   Chip balance: 8
[2025-03-22T05:56:02.567Z]   Current bet: 10
[2025-03-22T05:56:02.567Z]   Has folded: false
[2025-03-22T05:56:02.567Z]   Action nonce: 3
[2025-03-22T05:56:02.762Z] Player 4 (0x7B7057B07218fa9f357E39cb2fC2E723C2bfcf9F):
[2025-03-22T05:56:02.762Z]   Chip balance: 25
[2025-03-22T05:56:02.762Z]   Current bet: 0
[2025-03-22T05:56:02.762Z]   Has folded: true
[2025-03-22T05:56:02.762Z]   Action nonce: 1
[2025-03-22T05:56:03.046Z] Have all active players matched the current bet? false
[2025-03-22T05:56:03.047Z] 
----- WAITING FOR BETTING PHASE TO END -----
[2025-03-22T05:56:03.311Z] Betting phase ends in 231 seconds at 2025-03-22T05:59:54.000Z
[2025-03-22T05:56:03.311Z] All players have matched bets, manually ending betting phase...
[2025-03-22T05:56:03.311Z] 
----- CHECKING GAME STATE BEFORE ENDING BETTING PHASE -----
[2025-03-22T05:56:03.568Z] Current game state: BETTING
[2025-03-22T05:56:03.568Z] Phase end time: 2025-03-22T05:59:54.000Z
[2025-03-22T05:56:03.568Z] Current time: 2025-03-22T05:56:03.568Z
[2025-03-22T05:56:03.569Z] Buffer end time: 2025-03-22T05:54:54.000Z
[2025-03-22T05:56:03.569Z] Is in buffer period: false
[2025-03-22T05:56:03.569Z] Is phase ended: false
[2025-03-22T05:56:03.800Z] Is caller (0x1dA9aCB41763f97F744Da547F2d103042e8Ab239) a keeper: true
[2025-03-22T05:56:03.800Z] Betting phase hasn't ended yet. Waiting 231 seconds...
[2025-03-22T05:56:03.800Z] Waiting for phase to end on TEN network...
[2025-03-22T05:59:58.860Z] Betting phase has now ended
[2025-03-22T05:59:59.086Z] Game state after waiting: BETTING
[2025-03-22T05:59:59.086Z] Updated phase end time: 2025-03-22T05:59:54.000Z
[2025-03-22T05:59:59.086Z] Updated buffer end time: 2025-03-22T05:54:54.000Z
[2025-03-22T05:59:59.086Z] 
----- ENDING BETTING PHASE -----
[2025-03-22T06:00:00.338Z] endBettingPhase transaction submitted, waiting for confirmation...
[2025-03-22T06:00:13.810Z] endBettingPhase transaction confirmed!
[2025-03-22T06:00:13.810Z] Showdown phase started
[2025-03-22T06:00:13.810Z] 
===== GAME RESULTS =====
[2025-03-22T06:00:13.810Z] Winner: 0x1dA9aCB41763f97F744Da547F2d103042e8Ab239
[2025-03-22T06:00:13.810Z] Pot Amount: 30 chips
[2025-03-22T06:00:13.810Z] Final game state: State=SHOWDOWN, Pot=30, CurrentBet=10, StateVersion=4
[2025-03-22T06:00:13.810Z] 
----- REVEALED CARDS DURING SHOWDOWN -----
[2025-03-22T06:00:13.816Z] 
===== GAME ENDED EVENT CAPTURED =====
[2025-03-22T06:00:13.816Z] Winner: 0x1dA9aCB41763f97F744Da547F2d103042e8Ab239
[2025-03-22T06:00:13.816Z] Pot Amount: 30 chips
[2025-03-22T06:00:13.817Z] Betting results processed for game 1, winner: 0x1dA9aCB41763f97F744Da547F2d103042e8Ab239
[2025-03-22T06:00:14.032Z] Error getting revealed cards: cardValues[i].toNumber is not a function
[2025-03-22T06:00:14.032Z] 
----- FINAL GAME STATE -----
[2025-03-22T06:00:14.091Z] Card for 0x1dA9aCB41763f97F744Da547F2d103042e8Ab239: King of Spades
[2025-03-22T06:00:14.092Z] Card for 0x9Fde625ED8A6eC0f3cA393A62be34231a5c167F4: 9 of Diamonds
[2025-03-22T06:00:14.092Z] Card for 0x0Fae37437c1347c23dc279b424663579d2df67df: 3 of Spades
[2025-03-22T06:00:14.092Z] Card for 0xd2e443F6CF19d5d359e82bbEea76e1133028fda5: 8 of Hearts
[2025-03-22T06:00:14.281Z] Game state: ENDED
[2025-03-22T06:00:14.282Z] Pot amount: 0
[2025-03-22T06:00:14.282Z] State version: 5
[2025-03-22T06:00:14.282Z] Is cleaned up: false
[2025-03-22T06:00:14.282Z] 
----- FINAL PLAYER BALANCES -----
[2025-03-22T06:00:14.520Z] Player 1 (0x9Fde625ED8A6eC0f3cA393A62be34231a5c167F4):
[2025-03-22T06:00:14.520Z]   Initial balance: 25
[2025-03-22T06:00:14.520Z]   Final balance: 10
[2025-03-22T06:00:14.521Z]   Difference: -15
[2025-03-22T06:00:14.749Z] Player 2 (0x0Fae37437c1347c23dc279b424663579d2df67df):
[2025-03-22T06:00:14.750Z]   Initial balance: 25
[2025-03-22T06:00:14.750Z]   Final balance: 10
[2025-03-22T06:00:14.750Z]   Difference: -15
[2025-03-22T06:00:14.968Z] Player 3 (0xd2e443F6CF19d5d359e82bbEea76e1133028fda5):
[2025-03-22T06:00:14.968Z]   Initial balance: 25
[2025-03-22T06:00:14.968Z]   Final balance: 8
[2025-03-22T06:00:14.968Z]   Difference: -17
[2025-03-22T06:00:15.233Z] Player 4 (0x7B7057B07218fa9f357E39cb2fC2E723C2bfcf9F):
[2025-03-22T06:00:15.234Z]   Initial balance: 25
[2025-03-22T06:00:15.234Z]   Final balance: 25
[2025-03-22T06:00:15.234Z]   Difference: 0
[2025-03-22T06:00:15.234Z] 
----- SPECTATOR BETTING RESULTS -----
[2025-03-22T06:00:15.527Z] Betting results processed: true
[2025-03-22T06:00:15.527Z] Game winner: 0x1dA9aCB41763f97F744Da547F2d103042e8Ab239
[2025-03-22T06:00:15.528Z] Total betting pool: 0.03 ETH
[2025-03-22T06:00:15.528Z] 
----- SPECTATOR WINNINGS CHECK -----
[2025-03-22T06:00:15.951Z] Spectator 1 (0x1dA9aCB41763f97F744Da547F2d103042e8Ab239):
[2025-03-22T06:00:15.951Z]   Bet on: 0x9Fde625ED8A6eC0f3cA393A62be34231a5c167F4
[2025-03-22T06:00:15.952Z]   Bet amount: 0.01 ETH
[2025-03-22T06:00:15.952Z]   Has winnings: false
[2025-03-22T06:00:16.377Z] Spectator 2 (0x52731AEDA26AB8D159226C51180a7542a4287500):
[2025-03-22T06:00:16.377Z]   Bet on: 0x0Fae37437c1347c23dc279b424663579d2df67df
[2025-03-22T06:00:16.377Z]   Bet amount: 0.01 ETH
[2025-03-22T06:00:16.378Z]   Has winnings: false
[2025-03-22T06:00:16.830Z] Spectator 3 (0x45ab32ec402D51096398aA4e6a7aF03180E50bD0):
[2025-03-22T06:00:16.830Z]   Bet on: 0xd2e443F6CF19d5d359e82bbEea76e1133028fda5
[2025-03-22T06:00:16.830Z]   Bet amount: 0.01 ETH
[2025-03-22T06:00:16.831Z]   Has winnings: false
[2025-03-22T06:00:16.831Z] 
----- SPECTATORS CLAIMING WINNINGS -----
[2025-03-22T06:00:25.675Z] Spectator 1 (0x1dA9aCB41763f97F744Da547F2d103042e8Ab239) marked bet as claimed (no winnings)
[2025-03-22T06:00:25.893Z]   Bet now marked as claimed: true
[2025-03-22T06:13:55.801Z] 
===== SETTING UP TEST ENVIRONMENT =====
[2025-03-22T06:13:55.837Z] Wallet setup complete.
[2025-03-22T06:13:55.837Z] Owner address: 0x1dA9aCB41763f97F744Da547F2d103042e8Ab239
[2025-03-22T06:13:55.838Z] Player 1 address: 0x9Fde625ED8A6eC0f3cA393A62be34231a5c167F4
[2025-03-22T06:13:55.838Z] Player 2 address: 0x0Fae37437c1347c23dc279b424663579d2df67df
[2025-03-22T06:13:55.838Z] Player 3 address: 0xd2e443F6CF19d5d359e82bbEea76e1133028fda5
[2025-03-22T06:13:55.838Z] Player 4 address: 0x7B7057B07218fa9f357E39cb2fC2E723C2bfcf9F
[2025-03-22T06:13:55.838Z] Spectator 1 address: 0x1dA9aCB41763f97F744Da547F2d103042e8Ab239
[2025-03-22T06:13:55.838Z] Spectator 2 address: 0x52731AEDA26AB8D159226C51180a7542a4287500
[2025-03-22T06:13:55.838Z] Spectator 3 address: 0x45ab32ec402D51096398aA4e6a7aF03180E50bD0
[2025-03-22T06:13:55.838Z] Keeper address: 0x1dA9aCB41763f97F744Da547F2d103042e8Ab239
[2025-03-22T06:13:55.838Z] 
----- CHECKING WALLET BALANCES -----
[2025-03-22T06:13:56.399Z] Address 0x1dA9aCB41763f97F744Da547F2d103042e8Ab239 has 0.288939135122849844 ETH
[2025-03-22T06:13:56.640Z] Address 0x9Fde625ED8A6eC0f3cA393A62be34231a5c167F4 has 0.924284485793865894 ETH
[2025-03-22T06:13:56.934Z] Address 0x0Fae37437c1347c23dc279b424663579d2df67df has 0.923699204664171927 ETH
[2025-03-22T06:13:57.215Z] Address 0xd2e443F6CF19d5d359e82bbEea76e1133028fda5 has 0.975378467781740194 ETH
[2025-03-22T06:13:57.616Z] Address 0x7B7057B07218fa9f357E39cb2fC2E723C2bfcf9F has 1.916933433811951681 ETH
[2025-03-22T06:13:57.863Z] Address 0x1dA9aCB41763f97F744Da547F2d103042e8Ab239 has 0.288939135122849844 ETH
[2025-03-22T06:13:58.134Z] Address 0x52731AEDA26AB8D159226C51180a7542a4287500 has 0.969387367929232874 ETH
[2025-03-22T06:13:58.398Z] Address 0x45ab32ec402D51096398aA4e6a7aF03180E50bD0 has 0.479696984595578548 ETH
[2025-03-22T06:13:58.612Z] Address 0x1dA9aCB41763f97F744Da547F2d103042e8Ab239 has 0.288939135122849844 ETH
[2025-03-22T06:13:58.612Z] 
----- DEPLOYING CONTRACTS -----
[2025-03-22T06:13:58.612Z] Deploying CardLibrary...
[2025-03-22T06:14:05.061Z] CardLibrary deployed at: 0x9E2dedefFE29B104f12E8Ce1da98Cd6348e34fec
[2025-03-22T06:14:05.062Z] Deploying GameLibrary...
[2025-03-22T06:14:15.011Z] GameLibrary deployed at: 0xAab74b528a8499A3c9e8D53d6D49A6C9756730F1
[2025-03-22T06:14:15.011Z] Deploying OneCard main contract...
[2025-03-22T06:14:29.096Z] OneCard contract deployed at: 0xAEa4605E99b9E99442cBf4F83cDe3ED6984493f5
[2025-03-22T06:14:29.096Z] Deploying PokerSpectatorView contract...
[2025-03-22T06:14:38.870Z] PokerSpectatorView contract deployed at: 0xB363Ba1AB3EFd63495BF3505C5405960cf301450
[2025-03-22T06:14:38.871Z] Deploying SpectatorBetting contract...
[2025-03-22T06:14:53.216Z] SpectatorBetting contract deployed at: 0xcE450e324F56e6FC212de94703690D81Ad49dC47
[2025-03-22T06:14:53.216Z] Setting spectator betting contract in OneCard contract...
[2025-03-22T06:15:04.143Z] SpectatorBetting contract set in OneCard
[2025-03-22T06:15:04.143Z] 
Add these to your .env file for future use:
[2025-03-22T06:15:04.143Z] POKER_CONTRACT_ADDRESS=0xAEa4605E99b9E99442cBf4F83cDe3ED6984493f5
[2025-03-22T06:15:04.144Z] SPECTATOR_CONTRACT_ADDRESS=0xB363Ba1AB3EFd63495BF3505C5405960cf301450
[2025-03-22T06:15:04.144Z] SPECTATOR_BETTING_ADDRESS=0xcE450e324F56e6FC212de94703690D81Ad49dC47
[2025-03-22T06:15:04.147Z] 
===== STARTING ONE CARD POKER WITH MONTY HALL AND SPECTATOR BETTING TEST =====
[2025-03-22T06:15:04.147Z] 
----- ADDING PLAYERS TO WHITELIST -----
[2025-03-22T06:15:13.875Z] Added 4 players to whitelist
[2025-03-22T06:15:13.876Z] 
----- CREATING A NEW GAME -----
[2025-03-22T06:15:27.988Z] Created Game with ID: 1
[2025-03-22T06:15:28.257Z] Initial players in game: 5
[2025-03-22T06:15:28.258Z] Player 1: 0x1dA9aCB41763f97F744Da547F2d103042e8Ab239
[2025-03-22T06:15:28.258Z] Player 2: 0x9Fde625ED8A6eC0f3cA393A62be34231a5c167F4
[2025-03-22T06:15:28.258Z] Player 3: 0x0Fae37437c1347c23dc279b424663579d2df67df
[2025-03-22T06:15:28.258Z] Player 4: 0xd2e443F6CF19d5d359e82bbEea76e1133028fda5
[2025-03-22T06:15:28.258Z] Player 5: 0x7B7057B07218fa9f357E39cb2fC2E723C2bfcf9F
[2025-03-22T06:15:28.258Z] 
----- VERIFYING GAME INFO BEFORE SPECTATOR BETTING -----
[2025-03-22T06:15:28.453Z] Game state: REGISTRATION
[2025-03-22T06:15:28.453Z] Player count: 5
[2025-03-22T06:15:28.453Z] Active count: 5
[2025-03-22T06:15:28.453Z] Game keeper: 0x1dA9aCB41763f97F744Da547F2d103042e8Ab239
[2025-03-22T06:15:28.453Z] State version: 1
[2025-03-22T06:15:28.453Z] Is cleaned up: false
[2025-03-22T06:15:28.453Z] 
----- CHECKING IF BETTING IS OPEN -----
[2025-03-22T06:15:28.698Z] Betting open: true
[2025-03-22T06:15:28.698Z] Results processed: false
[2025-03-22T06:15:28.700Z] Total bet amount: 0.0 ETH
[2025-03-22T06:15:28.700Z] 
----- SPECTATORS PLACING BETS -----
[2025-03-22T06:15:40.504Z] Spectator 0x1dA9aCB41763f97F744Da547F2d103042e8Ab239 placed a bet of 0.01 ETH on player 0x9Fde625ED8A6eC0f3cA393A62be34231a5c167F4
[2025-03-22T06:15:40.509Z] Spectator 1 (0x1dA9aCB41763f97F744Da547F2d103042e8Ab239) bet 0.01 ETH on Player 1 (0x9Fde625ED8A6eC0f3cA393A62be34231a5c167F4)
[2025-03-22T06:15:40.907Z] Verified bet - Player: 0x9Fde625ED8A6eC0f3cA393A62be34231a5c167F4, Amount: 0.01 ETH, Claimed: false
[2025-03-22T06:15:52.430Z] Spectator 0x52731AEDA26AB8D159226C51180a7542a4287500 placed a bet of 0.01 ETH on player 0x0Fae37437c1347c23dc279b424663579d2df67df
[2025-03-22T06:15:52.444Z] Spectator 2 (0x52731AEDA26AB8D159226C51180a7542a4287500) bet 0.01 ETH on Player 2 (0x0Fae37437c1347c23dc279b424663579d2df67df)
[2025-03-22T06:15:52.664Z] Verified bet - Player: 0x0Fae37437c1347c23dc279b424663579d2df67df, Amount: 0.01 ETH, Claimed: false
[2025-03-22T06:16:04.434Z] Spectator 3 (0x45ab32ec402D51096398aA4e6a7aF03180E50bD0) bet 0.01 ETH on Player 3 (0xd2e443F6CF19d5d359e82bbEea76e1133028fda5)
[2025-03-22T06:16:04.544Z] Spectator 0x45ab32ec402D51096398aA4e6a7aF03180E50bD0 placed a bet of 0.01 ETH on player 0xd2e443F6CF19d5d359e82bbEea76e1133028fda5
[2025-03-22T06:16:04.685Z] Verified bet - Player: 0xd2e443F6CF19d5d359e82bbEea76e1133028fda5, Amount: 0.01 ETH, Claimed: false
[2025-03-22T06:16:04.686Z] 
----- CHECKING TOTAL BETS ON EACH PLAYER -----
[2025-03-22T06:16:04.946Z] Total bet on Player 1 (0x9Fde625ED8A6eC0f3cA393A62be34231a5c167F4): 0.01 ETH
[2025-03-22T06:16:05.192Z] Total bet on Player 2 (0x0Fae37437c1347c23dc279b424663579d2df67df): 0.01 ETH
[2025-03-22T06:16:05.489Z] Total bet on Player 3 (0xd2e443F6CF19d5d359e82bbEea76e1133028fda5): 0.01 ETH
[2025-03-22T06:16:05.717Z] Total bet on Player 4 (0x7B7057B07218fa9f357E39cb2fC2E723C2bfcf9F): 0.0 ETH
[2025-03-22T06:16:06.045Z] Total betting pool: 0.03 ETH
[2025-03-22T06:16:06.046Z] 
----- STARTING PEEK PHASE -----
[2025-03-22T06:16:07.248Z] startPeekPhase transaction submitted, waiting for confirmation...
[2025-03-22T06:16:16.491Z] startPeekPhase transaction confirmed!
[2025-03-22T06:16:16.491Z] Buffer period started before peek phase. Current state: REGISTRATION, Next state: PEEK_PHASE
[2025-03-22T06:16:16.491Z] Peek phase started for game 1
[2025-03-22T06:16:16.492Z] Game state updated: State=PEEK_PHASE, Pot=0, CurrentBet=0, StateVersion=2
[2025-03-22T06:16:17.006Z] Betting open after peek phase start: false
[2025-03-22T06:16:17.231Z] Betting closed for game 1
[2025-03-22T06:16:17.262Z] Phase end time: 2025-03-22T06:18:42.000Z
[2025-03-22T06:16:17.263Z] Buffer end time: 2025-03-22T06:16:42.000Z
[2025-03-22T06:16:17.263Z] Waiting 25 seconds for buffer period to end...
[2025-03-22T06:16:17.263Z] Waiting for buffer period to end on TEN network...
[2025-03-22T06:16:22.264Z] 20 seconds remaining in buffer period
[2025-03-22T06:16:32.267Z] 10 seconds remaining in buffer period
[2025-03-22T06:16:42.270Z] Buffer period ended
[2025-03-22T06:16:42.271Z] 
----- PLAYERS PEEKING AT CARDS -----
[2025-03-22T06:16:42.496Z] Player 1 initial chip balance: 25
[2025-03-22T06:16:52.417Z] Player 1 (0x9Fde625ED8A6eC0f3cA393A62be34231a5c167F4) peeked at their card
[2025-03-22T06:16:52.417Z] Player action: peek, Amount: 5, Nonce: 1
[2025-03-22T06:16:52.564Z] Card for 0x9Fde625ED8A6eC0f3cA393A62be34231a5c167F4: 4 of Spades
[2025-03-22T06:16:52.657Z] Player 1 chip balance after peeking: 20
[2025-03-22T06:16:52.876Z] Player 2 initial chip balance: 25
[2025-03-22T06:17:04.392Z] Player 2 (0x0Fae37437c1347c23dc279b424663579d2df67df) peeked at their card
[2025-03-22T06:17:04.392Z] Player action: peek, Amount: 5, Nonce: 1
[2025-03-22T06:17:04.616Z] Player 2 chip balance after peeking: 20
[2025-03-22T06:17:04.617Z] 
----- PLAYER USING MONTY HALL OPTION -----
[2025-03-22T06:17:04.620Z] Card for 0x0Fae37437c1347c23dc279b424663579d2df67df: 8 of Hearts
[2025-03-22T06:17:04.941Z] Player 3 initial chip balance: 25
[2025-03-22T06:17:16.420Z] Player 3 (0xd2e443F6CF19d5d359e82bbEea76e1133028fda5) used Monty Hall option
[2025-03-22T06:17:16.421Z] Player action: montyHall, Amount: 7, Nonce: 1
[2025-03-22T06:17:16.670Z] Player 3 chip balance after using Monty Hall: 18
[2025-03-22T06:17:16.677Z] Monty Hall cards revealed to 0xd2e443F6CF19d5d359e82bbEea76e1133028fda5:
[2025-03-22T06:17:16.677Z] - 4 of Hearts
[2025-03-22T06:17:16.677Z] - 10 of Spades
[2025-03-22T06:17:28.439Z] Player 3 decided to swap their card
[2025-03-22T06:17:28.439Z] Player action: swapCard, Amount: 0, Nonce: 2
[2025-03-22T06:17:28.439Z] Player 4 (0x7B7057B07218fa9f357E39cb2fC2E723C2bfcf9F) chose not to peek or use Monty Hall
[2025-03-22T06:17:28.523Z] 0xd2e443F6CF19d5d359e82bbEea76e1133028fda5 swapped King of Diamonds for 5 of Diamonds
[2025-03-22T06:17:28.734Z] 
----- PLAYER STATUS AFTER PEEK PHASE -----
[2025-03-22T06:17:28.931Z] Player 1 (0x9Fde625ED8A6eC0f3cA393A62be34231a5c167F4):
[2025-03-22T06:17:28.931Z]   Chip balance: 20
[2025-03-22T06:17:28.931Z]   Has peeked: true
[2025-03-22T06:17:28.931Z]   Used Monty Hall: false
[2025-03-22T06:17:28.931Z]   Action nonce: 1
[2025-03-22T06:17:29.159Z] Player 2 (0x0Fae37437c1347c23dc279b424663579d2df67df):
[2025-03-22T06:17:29.159Z]   Chip balance: 20
[2025-03-22T06:17:29.159Z]   Has peeked: true
[2025-03-22T06:17:29.160Z]   Used Monty Hall: false
[2025-03-22T06:17:29.160Z]   Action nonce: 1
[2025-03-22T06:17:29.389Z] Player 3 (0xd2e443F6CF19d5d359e82bbEea76e1133028fda5):
[2025-03-22T06:17:29.389Z]   Chip balance: 18
[2025-03-22T06:17:29.389Z]   Has peeked: false
[2025-03-22T06:17:29.389Z]   Used Monty Hall: true
[2025-03-22T06:17:29.389Z]   Action nonce: 2
[2025-03-22T06:17:29.607Z] Player 4 (0x7B7057B07218fa9f357E39cb2fC2E723C2bfcf9F):
[2025-03-22T06:17:29.607Z]   Chip balance: 25
[2025-03-22T06:17:29.607Z]   Has peeked: false
[2025-03-22T06:17:29.607Z]   Used Monty Hall: false
[2025-03-22T06:17:29.607Z]   Action nonce: 0
[2025-03-22T06:17:29.607Z] 
----- WAITING FOR PEEK PHASE TO END -----
[2025-03-22T06:17:29.936Z] Waiting 73 seconds for peek phase to end...
[2025-03-22T06:17:29.936Z] Waiting for peek phase to end on TEN network...
[2025-03-22T06:18:49.948Z] Peek phase ended
[2025-03-22T06:18:49.948Z] 
----- ENDING PEEK PHASE -----
[2025-03-22T06:18:51.213Z] endPeekPhase transaction submitted, waiting for confirmation...
[2025-03-22T06:19:04.678Z] endPeekPhase transaction confirmed!
[2025-03-22T06:19:04.679Z] Buffer period started before betting phase. Current state: PEEK_PHASE, Next state: BETTING
[2025-03-22T06:19:04.679Z] Betting phase started for game 1
[2025-03-22T06:19:04.679Z] Game state updated: State=BETTING, Pot=0, CurrentBet=0, StateVersion=3
[2025-03-22T06:19:04.880Z] Phase end time: 2025-03-22T06:24:30.000Z
[2025-03-22T06:19:04.880Z] Buffer end time: 2025-03-22T06:19:30.000Z
[2025-03-22T06:19:04.880Z] Waiting 26 seconds for buffer period to end...
[2025-03-22T06:19:04.880Z] Waiting for buffer period to end on TEN network...
[2025-03-22T06:19:34.889Z] Buffer period ended
[2025-03-22T06:19:34.890Z] 
----- PLAYERS PLACING BETS -----
[2025-03-22T06:19:52.589Z] Player 1 (0x9Fde625ED8A6eC0f3cA393A62be34231a5c167F4) bet 5 chips
[2025-03-22T06:19:52.589Z] Player action: bet, Amount: 5, Nonce: 2
[2025-03-22T06:19:52.799Z] Pot after bet 1: 5, Current bet: 5
[2025-03-22T06:20:05.136Z] Player 2 (0x0Fae37437c1347c23dc279b424663579d2df67df) bet 5 chips
[2025-03-22T06:20:05.137Z] Player action: bet, Amount: 5, Nonce: 2
[2025-03-22T06:20:05.489Z] Pot after bet 2: 10, Current bet: 5
[2025-03-22T06:20:16.505Z] Player 3 (0xd2e443F6CF19d5d359e82bbEea76e1133028fda5) bet 10 chips (raising to 10)
[2025-03-22T06:20:16.505Z] Player action: bet, Amount: 10, Nonce: 3
[2025-03-22T06:20:16.720Z] Pot after bet 3: 20, Current bet: 10
[2025-03-22T06:20:28.440Z] Player 1 (0x9Fde625ED8A6eC0f3cA393A62be34231a5c167F4) bet additional 5 chips (calling the raise)
[2025-03-22T06:20:28.440Z] Player action: bet, Amount: 5, Nonce: 3
[2025-03-22T06:20:28.657Z] Pot after bet 4: 25, Current bet: 10
[2025-03-22T06:20:40.620Z] Player 2 (0x0Fae37437c1347c23dc279b424663579d2df67df) bet additional 5 chips (calling the raise)
[2025-03-22T06:20:40.621Z] Player action: bet, Amount: 5, Nonce: 3
[2025-03-22T06:20:40.852Z] Pot after bet 5: 30, Current bet: 10
[2025-03-22T06:20:52.451Z] Player 4 (0x7B7057B07218fa9f357E39cb2fC2E723C2bfcf9F) folded
[2025-03-22T06:20:52.451Z] Player action: fold, Amount: 0, Nonce: 1
[2025-03-22T06:20:52.667Z] Active players after fold: 4
[2025-03-22T06:20:52.668Z] 
----- PLAYER STATUS AFTER BETTING -----
[2025-03-22T06:20:52.881Z] Player 1 (0x9Fde625ED8A6eC0f3cA393A62be34231a5c167F4):
[2025-03-22T06:20:52.881Z]   Chip balance: 10
[2025-03-22T06:20:52.881Z]   Current bet: 10
[2025-03-22T06:20:52.881Z]   Has folded: false
[2025-03-22T06:20:52.881Z]   Action nonce: 3
[2025-03-22T06:20:53.196Z] Player 2 (0x0Fae37437c1347c23dc279b424663579d2df67df):
[2025-03-22T06:20:53.197Z]   Chip balance: 10
[2025-03-22T06:20:53.197Z]   Current bet: 10
[2025-03-22T06:20:53.197Z]   Has folded: false
[2025-03-22T06:20:53.197Z]   Action nonce: 3
[2025-03-22T06:20:53.430Z] Player 3 (0xd2e443F6CF19d5d359e82bbEea76e1133028fda5):
[2025-03-22T06:20:53.430Z]   Chip balance: 8
[2025-03-22T06:20:53.430Z]   Current bet: 10
[2025-03-22T06:20:53.430Z]   Has folded: false
[2025-03-22T06:20:53.430Z]   Action nonce: 3
[2025-03-22T06:20:53.843Z] Player 4 (0x7B7057B07218fa9f357E39cb2fC2E723C2bfcf9F):
[2025-03-22T06:20:53.843Z]   Chip balance: 25
[2025-03-22T06:20:53.843Z]   Current bet: 0
[2025-03-22T06:20:53.843Z]   Has folded: true
[2025-03-22T06:20:53.843Z]   Action nonce: 1
[2025-03-22T06:20:54.153Z] Have all active players matched the current bet? false
[2025-03-22T06:20:54.154Z] 
----- WAITING FOR BETTING PHASE TO END -----
[2025-03-22T06:20:54.437Z] Betting phase ends in 216 seconds at 2025-03-22T06:24:30.000Z
[2025-03-22T06:20:54.438Z] All players have matched bets, manually ending betting phase...
[2025-03-22T06:20:54.438Z] 
----- CHECKING GAME STATE BEFORE ENDING BETTING PHASE -----
[2025-03-22T06:20:54.634Z] Current game state: BETTING
[2025-03-22T06:20:54.634Z] Phase end time: 2025-03-22T06:24:30.000Z
[2025-03-22T06:20:54.634Z] Current time: 2025-03-22T06:20:54.634Z
[2025-03-22T06:20:54.634Z] Buffer end time: 2025-03-22T06:19:30.000Z
[2025-03-22T06:20:54.634Z] Is in buffer period: false
[2025-03-22T06:20:54.634Z] Is phase ended: false
[2025-03-22T06:20:54.896Z] Is caller (0x1dA9aCB41763f97F744Da547F2d103042e8Ab239) a keeper: true
[2025-03-22T06:20:54.897Z] Betting phase hasn't ended yet. Waiting 216 seconds...
[2025-03-22T06:20:54.897Z] Waiting for phase to end on TEN network...
[2025-03-22T06:24:34.954Z] Betting phase has now ended
[2025-03-22T06:24:35.487Z] Game state after waiting: BETTING
[2025-03-22T06:24:35.487Z] Updated phase end time: 2025-03-22T06:24:30.000Z
[2025-03-22T06:24:35.487Z] Updated buffer end time: 2025-03-22T06:19:30.000Z
[2025-03-22T06:24:35.487Z] 
----- ENDING BETTING PHASE -----
[2025-03-22T06:24:36.966Z] endBettingPhase transaction submitted, waiting for confirmation...
[2025-03-22T06:24:52.502Z] endBettingPhase transaction confirmed!
[2025-03-22T06:24:52.503Z] Showdown phase started
[2025-03-22T06:24:52.503Z] 
===== GAME RESULTS =====
[2025-03-22T06:24:52.503Z] Winner: 0x0Fae37437c1347c23dc279b424663579d2df67df
[2025-03-22T06:24:52.503Z] Pot Amount: 30 chips
[2025-03-22T06:24:52.503Z] Player 2 (0x0Fae37437c1347c23dc279b424663579d2df67df) won the game!
[2025-03-22T06:24:52.503Z] Final game state: State=SHOWDOWN, Pot=30, CurrentBet=10, StateVersion=4
[2025-03-22T06:24:52.503Z] 
----- REVEALED CARDS DURING SHOWDOWN -----
[2025-03-22T06:24:52.544Z] Card for 0x1dA9aCB41763f97F744Da547F2d103042e8Ab239: 3 of Diamonds
[2025-03-22T06:24:52.544Z] Card for 0x9Fde625ED8A6eC0f3cA393A62be34231a5c167F4: 4 of Spades
[2025-03-22T06:24:52.544Z] Card for 0x0Fae37437c1347c23dc279b424663579d2df67df: 8 of Hearts
[2025-03-22T06:24:52.544Z] Card for 0xd2e443F6CF19d5d359e82bbEea76e1133028fda5: 5 of Diamonds
[2025-03-22T06:24:52.602Z] Betting results processed for game 1, winner: 0x0Fae37437c1347c23dc279b424663579d2df67df
[2025-03-22T06:24:52.606Z] 
===== GAME ENDED EVENT CAPTURED =====
[2025-03-22T06:24:52.607Z] Winner: 0x0Fae37437c1347c23dc279b424663579d2df67df
[2025-03-22T06:24:52.607Z] Pot Amount: 30 chips
[2025-03-22T06:24:52.607Z] Player 2 (0x0Fae37437c1347c23dc279b424663579d2df67df) won the game!
[2025-03-22T06:24:52.786Z] Error getting revealed cards: cardValues[i].toNumber is not a function
[2025-03-22T06:24:52.786Z] 
----- FINAL GAME STATE -----
[2025-03-22T06:24:53.045Z] Game state: ENDED
[2025-03-22T06:24:53.045Z] Pot amount: 0
[2025-03-22T06:24:53.045Z] State version: 5
[2025-03-22T06:24:53.045Z] Is cleaned up: false
[2025-03-22T06:24:53.045Z] 
----- FINAL PLAYER BALANCES -----
[2025-03-22T06:24:53.332Z] Player 1 (0x9Fde625ED8A6eC0f3cA393A62be34231a5c167F4):
[2025-03-22T06:24:53.333Z]   Initial balance: 25
[2025-03-22T06:24:53.333Z]   Final balance: 10
[2025-03-22T06:24:53.333Z]   Difference: -15
[2025-03-22T06:24:53.530Z] Player 2 (0x0Fae37437c1347c23dc279b424663579d2df67df):
[2025-03-22T06:24:53.530Z]   Initial balance: 25
[2025-03-22T06:24:53.530Z]   Final balance: 40
[2025-03-22T06:24:53.530Z]   Difference: 15
[2025-03-22T06:24:53.530Z] *** Player 2 gained 15 chips - WINNER! ***
[2025-03-22T06:24:53.836Z] Player 3 (0xd2e443F6CF19d5d359e82bbEea76e1133028fda5):
[2025-03-22T06:24:53.836Z]   Initial balance: 25
[2025-03-22T06:24:53.836Z]   Final balance: 8
[2025-03-22T06:24:53.836Z]   Difference: -17
[2025-03-22T06:24:54.036Z] Player 4 (0x7B7057B07218fa9f357E39cb2fC2E723C2bfcf9F):
[2025-03-22T06:24:54.036Z]   Initial balance: 25
[2025-03-22T06:24:54.037Z]   Final balance: 25
[2025-03-22T06:24:54.037Z]   Difference: 0
[2025-03-22T06:24:54.037Z] 
----- SPECTATOR BETTING RESULTS -----
[2025-03-22T06:24:54.368Z] Betting results processed: true
[2025-03-22T06:24:54.368Z] Game winner: 0x0Fae37437c1347c23dc279b424663579d2df67df
[2025-03-22T06:24:54.369Z] Total betting pool: 0.03 ETH
[2025-03-22T06:24:54.369Z] 
----- SPECTATOR WINNINGS CHECK -----
[2025-03-22T06:24:54.882Z] Spectator 1 (0x1dA9aCB41763f97F744Da547F2d103042e8Ab239):
[2025-03-22T06:24:54.882Z]   Bet on: 0x9Fde625ED8A6eC0f3cA393A62be34231a5c167F4
[2025-03-22T06:24:54.882Z]   Bet amount: 0.01 ETH
[2025-03-22T06:24:54.882Z]   Has winnings: false
[2025-03-22T06:24:55.406Z] Spectator 2 (0x52731AEDA26AB8D159226C51180a7542a4287500):
[2025-03-22T06:24:55.407Z]   Bet on: 0x0Fae37437c1347c23dc279b424663579d2df67df
[2025-03-22T06:24:55.407Z]   Bet amount: 0.01 ETH
[2025-03-22T06:24:55.407Z]   Has winnings: true
[2025-03-22T06:24:55.407Z]   Winnings amount: 0.03 ETH
[2025-03-22T06:24:56.126Z] Spectator 3 (0x45ab32ec402D51096398aA4e6a7aF03180E50bD0):
[2025-03-22T06:24:56.126Z]   Bet on: 0xd2e443F6CF19d5d359e82bbEea76e1133028fda5
[2025-03-22T06:24:56.127Z]   Bet amount: 0.01 ETH
[2025-03-22T06:24:56.127Z]   Has winnings: false
[2025-03-22T06:24:56.127Z] 
----- SPECTATORS CLAIMING WINNINGS -----
[2025-03-22T09:13:22.641Z] 
===== SETTING UP TEST ENVIRONMENT =====
[2025-03-22T09:13:22.679Z] Wallet setup complete.
[2025-03-22T09:13:22.679Z] Owner address: 0x1dA9aCB41763f97F744Da547F2d103042e8Ab239
[2025-03-22T09:13:22.679Z] Player 1 address: 0x9Fde625ED8A6eC0f3cA393A62be34231a5c167F4
[2025-03-22T09:13:22.679Z] Player 2 address: 0x0Fae37437c1347c23dc279b424663579d2df67df
[2025-03-22T09:13:22.679Z] Player 3 address: 0xd2e443F6CF19d5d359e82bbEea76e1133028fda5
[2025-03-22T09:13:22.679Z] Player 4 address: 0x7B7057B07218fa9f357E39cb2fC2E723C2bfcf9F
[2025-03-22T09:13:22.679Z] Spectator 1 address: 0x1dA9aCB41763f97F744Da547F2d103042e8Ab239
[2025-03-22T09:13:22.679Z] Spectator 2 address: 0x52731AEDA26AB8D159226C51180a7542a4287500
[2025-03-22T09:13:22.679Z] Spectator 3 address: 0x45ab32ec402D51096398aA4e6a7aF03180E50bD0
[2025-03-22T09:13:22.679Z] Keeper address: 0x1dA9aCB41763f97F744Da547F2d103042e8Ab239
[2025-03-22T09:13:22.679Z] 
----- CHECKING WALLET BALANCES -----
[2025-03-22T09:13:26.363Z] Address 0x1dA9aCB41763f97F744Da547F2d103042e8Ab239 has 0.263500962091361948 ETH
[2025-03-22T09:13:26.585Z] Address 0x9Fde625ED8A6eC0f3cA393A62be34231a5c167F4 has 0.923870224796971739 ETH
[2025-03-22T09:13:26.872Z] Address 0x0Fae37437c1347c23dc279b424663579d2df67df has 0.923340397955523347 ETH
[2025-03-22T09:13:27.140Z] Address 0xd2e443F6CF19d5d359e82bbEea76e1133028fda5 has 0.974809071081686937 ETH
[2025-03-22T09:13:27.363Z] Address 0x7B7057B07218fa9f357E39cb2fC2E723C2bfcf9F has 1.916809844442562303 ETH
[2025-03-22T09:13:27.594Z] Address 0x1dA9aCB41763f97F744Da547F2d103042e8Ab239 has 0.263500962091361948 ETH
[2025-03-22T09:13:27.830Z] Address 0x52731AEDA26AB8D159226C51180a7542a4287500 has 0.959235862462558339 ETH
[2025-03-22T09:13:28.092Z] Address 0x45ab32ec402D51096398aA4e6a7aF03180E50bD0 has 0.469545485554344756 ETH
[2025-03-22T09:13:28.309Z] Address 0x1dA9aCB41763f97F744Da547F2d103042e8Ab239 has 0.263500962091361948 ETH
[2025-03-22T09:13:28.309Z] 
----- DEPLOYING CONTRACTS -----
[2025-03-22T09:13:28.309Z] Deploying CardLibrary...
[2025-03-22T09:13:38.205Z] CardLibrary deployed at: 0x51aba2a45C6f0B59329771c8A7C6311faF2927a1
[2025-03-22T09:13:38.206Z] Deploying GameLibrary...
[2025-03-22T09:13:51.849Z] GameLibrary deployed at: 0x65c3C612A6E732C5A2b9368FBA8d8F51B590bFFB
[2025-03-22T09:13:51.850Z] Deploying OneCard main contract...
[2025-03-22T09:14:01.688Z] OneCard contract deployed at: 0xcCe5d6602D3fe021A3f449bA338325c119398598
[2025-03-22T09:14:01.688Z] Deploying PokerSpectatorView contract...
[2025-03-22T09:14:15.381Z] PokerSpectatorView contract deployed at: 0x2bb8c330e3036e57D908219958E04b9c765078fA
[2025-03-22T09:14:15.381Z] Deploying SpectatorBetting contract...
[2025-03-22T09:14:28.970Z] SpectatorBetting contract deployed at: 0x6e4f389f28dE8c83B191426CCe5CbAB7099A4ba2
[2025-03-22T09:14:28.970Z] Setting spectator betting contract in OneCard contract...
[2025-03-22T09:14:39.028Z] SpectatorBetting contract set in OneCard
[2025-03-22T09:14:39.029Z] 
Add these to your .env file for future use:
[2025-03-22T09:14:39.029Z] POKER_CONTRACT_ADDRESS=0xcCe5d6602D3fe021A3f449bA338325c119398598
[2025-03-22T09:14:39.029Z] SPECTATOR_CONTRACT_ADDRESS=0x2bb8c330e3036e57D908219958E04b9c765078fA
[2025-03-22T09:14:39.029Z] SPECTATOR_BETTING_ADDRESS=0x6e4f389f28dE8c83B191426CCe5CbAB7099A4ba2
[2025-03-22T09:14:39.037Z] 
===== STARTING ONE CARD POKER WITH MONTY HALL AND SPECTATOR BETTING TEST =====
[2025-03-22T09:14:39.037Z] 
----- ADDING PLAYERS TO WHITELIST -----
[2025-03-22T09:14:48.953Z] Added 4 players to whitelist
[2025-03-22T09:14:48.953Z] 
----- CREATING A NEW GAME -----
[2025-03-22T09:15:02.536Z] Created Game with ID: 1
[2025-03-22T09:15:02.791Z] Initial players in game: 5
[2025-03-22T09:15:02.792Z] Player 1: 0x1dA9aCB41763f97F744Da547F2d103042e8Ab239
[2025-03-22T09:15:02.792Z] Player 2: 0x9Fde625ED8A6eC0f3cA393A62be34231a5c167F4
[2025-03-22T09:15:02.792Z] Player 3: 0x0Fae37437c1347c23dc279b424663579d2df67df
[2025-03-22T09:15:02.792Z] Player 4: 0xd2e443F6CF19d5d359e82bbEea76e1133028fda5
[2025-03-22T09:15:02.792Z] Player 5: 0x7B7057B07218fa9f357E39cb2fC2E723C2bfcf9F
[2025-03-22T09:15:02.792Z] 
----- VERIFYING GAME INFO BEFORE SPECTATOR BETTING -----
[2025-03-22T09:15:03.189Z] Game state: REGISTRATION
[2025-03-22T09:15:03.189Z] Player count: 5
[2025-03-22T09:15:03.189Z] Active count: 5
[2025-03-22T09:15:03.189Z] Game keeper: 0x1dA9aCB41763f97F744Da547F2d103042e8Ab239
[2025-03-22T09:15:03.189Z] State version: 1
[2025-03-22T09:15:03.189Z] Is cleaned up: false
[2025-03-22T09:15:03.190Z] 
----- CHECKING IF BETTING IS OPEN -----
[2025-03-22T09:15:03.410Z] Betting open: true
[2025-03-22T09:15:03.410Z] Results processed: false
[2025-03-22T09:15:03.411Z] Total bet amount: 0.0 ETH
[2025-03-22T09:15:03.411Z] 
----- SPECTATORS PLACING BETS -----
[2025-03-22T09:15:14.889Z] Spectator 1 (0x1dA9aCB41763f97F744Da547F2d103042e8Ab239) bet 0.01 ETH on Player 1 (0x9Fde625ED8A6eC0f3cA393A62be34231a5c167F4)
[2025-03-22T09:15:14.961Z] Spectator 0x1dA9aCB41763f97F744Da547F2d103042e8Ab239 placed a bet of 0.01 ETH on player 0x9Fde625ED8A6eC0f3cA393A62be34231a5c167F4
[2025-03-22T09:15:15.145Z] Verified bet - Player: 0x9Fde625ED8A6eC0f3cA393A62be34231a5c167F4, Amount: 0.01 ETH, Claimed: false
[2025-03-22T09:15:26.927Z] Spectator 2 (0x52731AEDA26AB8D159226C51180a7542a4287500) bet 0.01 ETH on Player 2 (0x0Fae37437c1347c23dc279b424663579d2df67df)
[2025-03-22T09:15:27.017Z] Spectator 0x52731AEDA26AB8D159226C51180a7542a4287500 placed a bet of 0.01 ETH on player 0x0Fae37437c1347c23dc279b424663579d2df67df
[2025-03-22T09:15:27.248Z] Verified bet - Player: 0x0Fae37437c1347c23dc279b424663579d2df67df, Amount: 0.01 ETH, Claimed: false
[2025-03-22T09:15:38.994Z] Spectator 3 (0x45ab32ec402D51096398aA4e6a7aF03180E50bD0) bet 0.01 ETH on Player 3 (0xd2e443F6CF19d5d359e82bbEea76e1133028fda5)
[2025-03-22T09:15:39.071Z] Spectator 0x45ab32ec402D51096398aA4e6a7aF03180E50bD0 placed a bet of 0.01 ETH on player 0xd2e443F6CF19d5d359e82bbEea76e1133028fda5
[2025-03-22T09:15:39.265Z] Verified bet - Player: 0xd2e443F6CF19d5d359e82bbEea76e1133028fda5, Amount: 0.01 ETH, Claimed: false
[2025-03-22T09:15:39.265Z] 
----- CHECKING TOTAL BETS ON EACH PLAYER -----
[2025-03-22T09:15:39.495Z] Total bet on Player 1 (0x9Fde625ED8A6eC0f3cA393A62be34231a5c167F4): 0.01 ETH
[2025-03-22T09:15:39.736Z] Total bet on Player 2 (0x0Fae37437c1347c23dc279b424663579d2df67df): 0.01 ETH
[2025-03-22T09:15:39.953Z] Total bet on Player 3 (0xd2e443F6CF19d5d359e82bbEea76e1133028fda5): 0.01 ETH
[2025-03-22T09:15:40.197Z] Total bet on Player 4 (0x7B7057B07218fa9f357E39cb2fC2E723C2bfcf9F): 0.0 ETH
[2025-03-22T09:15:40.400Z] Total betting pool: 0.03 ETH
[2025-03-22T09:15:40.400Z] 
----- STARTING PEEK PHASE -----
[2025-03-22T09:15:41.496Z] startPeekPhase transaction submitted, waiting for confirmation...
[2025-03-22T09:15:50.976Z] startPeekPhase transaction confirmed!
[2025-03-22T09:15:50.977Z] Buffer period started before peek phase. Current state: REGISTRATION, Next state: PEEK_PHASE
[2025-03-22T09:15:50.977Z] Peek phase started for game 1
[2025-03-22T09:15:50.977Z] Game state updated: State=PEEK_PHASE, Pot=0, CurrentBet=0, StateVersion=2
[2025-03-22T09:15:51.144Z] Betting closed for game 1
[2025-03-22T09:15:51.175Z] Betting open after peek phase start: false
[2025-03-22T09:15:51.448Z] Phase end time: 2025-03-22T09:18:18.000Z
[2025-03-22T09:15:51.448Z] Buffer end time: 2025-03-22T09:16:18.000Z
[2025-03-22T09:15:51.449Z] Waiting 27 seconds for buffer period to end...
[2025-03-22T09:15:51.449Z] Waiting for buffer period to end on TEN network...
[2025-03-22T09:16:21.456Z] Buffer period ended
[2025-03-22T09:16:21.457Z] 
----- PLAYERS PEEKING AT CARDS -----
[2025-03-22T09:16:21.676Z] Player 1 initial chip balance: 25
[2025-03-22T09:16:26.939Z] Player 1 (0x9Fde625ED8A6eC0f3cA393A62be34231a5c167F4) peeked at their card
[2025-03-22T09:16:26.939Z] Player action: peek, Amount: 5, Nonce: 1
[2025-03-22T09:16:27.006Z] Card for 0x9Fde625ED8A6eC0f3cA393A62be34231a5c167F4: 4 of Clubs
[2025-03-22T09:16:27.148Z] Player 1 chip balance after peeking: 20
[2025-03-22T09:16:27.363Z] Player 2 initial chip balance: 25
[2025-03-22T09:16:38.924Z] Player 2 (0x0Fae37437c1347c23dc279b424663579d2df67df) peeked at their card
[2025-03-22T09:16:38.924Z] Player action: peek, Amount: 5, Nonce: 1
[2025-03-22T09:16:39.006Z] Card for 0x0Fae37437c1347c23dc279b424663579d2df67df: Ace of Spades
[2025-03-22T09:16:39.148Z] Player 2 chip balance after peeking: 20
[2025-03-22T09:16:39.148Z] 
----- PLAYER USING MONTY HALL OPTION -----
[2025-03-22T09:16:39.397Z] Player 3 initial chip balance: 25
[2025-03-22T09:16:50.964Z] Player 3 (0xd2e443F6CF19d5d359e82bbEea76e1133028fda5) used Monty Hall option
[2025-03-22T09:16:50.964Z] Player action: montyHall, Amount: 7, Nonce: 1
[2025-03-22T09:16:50.983Z] Monty Hall cards revealed to 0xd2e443F6CF19d5d359e82bbEea76e1133028fda5:
[2025-03-22T09:16:50.983Z] - 3 of Diamonds
[2025-03-22T09:16:50.983Z] - 6 of Clubs
[2025-03-22T09:16:51.176Z] Player 3 chip balance after using Monty Hall: 18
[2025-03-22T09:17:02.991Z] Player 3 decided to swap their card
[2025-03-22T09:17:02.991Z] Player action: swapCard, Amount: 0, Nonce: 2
[2025-03-22T09:17:02.992Z] Player 4 (0x7B7057B07218fa9f357E39cb2fC2E723C2bfcf9F) chose not to peek or use Monty Hall
[2025-03-22T09:17:02.995Z] 0xd2e443F6CF19d5d359e82bbEea76e1133028fda5 swapped 2 of Clubs for Ace of Diamonds
[2025-03-22T09:17:03.356Z] 
----- PLAYER STATUS AFTER PEEK PHASE -----
[2025-03-22T09:17:03.594Z] Player 1 (0x9Fde625ED8A6eC0f3cA393A62be34231a5c167F4):
[2025-03-22T09:17:03.595Z]   Chip balance: 20
[2025-03-22T09:17:03.595Z]   Has peeked: true
[2025-03-22T09:17:03.595Z]   Used Monty Hall: false
[2025-03-22T09:17:03.595Z]   Action nonce: 1
[2025-03-22T09:17:03.835Z] Player 2 (0x0Fae37437c1347c23dc279b424663579d2df67df):
[2025-03-22T09:17:03.836Z]   Chip balance: 20
[2025-03-22T09:17:03.836Z]   Has peeked: true
[2025-03-22T09:17:03.836Z]   Used Monty Hall: false
[2025-03-22T09:17:03.836Z]   Action nonce: 1
[2025-03-22T09:17:04.077Z] Player 3 (0xd2e443F6CF19d5d359e82bbEea76e1133028fda5):
[2025-03-22T09:17:04.077Z]   Chip balance: 18
[2025-03-22T09:17:04.077Z]   Has peeked: false
[2025-03-22T09:17:04.077Z]   Used Monty Hall: true
[2025-03-22T09:17:04.077Z]   Action nonce: 2
[2025-03-22T09:17:04.303Z] Player 4 (0x7B7057B07218fa9f357E39cb2fC2E723C2bfcf9F):
[2025-03-22T09:17:04.304Z]   Chip balance: 25
[2025-03-22T09:17:04.304Z]   Has peeked: false
[2025-03-22T09:17:04.304Z]   Used Monty Hall: false
[2025-03-22T09:17:04.304Z]   Action nonce: 0
[2025-03-22T09:17:04.304Z] 
----- WAITING FOR PEEK PHASE TO END -----
[2025-03-22T09:17:04.546Z] Waiting 74 seconds for peek phase to end...
[2025-03-22T09:17:04.546Z] Waiting for peek phase to end on TEN network...
[2025-03-22T09:18:24.557Z] Peek phase ended
[2025-03-22T09:18:24.557Z] 
----- ENDING PEEK PHASE -----
[2025-03-22T09:18:25.660Z] endPeekPhase transaction submitted, waiting for confirmation...
[2025-03-22T09:18:39.321Z] endPeekPhase transaction confirmed!
[2025-03-22T09:18:39.321Z] Buffer period started before betting phase. Current state: PEEK_PHASE, Next state: BETTING
[2025-03-22T09:18:39.321Z] Betting phase started for game 1
[2025-03-22T09:18:39.321Z] Game state updated: State=BETTING, Pot=0, CurrentBet=0, StateVersion=3
[2025-03-22T09:18:39.588Z] Phase end time: 2025-03-22T09:24:06.000Z
[2025-03-22T09:18:39.588Z] Buffer end time: 2025-03-22T09:19:06.000Z
[2025-03-22T09:18:39.589Z] Waiting 27 seconds for buffer period to end...
[2025-03-22T09:18:39.589Z] Waiting for buffer period to end on TEN network...
[2025-03-22T09:19:09.597Z] Buffer period ended
[2025-03-22T09:19:09.597Z] 
----- PLAYERS PLACING BETS -----
[2025-03-22T09:19:14.964Z] Player 1 (0x9Fde625ED8A6eC0f3cA393A62be34231a5c167F4) bet 5 chips
[2025-03-22T09:19:14.965Z] Player action: bet, Amount: 5, Nonce: 2
[2025-03-22T09:19:15.191Z] Pot after bet 1: 5, Current bet: 5
[2025-03-22T09:19:27.002Z] Player 2 (0x0Fae37437c1347c23dc279b424663579d2df67df) bet 5 chips
[2025-03-22T09:19:27.002Z] Player action: bet, Amount: 5, Nonce: 2
[2025-03-22T09:19:27.233Z] Pot after bet 2: 10, Current bet: 5
[2025-03-22T09:19:39.055Z] Player 3 (0xd2e443F6CF19d5d359e82bbEea76e1133028fda5) bet 10 chips (raising to 10)
[2025-03-22T09:19:39.055Z] Player action: bet, Amount: 10, Nonce: 3
[2025-03-22T09:19:39.320Z] Pot after bet 3: 20, Current bet: 10
[2025-03-22T09:19:50.990Z] Player 1 (0x9Fde625ED8A6eC0f3cA393A62be34231a5c167F4) bet additional 5 chips (calling the raise)
[2025-03-22T09:19:50.990Z] Player action: bet, Amount: 5, Nonce: 3
[2025-03-22T09:19:51.220Z] Pot after bet 4: 25, Current bet: 10
[2025-03-22T09:20:02.997Z] Player 2 (0x0Fae37437c1347c23dc279b424663579d2df67df) bet additional 5 chips (calling the raise)
[2025-03-22T09:20:02.998Z] Player action: bet, Amount: 5, Nonce: 3
[2025-03-22T09:20:03.209Z] Pot after bet 5: 30, Current bet: 10
[2025-03-22T09:20:15.029Z] Player 4 (0x7B7057B07218fa9f357E39cb2fC2E723C2bfcf9F) folded
[2025-03-22T09:20:15.029Z] Player action: fold, Amount: 0, Nonce: 1
[2025-03-22T09:20:15.322Z] Active players after fold: 4
[2025-03-22T09:20:15.322Z] 
----- PLAYER STATUS AFTER BETTING -----
[2025-03-22T09:20:15.560Z] Player 1 (0x9Fde625ED8A6eC0f3cA393A62be34231a5c167F4):
[2025-03-22T09:20:15.560Z]   Chip balance: 10
[2025-03-22T09:20:15.560Z]   Current bet: 10
[2025-03-22T09:20:15.560Z]   Has folded: false
[2025-03-22T09:20:15.560Z]   Action nonce: 3
[2025-03-22T09:20:15.778Z] Player 2 (0x0Fae37437c1347c23dc279b424663579d2df67df):
[2025-03-22T09:20:15.778Z]   Chip balance: 10
[2025-03-22T09:20:15.778Z]   Current bet: 10
[2025-03-22T09:20:15.779Z]   Has folded: false
[2025-03-22T09:20:15.779Z]   Action nonce: 3
[2025-03-22T09:20:16.048Z] Player 3 (0xd2e443F6CF19d5d359e82bbEea76e1133028fda5):
[2025-03-22T09:20:16.049Z]   Chip balance: 8
[2025-03-22T09:20:16.049Z]   Current bet: 10
[2025-03-22T09:20:16.049Z]   Has folded: false
[2025-03-22T09:20:16.049Z]   Action nonce: 3
[2025-03-22T09:20:16.296Z] Player 4 (0x7B7057B07218fa9f357E39cb2fC2E723C2bfcf9F):
[2025-03-22T09:20:16.297Z]   Chip balance: 25
[2025-03-22T09:20:16.297Z]   Current bet: 0
[2025-03-22T09:20:16.297Z]   Has folded: true
[2025-03-22T09:20:16.297Z]   Action nonce: 1
[2025-03-22T09:20:16.538Z] Have all active players matched the current bet? false
[2025-03-22T09:20:16.539Z] 
----- WAITING FOR BETTING PHASE TO END -----
[2025-03-22T09:20:16.770Z] Betting phase ends in 230 seconds at 2025-03-22T09:24:06.000Z
[2025-03-22T09:20:16.770Z] All players have matched bets, manually ending betting phase...
[2025-03-22T09:20:16.770Z] 
----- CHECKING GAME STATE BEFORE ENDING BETTING PHASE -----
[2025-03-22T09:20:16.987Z] Current game state: BETTING
[2025-03-22T09:20:16.987Z] Phase end time: 2025-03-22T09:24:06.000Z
[2025-03-22T09:20:16.987Z] Current time: 2025-03-22T09:20:16.987Z
[2025-03-22T09:20:16.987Z] Buffer end time: 2025-03-22T09:19:06.000Z
[2025-03-22T09:20:16.987Z] Is in buffer period: false
[2025-03-22T09:20:16.987Z] Is phase ended: false
[2025-03-22T09:20:17.257Z] Is caller (0x1dA9aCB41763f97F744Da547F2d103042e8Ab239) a keeper: true
[2025-03-22T09:20:17.257Z] Betting phase hasn't ended yet. Waiting 229 seconds...
[2025-03-22T09:20:17.258Z] Waiting for phase to end on TEN network...
[2025-03-22T09:24:07.319Z] Betting phase has now ended
[2025-03-22T09:24:07.546Z] Game state after waiting: BETTING
[2025-03-22T09:24:07.547Z] Updated phase end time: 2025-03-22T09:24:06.000Z
[2025-03-22T09:24:07.547Z] Updated buffer end time: 2025-03-22T09:19:06.000Z
[2025-03-22T09:24:07.547Z] 
----- ENDING BETTING PHASE -----
[2025-03-22T09:24:08.664Z] endBettingPhase transaction submitted, waiting for confirmation...
[2025-03-22T09:24:15.149Z] endBettingPhase transaction confirmed!
[2025-03-22T09:24:15.149Z] Showdown phase started
[2025-03-22T09:24:15.149Z] 
===== GAME RESULTS =====
[2025-03-22T09:24:15.149Z] Winner: 0x0Fae37437c1347c23dc279b424663579d2df67df
[2025-03-22T09:24:15.149Z] Pot Amount: 30 chips
[2025-03-22T09:24:15.149Z] Player 2 (0x0Fae37437c1347c23dc279b424663579d2df67df) won the game!
[2025-03-22T09:24:15.149Z] Final game state: State=SHOWDOWN, Pot=30, CurrentBet=10, StateVersion=4
[2025-03-22T09:24:15.149Z] 
----- REVEALED CARDS DURING SHOWDOWN -----
[2025-03-22T09:24:15.154Z] Card for 0x1dA9aCB41763f97F744Da547F2d103042e8Ab239: 3 of Spades
[2025-03-22T09:24:15.154Z] Card for 0x9Fde625ED8A6eC0f3cA393A62be34231a5c167F4: 4 of Clubs
[2025-03-22T09:24:15.154Z] Card for 0x0Fae37437c1347c23dc279b424663579d2df67df: Ace of Spades
[2025-03-22T09:24:15.154Z] Card for 0xd2e443F6CF19d5d359e82bbEea76e1133028fda5: Ace of Diamonds
[2025-03-22T09:24:15.165Z] Betting results processed for game 1, winner: 0x0Fae37437c1347c23dc279b424663579d2df67df
[2025-03-22T09:24:15.237Z] 
===== GAME ENDED EVENT CAPTURED =====
[2025-03-22T09:24:15.238Z] Winner: 0x0Fae37437c1347c23dc279b424663579d2df67df
[2025-03-22T09:24:15.238Z] Pot Amount: 30 chips
[2025-03-22T09:24:15.238Z] Player 2 (0x0Fae37437c1347c23dc279b424663579d2df67df) won the game!
[2025-03-22T09:24:15.474Z] Error getting revealed cards: cardValues[i].toNumber is not a function
[2025-03-22T09:24:15.474Z] 
----- FINAL GAME STATE -----
[2025-03-22T09:24:15.682Z] Game state: ENDED
[2025-03-22T09:24:15.683Z] Pot amount: 0
[2025-03-22T09:24:15.683Z] State version: 5
[2025-03-22T09:24:15.683Z] Is cleaned up: false
[2025-03-22T09:24:15.683Z] 
----- FINAL PLAYER BALANCES -----
[2025-03-22T09:24:15.905Z] Player 1 (0x9Fde625ED8A6eC0f3cA393A62be34231a5c167F4):
[2025-03-22T09:24:15.905Z]   Initial balance: 25
[2025-03-22T09:24:15.905Z]   Final balance: 10
[2025-03-22T09:24:15.906Z]   Difference: -15
[2025-03-22T09:24:16.399Z] Player 2 (0x0Fae37437c1347c23dc279b424663579d2df67df):
[2025-03-22T09:24:16.399Z]   Initial balance: 25
[2025-03-22T09:24:16.399Z]   Final balance: 40
[2025-03-22T09:24:16.399Z]   Difference: 15
[2025-03-22T09:24:16.399Z] *** Player 2 gained 15 chips - WINNER! ***
[2025-03-22T09:24:16.651Z] Player 3 (0xd2e443F6CF19d5d359e82bbEea76e1133028fda5):
[2025-03-22T09:24:16.651Z]   Initial balance: 25
[2025-03-22T09:24:16.651Z]   Final balance: 8
[2025-03-22T09:24:16.651Z]   Difference: -17
[2025-03-22T09:24:16.883Z] Player 4 (0x7B7057B07218fa9f357E39cb2fC2E723C2bfcf9F):
[2025-03-22T09:24:16.883Z]   Initial balance: 25
[2025-03-22T09:24:16.883Z]   Final balance: 25
[2025-03-22T09:24:16.883Z]   Difference: 0
[2025-03-22T09:24:16.883Z] 
----- SPECTATOR BETTING RESULTS -----
[2025-03-22T09:24:17.134Z] Betting results processed: true
[2025-03-22T09:24:17.134Z] Game winner: 0x0Fae37437c1347c23dc279b424663579d2df67df
[2025-03-22T09:24:17.135Z] Total betting pool: 0.03 ETH
[2025-03-22T09:24:17.135Z] 
----- SPECTATOR WINNINGS CHECK -----
[2025-03-22T09:24:17.570Z] Spectator 1 (0x1dA9aCB41763f97F744Da547F2d103042e8Ab239):
[2025-03-22T09:24:17.570Z]   Bet on: 0x9Fde625ED8A6eC0f3cA393A62be34231a5c167F4
[2025-03-22T09:24:17.571Z]   Bet amount: 0.01 ETH
[2025-03-22T09:24:17.571Z]   Has winnings: false
[2025-03-22T09:24:18.072Z] Spectator 2 (0x52731AEDA26AB8D159226C51180a7542a4287500):
[2025-03-22T09:24:18.073Z]   Bet on: 0x0Fae37437c1347c23dc279b424663579d2df67df
[2025-03-22T09:24:18.073Z]   Bet amount: 0.01 ETH
[2025-03-22T09:24:18.073Z]   Has winnings: true
[2025-03-22T09:24:18.073Z]   Winnings amount: 0.03 ETH
[2025-03-22T09:24:18.580Z] Spectator 3 (0x45ab32ec402D51096398aA4e6a7aF03180E50bD0):
[2025-03-22T09:24:18.580Z]   Bet on: 0xd2e443F6CF19d5d359e82bbEea76e1133028fda5
[2025-03-22T09:24:18.581Z]   Bet amount: 0.01 ETH
[2025-03-22T09:24:18.581Z]   Has winnings: false
[2025-03-22T09:24:18.581Z] 
----- SPECTATORS CLAIMING WINNINGS -----
[2025-03-22T09:24:27.054Z] Spectator 1 (0x1dA9aCB41763f97F744Da547F2d103042e8Ab239) marked bet as claimed (no winnings)
[2025-03-22T09:24:27.265Z]   Bet now marked as claimed: true
[2025-03-22T09:26:55.900Z] 
===== SETTING UP TEST ENVIRONMENT =====
[2025-03-22T09:26:55.937Z] Wallet setup complete.
[2025-03-22T09:26:55.937Z] Owner address: 0x1dA9aCB41763f97F744Da547F2d103042e8Ab239
[2025-03-22T09:26:55.937Z] Player 1 address: 0x9Fde625ED8A6eC0f3cA393A62be34231a5c167F4
[2025-03-22T09:26:55.937Z] Player 2 address: 0x0Fae37437c1347c23dc279b424663579d2df67df
[2025-03-22T09:26:55.937Z] Player 3 address: 0xd2e443F6CF19d5d359e82bbEea76e1133028fda5
[2025-03-22T09:26:55.937Z] Player 4 address: 0x7B7057B07218fa9f357E39cb2fC2E723C2bfcf9F
[2025-03-22T09:26:55.937Z] Spectator 1 address: 0x1dA9aCB41763f97F744Da547F2d103042e8Ab239
[2025-03-22T09:26:55.937Z] Spectator 2 address: 0x52731AEDA26AB8D159226C51180a7542a4287500
[2025-03-22T09:26:55.937Z] Spectator 3 address: 0x45ab32ec402D51096398aA4e6a7aF03180E50bD0
[2025-03-22T09:26:55.937Z] Keeper address: 0x1dA9aCB41763f97F744Da547F2d103042e8Ab239
[2025-03-22T09:26:55.937Z] 
----- CHECKING WALLET BALANCES -----
[2025-03-22T09:26:59.715Z] Address 0x1dA9aCB41763f97F744Da547F2d103042e8Ab239 has 0.238069565134046189 ETH
[2025-03-22T09:26:59.953Z] Address 0x9Fde625ED8A6eC0f3cA393A62be34231a5c167F4 has 0.923455942039565242 ETH
[2025-03-22T09:27:00.176Z] Address 0x0Fae37437c1347c23dc279b424663579d2df67df has 0.922981544084576931 ETH
[2025-03-22T09:27:00.501Z] Address 0xd2e443F6CF19d5d359e82bbEea76e1133028fda5 has 0.974239574736475989 ETH
[2025-03-22T09:27:00.788Z] Address 0x7B7057B07218fa9f357E39cb2fC2E723C2bfcf9F has 1.91668619714219575 ETH
[2025-03-22T09:27:01.035Z] Address 0x1dA9aCB41763f97F744Da547F2d103042e8Ab239 has 0.238069565134046189 ETH
[2025-03-22T09:27:01.280Z] Address 0x52731AEDA26AB8D159226C51180a7542a4287500 has 0.978985119580637784 ETH
[2025-03-22T09:27:01.492Z] Address 0x45ab32ec402D51096398aA4e6a7aF03180E50bD0 has 0.459393978730405585 ETH
[2025-03-22T09:27:01.732Z] Address 0x1dA9aCB41763f97F744Da547F2d103042e8Ab239 has 0.238069565134046189 ETH
[2025-03-22T09:27:01.732Z] 
----- DEPLOYING CONTRACTS -----
[2025-03-22T09:27:01.732Z] Deploying CardLibrary...
[2025-03-22T09:27:15.827Z] CardLibrary deployed at: 0x171A16586d24C8ab1065E172cd465c68199Ed077
[2025-03-22T09:27:15.827Z] Deploying GameLibrary...
[2025-03-22T09:27:25.735Z] GameLibrary deployed at: 0x49fd097205b9f47a48EB2654D4525D6cfFf8309e
[2025-03-22T09:27:25.736Z] Deploying OneCard main contract...
[2025-03-22T09:27:39.999Z] OneCard contract deployed at: 0x2Fef1F6A1042A8965F7973CC822539CD947be787
[2025-03-22T09:27:39.999Z] Deploying PokerSpectatorView contract...
[2025-03-22T09:27:49.809Z] PokerSpectatorView contract deployed at: 0xd95CA9fD9A757858f811E740dCbE0ebe859374Fc
[2025-03-22T09:27:49.809Z] Deploying SpectatorBetting contract...
[2025-03-22T09:28:03.688Z] SpectatorBetting contract deployed at: 0x36de328EEE2328a2712d6425fC950b470b13E701
[2025-03-22T09:28:03.689Z] Setting spectator betting contract in OneCard contract...
[2025-03-22T09:28:13.412Z] SpectatorBetting contract set in OneCard
[2025-03-22T09:28:13.412Z] 
Add these to your .env file for future use:
[2025-03-22T09:28:13.412Z] POKER_CONTRACT_ADDRESS=0x2Fef1F6A1042A8965F7973CC822539CD947be787
[2025-03-22T09:28:13.412Z] SPECTATOR_CONTRACT_ADDRESS=0xd95CA9fD9A757858f811E740dCbE0ebe859374Fc
[2025-03-22T09:28:13.412Z] SPECTATOR_BETTING_ADDRESS=0x36de328EEE2328a2712d6425fC950b470b13E701
[2025-03-22T09:28:13.414Z] 
===== STARTING ONE CARD POKER WITH MONTY HALL AND SPECTATOR BETTING TEST =====
[2025-03-22T09:28:13.414Z] 
----- ADDING PLAYERS TO WHITELIST -----
[2025-03-22T09:28:27.286Z] Added 4 players to whitelist
[2025-03-22T09:28:27.287Z] 
----- CREATING A NEW GAME -----
[2025-03-22T09:28:41.236Z] Created Game with ID: 1
[2025-03-22T09:28:41.533Z] Initial players in game: 5
[2025-03-22T09:28:41.534Z] Player 1: 0x1dA9aCB41763f97F744Da547F2d103042e8Ab239
[2025-03-22T09:28:41.534Z] Player 2: 0x9Fde625ED8A6eC0f3cA393A62be34231a5c167F4
[2025-03-22T09:28:41.534Z] Player 3: 0x0Fae37437c1347c23dc279b424663579d2df67df
[2025-03-22T09:28:41.534Z] Player 4: 0xd2e443F6CF19d5d359e82bbEea76e1133028fda5
[2025-03-22T09:28:41.534Z] Player 5: 0x7B7057B07218fa9f357E39cb2fC2E723C2bfcf9F
[2025-03-22T09:28:41.534Z] 
----- VERIFYING GAME INFO BEFORE SPECTATOR BETTING -----
[2025-03-22T09:28:41.766Z] Game state: REGISTRATION
[2025-03-22T09:28:41.766Z] Player count: 5
[2025-03-22T09:28:41.766Z] Active count: 5
[2025-03-22T09:28:41.766Z] Game keeper: 0x1dA9aCB41763f97F744Da547F2d103042e8Ab239
[2025-03-22T09:28:41.766Z] State version: 1
[2025-03-22T09:28:41.766Z] Is cleaned up: false
[2025-03-22T09:28:41.766Z] 
----- CHECKING IF BETTING IS OPEN -----
[2025-03-22T09:28:42.104Z] Betting open: true
[2025-03-22T09:28:42.104Z] Results processed: false
[2025-03-22T09:28:42.105Z] Total bet amount: 0.0 ETH
[2025-03-22T09:28:42.105Z] 
----- SPECTATORS PLACING BETS -----
[2025-03-22T09:28:53.714Z] Spectator 1 (0x1dA9aCB41763f97F744Da547F2d103042e8Ab239) bet 0.01 ETH on Player 1 (0x9Fde625ED8A6eC0f3cA393A62be34231a5c167F4)
[2025-03-22T09:28:54.130Z] Verified bet - Player: 0x9Fde625ED8A6eC0f3cA393A62be34231a5c167F4, Amount: 0.01 ETH, Claimed: false
[2025-03-22T09:28:57.791Z] Spectator 0x1dA9aCB41763f97F744Da547F2d103042e8Ab239 placed a bet of 0.01 ETH on player 0x9Fde625ED8A6eC0f3cA393A62be34231a5c167F4
[2025-03-22T09:29:17.646Z] Spectator 2 (0x52731AEDA26AB8D159226C51180a7542a4287500) bet 0.01 ETH on Player 2 (0x0Fae37437c1347c23dc279b424663579d2df67df)
[2025-03-22T09:29:17.654Z] Spectator 0x52731AEDA26AB8D159226C51180a7542a4287500 placed a bet of 0.01 ETH on player 0x0Fae37437c1347c23dc279b424663579d2df67df
[2025-03-22T09:29:17.924Z] Verified bet - Player: 0x0Fae37437c1347c23dc279b424663579d2df67df, Amount: 0.01 ETH, Claimed: false
[2025-03-22T09:29:25.648Z] Spectator 3 (0x45ab32ec402D51096398aA4e6a7aF03180E50bD0) bet 0.01 ETH on Player 3 (0xd2e443F6CF19d5d359e82bbEea76e1133028fda5)
[2025-03-22T09:29:25.737Z] Spectator 0x45ab32ec402D51096398aA4e6a7aF03180E50bD0 placed a bet of 0.01 ETH on player 0xd2e443F6CF19d5d359e82bbEea76e1133028fda5
[2025-03-22T09:29:25.862Z] Verified bet - Player: 0xd2e443F6CF19d5d359e82bbEea76e1133028fda5, Amount: 0.01 ETH, Claimed: false
[2025-03-22T09:29:25.862Z] 
----- CHECKING TOTAL BETS ON EACH PLAYER -----
[2025-03-22T09:29:26.078Z] Total bet on Player 1 (0x9Fde625ED8A6eC0f3cA393A62be34231a5c167F4): 0.01 ETH
[2025-03-22T09:29:26.333Z] Total bet on Player 2 (0x0Fae37437c1347c23dc279b424663579d2df67df): 0.01 ETH
[2025-03-22T09:29:26.602Z] Total bet on Player 3 (0xd2e443F6CF19d5d359e82bbEea76e1133028fda5): 0.01 ETH
[2025-03-22T09:29:26.871Z] Total bet on Player 4 (0x7B7057B07218fa9f357E39cb2fC2E723C2bfcf9F): 0.0 ETH
[2025-03-22T09:29:27.201Z] Total betting pool: 0.03 ETH
[2025-03-22T09:29:27.201Z] 
----- STARTING PEEK PHASE -----
[2025-03-22T09:29:28.468Z] startPeekPhase transaction submitted, waiting for confirmation...
[2025-03-22T09:29:37.652Z] startPeekPhase transaction confirmed!
[2025-03-22T09:29:37.653Z] Buffer period started before peek phase. Current state: REGISTRATION, Next state: PEEK_PHASE
[2025-03-22T09:29:37.653Z] Peek phase started for game 1
[2025-03-22T09:29:37.653Z] Game state updated: State=PEEK_PHASE, Pot=0, CurrentBet=0, StateVersion=2
[2025-03-22T09:29:37.738Z] Betting closed for game 1
[2025-03-22T09:29:37.934Z] Betting open after peek phase start: false
[2025-03-22T09:29:38.409Z] Phase end time: 2025-03-22T09:32:06.000Z
[2025-03-22T09:29:38.409Z] Buffer end time: 2025-03-22T09:30:06.000Z
[2025-03-22T09:29:38.410Z] Waiting 28 seconds for buffer period to end...
[2025-03-22T09:29:38.410Z] Waiting for buffer period to end on TEN network...
[2025-03-22T09:30:08.415Z] Buffer period ended
[2025-03-22T09:30:08.418Z] 
----- PLAYERS PEEKING AT CARDS -----
[2025-03-22T09:30:08.688Z] Player 1 initial chip balance: 25
[2025-03-22T09:30:13.675Z] Card for 0x9Fde625ED8A6eC0f3cA393A62be34231a5c167F4: Jack of Spades
[2025-03-22T09:30:13.690Z] Player 1 (0x9Fde625ED8A6eC0f3cA393A62be34231a5c167F4) peeked at their card
[2025-03-22T09:30:13.690Z] Player action: peek, Amount: 5, Nonce: 1
[2025-03-22T09:30:13.958Z] Player 1 chip balance after peeking: 20
[2025-03-22T09:30:14.255Z] Player 2 initial chip balance: 25
[2025-03-22T09:30:30.181Z] Player 2 (0x0Fae37437c1347c23dc279b424663579d2df67df) peeked at their card
[2025-03-22T09:30:30.181Z] Player action: peek, Amount: 5, Nonce: 1
[2025-03-22T09:30:30.194Z] Card for 0x0Fae37437c1347c23dc279b424663579d2df67df: 2 of Diamonds
[2025-03-22T09:30:30.405Z] Player 2 chip balance after peeking: 20
[2025-03-22T09:30:30.405Z] 
----- PLAYER USING MONTY HALL OPTION -----
[2025-03-22T09:30:30.608Z] Player 3 initial chip balance: 25
[2025-03-22T09:30:37.625Z] Player 3 (0xd2e443F6CF19d5d359e82bbEea76e1133028fda5) used Monty Hall option
[2025-03-22T09:30:37.625Z] Player action: montyHall, Amount: 7, Nonce: 1
[2025-03-22T09:30:37.780Z] Monty Hall cards revealed to 0xd2e443F6CF19d5d359e82bbEea76e1133028fda5:
[2025-03-22T09:30:37.780Z] - 3 of Hearts
[2025-03-22T09:30:37.780Z] - 6 of Diamonds
[2025-03-22T09:30:37.835Z] Player 3 chip balance after using Monty Hall: 18
[2025-03-22T09:30:49.625Z] Player 3 decided to swap their card
[2025-03-22T09:30:49.625Z] Player action: swapCard, Amount: 0, Nonce: 2
[2025-03-22T09:30:49.625Z] Player 4 (0x7B7057B07218fa9f357E39cb2fC2E723C2bfcf9F) chose not to peek or use Monty Hall
[2025-03-22T09:30:49.688Z] 0xd2e443F6CF19d5d359e82bbEea76e1133028fda5 swapped King of Spades for Ace of Diamonds
[2025-03-22T09:30:49.830Z] 
----- PLAYER STATUS AFTER PEEK PHASE -----
[2025-03-22T09:30:50.225Z] Player 1 (0x9Fde625ED8A6eC0f3cA393A62be34231a5c167F4):
[2025-03-22T09:30:50.225Z]   Chip balance: 20
[2025-03-22T09:30:50.225Z]   Has peeked: true
[2025-03-22T09:30:50.225Z]   Used Monty Hall: false
[2025-03-22T09:30:50.225Z]   Action nonce: 1
[2025-03-22T09:30:50.603Z] Player 2 (0x0Fae37437c1347c23dc279b424663579d2df67df):
[2025-03-22T09:30:50.604Z]   Chip balance: 20
[2025-03-22T09:30:50.604Z]   Has peeked: true
[2025-03-22T09:30:50.604Z]   Used Monty Hall: false
[2025-03-22T09:30:50.604Z]   Action nonce: 1
[2025-03-22T09:30:50.852Z] Player 3 (0xd2e443F6CF19d5d359e82bbEea76e1133028fda5):
[2025-03-22T09:30:50.852Z]   Chip balance: 18
[2025-03-22T09:30:50.852Z]   Has peeked: false
[2025-03-22T09:30:50.852Z]   Used Monty Hall: true
[2025-03-22T09:30:50.852Z]   Action nonce: 2
[2025-03-22T09:30:51.059Z] Player 4 (0x7B7057B07218fa9f357E39cb2fC2E723C2bfcf9F):
[2025-03-22T09:30:51.059Z]   Chip balance: 25
[2025-03-22T09:30:51.059Z]   Has peeked: false
[2025-03-22T09:30:51.059Z]   Used Monty Hall: false
[2025-03-22T09:30:51.059Z]   Action nonce: 0
[2025-03-22T09:30:51.059Z] 
----- WAITING FOR PEEK PHASE TO END -----
[2025-03-22T09:30:51.304Z] Waiting 75 seconds for peek phase to end...
[2025-03-22T09:30:51.304Z] Waiting for peek phase to end on TEN network...
[2025-03-22T09:32:11.314Z] Peek phase ended
[2025-03-22T09:32:11.314Z] 
----- ENDING PEEK PHASE -----
[2025-03-22T09:32:12.619Z] endPeekPhase transaction submitted, waiting for confirmation...
[2025-03-22T09:32:29.671Z] endPeekPhase transaction confirmed!
[2025-03-22T09:32:29.672Z] Buffer period started before betting phase. Current state: PEEK_PHASE, Next state: BETTING
[2025-03-22T09:32:29.672Z] Betting phase started for game 1
[2025-03-22T09:32:29.672Z] Game state updated: State=BETTING, Pot=0, CurrentBet=0, StateVersion=3
[2025-03-22T09:32:29.922Z] Phase end time: 2025-03-22T09:37:54.000Z
[2025-03-22T09:32:29.922Z] Buffer end time: 2025-03-22T09:32:54.000Z
[2025-03-22T09:32:29.922Z] Waiting 25 seconds for buffer period to end...
[2025-03-22T09:32:29.922Z] Waiting for buffer period to end on TEN network...
[2025-03-22T09:32:34.923Z] 20 seconds remaining in buffer period
[2025-03-22T09:32:44.926Z] 10 seconds remaining in buffer period
[2025-03-22T09:32:54.928Z] Buffer period ended
[2025-03-22T09:32:54.928Z] 
----- PLAYERS PLACING BETS -----
[2025-03-22T09:33:01.714Z] Player 1 (0x9Fde625ED8A6eC0f3cA393A62be34231a5c167F4) bet 5 chips
[2025-03-22T09:33:01.715Z] Player action: bet, Amount: 5, Nonce: 2
[2025-03-22T09:33:02.032Z] Pot after bet 1: 5, Current bet: 5
[2025-03-22T09:33:13.625Z] Player 2 (0x0Fae37437c1347c23dc279b424663579d2df67df) bet 5 chips
[2025-03-22T09:33:13.626Z] Player action: bet, Amount: 5, Nonce: 2
[2025-03-22T09:33:13.831Z] Pot after bet 2: 10, Current bet: 5
[2025-03-22T09:33:25.732Z] Player 3 (0xd2e443F6CF19d5d359e82bbEea76e1133028fda5) bet 10 chips (raising to 10)
[2025-03-22T09:33:25.732Z] Player action: bet, Amount: 10, Nonce: 3
[2025-03-22T09:33:25.943Z] Pot after bet 3: 20, Current bet: 10
[2025-03-22T09:33:37.808Z] Player 1 (0x9Fde625ED8A6eC0f3cA393A62be34231a5c167F4) bet additional 5 chips (calling the raise)
[2025-03-22T09:33:37.809Z] Player action: bet, Amount: 5, Nonce: 3
[2025-03-22T09:33:38.026Z] Pot after bet 4: 25, Current bet: 10
[2025-03-22T09:33:49.724Z] Player 2 (0x0Fae37437c1347c23dc279b424663579d2df67df) bet additional 5 chips (calling the raise)
[2025-03-22T09:33:49.724Z] Player action: bet, Amount: 5, Nonce: 3
[2025-03-22T09:33:49.927Z] Pot after bet 5: 30, Current bet: 10
[2025-03-22T09:34:01.789Z] Player 4 (0x7B7057B07218fa9f357E39cb2fC2E723C2bfcf9F) folded
[2025-03-22T09:34:01.789Z] Player action: fold, Amount: 0, Nonce: 1
[2025-03-22T09:34:01.993Z] Active players after fold: 4
[2025-03-22T09:34:01.993Z] 
----- PLAYER STATUS AFTER BETTING -----
[2025-03-22T09:34:02.296Z] Player 1 (0x9Fde625ED8A6eC0f3cA393A62be34231a5c167F4):
[2025-03-22T09:34:02.296Z]   Chip balance: 10
[2025-03-22T09:34:02.296Z]   Current bet: 10
[2025-03-22T09:34:02.296Z]   Has folded: false
[2025-03-22T09:34:02.297Z]   Action nonce: 3
[2025-03-22T09:34:02.516Z] Player 2 (0x0Fae37437c1347c23dc279b424663579d2df67df):
[2025-03-22T09:34:02.516Z]   Chip balance: 10
[2025-03-22T09:34:02.516Z]   Current bet: 10
[2025-03-22T09:34:02.516Z]   Has folded: false
[2025-03-22T09:34:02.516Z]   Action nonce: 3
[2025-03-22T09:34:02.849Z] Player 3 (0xd2e443F6CF19d5d359e82bbEea76e1133028fda5):
[2025-03-22T09:34:02.849Z]   Chip balance: 8
[2025-03-22T09:34:02.849Z]   Current bet: 10
[2025-03-22T09:34:02.849Z]   Has folded: false
[2025-03-22T09:34:02.849Z]   Action nonce: 3
[2025-03-22T09:34:03.093Z] Player 4 (0x7B7057B07218fa9f357E39cb2fC2E723C2bfcf9F):
[2025-03-22T09:34:03.094Z]   Chip balance: 25
[2025-03-22T09:34:03.094Z]   Current bet: 0
[2025-03-22T09:34:03.094Z]   Has folded: true
[2025-03-22T09:34:03.094Z]   Action nonce: 1
[2025-03-22T09:34:03.408Z] Have all active players matched the current bet? false
[2025-03-22T09:34:03.409Z] 
----- WAITING FOR BETTING PHASE TO END -----
[2025-03-22T09:34:03.610Z] Betting phase ends in 231 seconds at 2025-03-22T09:37:54.000Z
[2025-03-22T09:34:03.610Z] All players have matched bets, manually ending betting phase...
[2025-03-22T09:34:03.610Z] 
----- CHECKING GAME STATE BEFORE ENDING BETTING PHASE -----
[2025-03-22T09:34:03.825Z] Current game state: BETTING
[2025-03-22T09:34:03.825Z] Phase end time: 2025-03-22T09:37:54.000Z
[2025-03-22T09:34:03.825Z] Current time: 2025-03-22T09:34:03.825Z
[2025-03-22T09:34:03.825Z] Buffer end time: 2025-03-22T09:32:54.000Z
[2025-03-22T09:34:03.825Z] Is in buffer period: false
[2025-03-22T09:34:03.825Z] Is phase ended: false
[2025-03-22T09:34:04.197Z] Is caller (0x1dA9aCB41763f97F744Da547F2d103042e8Ab239) a keeper: true
[2025-03-22T09:34:04.197Z] Betting phase hasn't ended yet. Waiting 230 seconds...
[2025-03-22T09:34:04.197Z] Waiting for phase to end on TEN network...
[2025-03-22T09:34:14.199Z] 220 seconds remaining until phase ends
[2025-03-22T09:34:24.201Z] 210 seconds remaining until phase ends
[2025-03-22T09:34:34.203Z] 200 seconds remaining until phase ends
[2025-03-22T09:34:44.206Z] 190 seconds remaining until phase ends
[2025-03-22T09:34:54.210Z] 180 seconds remaining until phase ends
[2025-03-22T09:35:04.214Z] 170 seconds remaining until phase ends
[2025-03-22T09:35:14.215Z] 160 seconds remaining until phase ends
[2025-03-22T09:35:24.217Z] 150 seconds remaining until phase ends
[2025-03-22T09:35:34.220Z] 140 seconds remaining until phase ends
[2025-03-22T09:35:44.223Z] 130 seconds remaining until phase ends
[2025-03-22T09:35:54.226Z] 120 seconds remaining until phase ends
[2025-03-22T09:36:04.228Z] 110 seconds remaining until phase ends
[2025-03-22T09:36:14.232Z] 100 seconds remaining until phase ends
[2025-03-22T09:36:24.235Z] 90 seconds remaining until phase ends
[2025-03-22T09:36:34.238Z] 80 seconds remaining until phase ends
[2025-03-22T09:36:44.242Z] 70 seconds remaining until phase ends
[2025-03-22T09:36:54.244Z] 60 seconds remaining until phase ends
[2025-03-22T09:37:04.247Z] 50 seconds remaining until phase ends
[2025-03-22T09:37:14.250Z] 40 seconds remaining until phase ends
[2025-03-22T09:37:24.252Z] 30 seconds remaining until phase ends
[2025-03-22T09:37:34.255Z] 20 seconds remaining until phase ends
[2025-03-22T09:37:44.257Z] 10 seconds remaining until phase ends
[2025-03-22T09:37:54.258Z] Betting phase has now ended
[2025-03-22T09:37:54.906Z] Game state after waiting: BETTING
[2025-03-22T09:37:54.906Z] Updated phase end time: 2025-03-22T09:37:54.000Z
[2025-03-22T09:37:54.906Z] Updated buffer end time: 2025-03-22T09:32:54.000Z
[2025-03-22T09:37:54.906Z] 
----- ENDING BETTING PHASE -----
[2025-03-22T09:37:55.877Z] endBettingPhase transaction submitted, waiting for confirmation...
[2025-03-22T09:38:01.863Z] endBettingPhase transaction confirmed!
[2025-03-22T09:38:01.863Z] Showdown phase started
[2025-03-22T09:38:01.864Z] 
===== GAME RESULTS =====
[2025-03-22T09:38:01.864Z] Winner: 0xd2e443F6CF19d5d359e82bbEea76e1133028fda5
[2025-03-22T09:38:01.864Z] Pot Amount: 30 chips
[2025-03-22T09:38:01.864Z] Player 3 (0xd2e443F6CF19d5d359e82bbEea76e1133028fda5) won the game!
[2025-03-22T09:38:01.864Z] Final game state: State=SHOWDOWN, Pot=30, CurrentBet=10, StateVersion=4
[2025-03-22T09:38:01.864Z] 
----- REVEALED CARDS DURING SHOWDOWN -----
[2025-03-22T09:38:01.897Z] Card for 0x1dA9aCB41763f97F744Da547F2d103042e8Ab239: 10 of Spades
[2025-03-22T09:38:01.897Z] Card for 0x9Fde625ED8A6eC0f3cA393A62be34231a5c167F4: Jack of Spades
[2025-03-22T09:38:01.897Z] Card for 0x0Fae37437c1347c23dc279b424663579d2df67df: 2 of Diamonds
[2025-03-22T09:38:01.897Z] Card for 0xd2e443F6CF19d5d359e82bbEea76e1133028fda5: Ace of Diamonds
[2025-03-22T09:38:01.924Z] 
===== GAME ENDED EVENT CAPTURED =====
[2025-03-22T09:38:01.924Z] Winner: 0xd2e443F6CF19d5d359e82bbEea76e1133028fda5
[2025-03-22T09:38:01.924Z] Pot Amount: 30 chips
[2025-03-22T09:38:01.924Z] Player 3 (0xd2e443F6CF19d5d359e82bbEea76e1133028fda5) won the game!
[2025-03-22T09:38:02.077Z] Betting results processed for game 1, winner: 0xd2e443F6CF19d5d359e82bbEea76e1133028fda5
[2025-03-22T09:38:02.300Z] Error getting revealed cards: cardValues[i].toNumber is not a function
[2025-03-22T09:38:02.300Z] 
----- FINAL GAME STATE -----
[2025-03-22T09:38:02.599Z] Game state: ENDED
[2025-03-22T09:38:02.599Z] Pot amount: 0
[2025-03-22T09:38:02.599Z] State version: 5
[2025-03-22T09:38:02.599Z] Is cleaned up: false
[2025-03-22T09:38:02.599Z] 
----- FINAL PLAYER BALANCES -----
[2025-03-22T09:38:02.801Z] Player 1 (0x9Fde625ED8A6eC0f3cA393A62be34231a5c167F4):
[2025-03-22T09:38:02.801Z]   Initial balance: 25
[2025-03-22T09:38:02.801Z]   Final balance: 10
[2025-03-22T09:38:02.802Z]   Difference: -15
[2025-03-22T09:38:03.010Z] Player 2 (0x0Fae37437c1347c23dc279b424663579d2df67df):
[2025-03-22T09:38:03.010Z]   Initial balance: 25
[2025-03-22T09:38:03.011Z]   Final balance: 10
[2025-03-22T09:38:03.011Z]   Difference: -15
[2025-03-22T09:38:03.259Z] Player 3 (0xd2e443F6CF19d5d359e82bbEea76e1133028fda5):
[2025-03-22T09:38:03.259Z]   Initial balance: 25
[2025-03-22T09:38:03.259Z]   Final balance: 38
[2025-03-22T09:38:03.260Z]   Difference: 13
[2025-03-22T09:38:03.260Z] *** Player 3 gained 13 chips - WINNER! ***
[2025-03-22T09:38:03.501Z] Player 4 (0x7B7057B07218fa9f357E39cb2fC2E723C2bfcf9F):
[2025-03-22T09:38:03.501Z]   Initial balance: 25
[2025-03-22T09:38:03.501Z]   Final balance: 25
[2025-03-22T09:38:03.501Z]   Difference: 0
[2025-03-22T09:38:03.501Z] 
----- SPECTATOR BETTING RESULTS -----
[2025-03-22T09:38:03.775Z] Betting results processed: true
[2025-03-22T09:38:03.776Z] Game winner: 0xd2e443F6CF19d5d359e82bbEea76e1133028fda5
[2025-03-22T09:38:03.778Z] Total betting pool: 0.03 ETH
[2025-03-22T09:38:03.778Z] 
----- SPECTATOR WINNINGS CHECK -----
[2025-03-22T09:38:04.295Z] Spectator 1 (0x1dA9aCB41763f97F744Da547F2d103042e8Ab239):
[2025-03-22T09:38:04.296Z]   Bet on: 0x9Fde625ED8A6eC0f3cA393A62be34231a5c167F4
[2025-03-22T09:38:04.296Z]   Bet amount: 0.01 ETH
[2025-03-22T09:38:04.296Z]   Has winnings: false
[2025-03-22T09:38:04.748Z] Spectator 2 (0x52731AEDA26AB8D159226C51180a7542a4287500):
[2025-03-22T09:38:04.748Z]   Bet on: 0x0Fae37437c1347c23dc279b424663579d2df67df
[2025-03-22T09:38:04.748Z]   Bet amount: 0.01 ETH
[2025-03-22T09:38:04.748Z]   Has winnings: false
[2025-03-22T09:38:05.556Z] Spectator 3 (0x45ab32ec402D51096398aA4e6a7aF03180E50bD0):
[2025-03-22T09:38:05.556Z]   Bet on: 0xd2e443F6CF19d5d359e82bbEea76e1133028fda5
[2025-03-22T09:38:05.556Z]   Bet amount: 0.01 ETH
[2025-03-22T09:38:05.556Z]   Has winnings: true
[2025-03-22T09:38:05.557Z]   Winnings amount: 0.03 ETH
[2025-03-22T09:38:05.557Z] 
----- SPECTATORS CLAIMING WINNINGS -----
