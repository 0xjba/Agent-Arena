[2025-03-21T14:51:08.891Z] 
===== SETTING UP TEST ENVIRONMENT =====
[2025-03-21T14:51:08.922Z] Wallet setup complete.
[2025-03-21T14:51:08.922Z] Owner address: 0x1dA9aCB41763f97F744Da547F2d103042e8Ab239
[2025-03-21T14:51:08.922Z] Player 1 address: 0x9Fde625ED8A6eC0f3cA393A62be34231a5c167F4
[2025-03-21T14:51:08.922Z] Player 2 address: 0x0Fae37437c1347c23dc279b424663579d2df67df
[2025-03-21T14:51:08.922Z] Player 3 address: 0xd2e443F6CF19d5d359e82bbEea76e1133028fda5
[2025-03-21T14:51:08.922Z] Player 4 address: 0x7B7057B07218fa9f357E39cb2fC2E723C2bfcf9F
[2025-03-21T14:51:08.922Z] Keeper address: 0x1dA9aCB41763f97F744Da547F2d103042e8Ab239
[2025-03-21T14:51:08.923Z] 
----- CHECKING WALLET BALANCES -----
[2025-03-21T14:51:10.105Z] Address 0x1dA9aCB41763f97F744Da547F2d103042e8Ab239 has 0.0 ETH
[2025-03-21T14:51:10.105Z] WARNING: Address 0x1dA9aCB41763f97F744Da547F2d103042e8Ab239 has low balance. Please fund with ETH.
[2025-03-21T14:51:10.106Z] Address 0x9Fde625ED8A6eC0f3cA393A62be34231a5c167F4 has 0.0 ETH
[2025-03-21T14:51:10.106Z] WARNING: Address 0x9Fde625ED8A6eC0f3cA393A62be34231a5c167F4 has low balance. Please fund with ETH.
[2025-03-21T14:51:10.107Z] Address 0x0Fae37437c1347c23dc279b424663579d2df67df has 0.0 ETH
[2025-03-21T14:51:10.107Z] WARNING: Address 0x0Fae37437c1347c23dc279b424663579d2df67df has low balance. Please fund with ETH.
[2025-03-21T14:51:10.109Z] Address 0xd2e443F6CF19d5d359e82bbEea76e1133028fda5 has 0.0 ETH
[2025-03-21T14:51:10.109Z] WARNING: Address 0xd2e443F6CF19d5d359e82bbEea76e1133028fda5 has low balance. Please fund with ETH.
[2025-03-21T14:51:10.111Z] Address 0x7B7057B07218fa9f357E39cb2fC2E723C2bfcf9F has 0.0 ETH
[2025-03-21T14:51:10.111Z] WARNING: Address 0x7B7057B07218fa9f357E39cb2fC2E723C2bfcf9F has low balance. Please fund with ETH.
[2025-03-21T14:51:10.113Z] Address 0x1dA9aCB41763f97F744Da547F2d103042e8Ab239 has 0.0 ETH
[2025-03-21T14:51:10.113Z] WARNING: Address 0x1dA9aCB41763f97F744Da547F2d103042e8Ab239 has low balance. Please fund with ETH.
[2025-03-21T14:51:10.113Z] 
----- DEPLOYING CONTRACTS -----
[2025-03-21T14:51:10.113Z] Deploying CardLibrary...
[2025-03-21T14:51:36.938Z] 
===== SETTING UP TEST ENVIRONMENT =====
[2025-03-21T14:51:36.967Z] Wallet setup complete.
[2025-03-21T14:51:36.967Z] Owner address: 0x1dA9aCB41763f97F744Da547F2d103042e8Ab239
[2025-03-21T14:51:36.967Z] Player 1 address: 0x9Fde625ED8A6eC0f3cA393A62be34231a5c167F4
[2025-03-21T14:51:36.967Z] Player 2 address: 0x0Fae37437c1347c23dc279b424663579d2df67df
[2025-03-21T14:51:36.967Z] Player 3 address: 0xd2e443F6CF19d5d359e82bbEea76e1133028fda5
[2025-03-21T14:51:36.967Z] Player 4 address: 0x7B7057B07218fa9f357E39cb2fC2E723C2bfcf9F
[2025-03-21T14:51:36.967Z] Keeper address: 0x1dA9aCB41763f97F744Da547F2d103042e8Ab239
[2025-03-21T14:51:36.967Z] 
----- CHECKING WALLET BALANCES -----
[2025-03-21T14:51:38.240Z] Address 0x1dA9aCB41763f97F744Da547F2d103042e8Ab239 has 0.67212017844 ETH
[2025-03-21T14:51:38.519Z] Address 0x9Fde625ED8A6eC0f3cA393A62be34231a5c167F4 has 0.9900649164 ETH
[2025-03-21T14:51:38.795Z] Address 0x0Fae37437c1347c23dc279b424663579d2df67df has 0.7423533517 ETH
[2025-03-21T14:51:39.075Z] Address 0xd2e443F6CF19d5d359e82bbEea76e1133028fda5 has 0.4930769849 ETH
[2025-03-21T14:51:39.384Z] Address 0x7B7057B07218fa9f357E39cb2fC2E723C2bfcf9F has 0.7406826889 ETH
[2025-03-21T14:51:39.660Z] Address 0x1dA9aCB41763f97F744Da547F2d103042e8Ab239 has 0.67212017844 ETH
[2025-03-21T14:51:39.660Z] 
----- DEPLOYING CONTRACTS -----
[2025-03-21T14:51:39.660Z] Deploying CardLibrary...
[2025-03-21T14:51:45.941Z] CardLibrary deployed at: 0xAab74b528a8499A3c9e8D53d6D49A6C9756730F1
[2025-03-21T14:51:45.941Z] Deploying GameLibrary...
[2025-03-21T14:51:52.082Z] GameLibrary deployed at: 0xAEa4605E99b9E99442cBf4F83cDe3ED6984493f5
[2025-03-21T14:53:32.555Z] 
===== SETTING UP TEST ENVIRONMENT =====
[2025-03-21T14:53:32.584Z] Wallet setup complete.
[2025-03-21T14:53:32.584Z] Owner address: 0x1dA9aCB41763f97F744Da547F2d103042e8Ab239
[2025-03-21T14:53:32.585Z] Player 1 address: 0x9Fde625ED8A6eC0f3cA393A62be34231a5c167F4
[2025-03-21T14:53:32.585Z] Player 2 address: 0x0Fae37437c1347c23dc279b424663579d2df67df
[2025-03-21T14:53:32.585Z] Player 3 address: 0xd2e443F6CF19d5d359e82bbEea76e1133028fda5
[2025-03-21T14:53:32.585Z] Player 4 address: 0x7B7057B07218fa9f357E39cb2fC2E723C2bfcf9F
[2025-03-21T14:53:32.585Z] Keeper address: 0x1dA9aCB41763f97F744Da547F2d103042e8Ab239
[2025-03-21T14:53:32.585Z] 
----- CHECKING WALLET BALANCES -----
[2025-03-21T14:53:33.962Z] Address 0x1dA9aCB41763f97F744Da547F2d103042e8Ab239 has 0.67186420124 ETH
[2025-03-21T14:53:34.241Z] Address 0x9Fde625ED8A6eC0f3cA393A62be34231a5c167F4 has 0.9900649164 ETH
[2025-03-21T14:53:34.522Z] Address 0x0Fae37437c1347c23dc279b424663579d2df67df has 0.7423533517 ETH
[2025-03-21T14:53:34.794Z] Address 0xd2e443F6CF19d5d359e82bbEea76e1133028fda5 has 0.4930769849 ETH
[2025-03-21T14:53:35.068Z] Address 0x7B7057B07218fa9f357E39cb2fC2E723C2bfcf9F has 0.7406826889 ETH
[2025-03-21T14:53:35.345Z] Address 0x1dA9aCB41763f97F744Da547F2d103042e8Ab239 has 0.67186420124 ETH
[2025-03-21T14:53:35.345Z] 
----- DEPLOYING CONTRACTS -----
[2025-03-21T14:53:35.345Z] Deploying CardLibrary...
[2025-03-21T14:53:38.283Z] CardLibrary deployed at: 0xB363Ba1AB3EFd63495BF3505C5405960cf301450
[2025-03-21T14:53:38.284Z] Deploying GameLibrary...
[2025-03-21T14:53:40.480Z] GameLibrary deployed at: 0xcE450e324F56e6FC212de94703690D81Ad49dC47
[2025-03-21T14:53:40.481Z] Deploying OneCard main contract...
[2025-03-21T14:53:47.328Z] OneCard contract deployed at: 0x3efA2d00026953524d1678B44Ad0ae2C2Dc745E6
[2025-03-21T14:53:47.328Z] Deploying PokerSpectatorView contract...
[2025-03-21T14:53:53.466Z] PokerSpectatorView contract deployed at: 0x89eEcbCb4737F344eB50a76fAA25C46e9Bb6f1E3
[2025-03-21T14:53:53.466Z] 
Add these to your .env file for future use:
[2025-03-21T14:53:53.466Z] POKER_CONTRACT_ADDRESS=0x3efA2d00026953524d1678B44Ad0ae2C2Dc745E6
[2025-03-21T14:53:53.466Z] SPECTATOR_CONTRACT_ADDRESS=0x89eEcbCb4737F344eB50a76fAA25C46e9Bb6f1E3
[2025-03-21T14:53:53.468Z] 
===== STARTING ONE CARD POKER WITH MONTY HALL GAME TEST =====
[2025-03-21T14:53:53.468Z] 
----- ADDING PLAYERS TO WHITELIST -----
[2025-03-21T14:53:55.234Z] Added 4 players to whitelist
[2025-03-21T14:53:55.234Z] 
----- CREATING A NEW GAME -----
[2025-03-21T14:57:02.313Z] 
===== SETTING UP TEST ENVIRONMENT =====
[2025-03-21T14:57:02.343Z] Wallet setup complete.
[2025-03-21T14:57:02.343Z] Owner address: 0x1dA9aCB41763f97F744Da547F2d103042e8Ab239
[2025-03-21T14:57:02.343Z] Player 1 address: 0x9Fde625ED8A6eC0f3cA393A62be34231a5c167F4
[2025-03-21T14:57:02.343Z] Player 2 address: 0x0Fae37437c1347c23dc279b424663579d2df67df
[2025-03-21T14:57:02.343Z] Player 3 address: 0xd2e443F6CF19d5d359e82bbEea76e1133028fda5
[2025-03-21T14:57:02.343Z] Player 4 address: 0x7B7057B07218fa9f357E39cb2fC2E723C2bfcf9F
[2025-03-21T14:57:02.343Z] Keeper address: 0x1dA9aCB41763f97F744Da547F2d103042e8Ab239
[2025-03-21T14:57:02.343Z] 
----- CHECKING WALLET BALANCES -----
[2025-03-21T14:57:03.382Z] Address 0x1dA9aCB41763f97F744Da547F2d103042e8Ab239 has 0.66056503714 ETH
[2025-03-21T14:57:03.672Z] Address 0x9Fde625ED8A6eC0f3cA393A62be34231a5c167F4 has 0.9900649164 ETH
[2025-03-21T14:57:03.951Z] Address 0x0Fae37437c1347c23dc279b424663579d2df67df has 0.7423533517 ETH
[2025-03-21T14:57:04.234Z] Address 0xd2e443F6CF19d5d359e82bbEea76e1133028fda5 has 0.4930769849 ETH
[2025-03-21T14:57:04.512Z] Address 0x7B7057B07218fa9f357E39cb2fC2E723C2bfcf9F has 0.7406826889 ETH
[2025-03-21T14:57:04.792Z] Address 0x1dA9aCB41763f97F744Da547F2d103042e8Ab239 has 0.66056503714 ETH
[2025-03-21T14:57:04.792Z] 
----- DEPLOYING CONTRACTS -----
[2025-03-21T14:57:04.792Z] Deploying CardLibrary...
[2025-03-21T14:57:07.331Z] CardLibrary deployed at: 0xb5EAA1410b9eE012db1e9f157945feE047d4e5FC
[2025-03-21T14:57:07.331Z] Deploying GameLibrary...
[2025-03-21T14:57:13.194Z] GameLibrary deployed at: 0xABaBf1cEeff2E3D9f0577503D2ACF2058a6B2f29
[2025-03-21T14:57:13.195Z] Deploying OneCard main contract...
[2025-03-21T14:57:15.653Z] OneCard contract deployed at: 0x56Ac89B13C17F76ff0b1Fb0C82e7655244c34992
[2025-03-21T14:57:15.653Z] Deploying PokerSpectatorView contract...
[2025-03-21T14:57:21.484Z] PokerSpectatorView contract deployed at: 0xc4a7B58D21a2A186CD4Dedfa15d7eC15DB7a2Aa7
[2025-03-21T14:57:21.484Z] 
Add these to your .env file for future use:
[2025-03-21T14:57:21.484Z] POKER_CONTRACT_ADDRESS=0x56Ac89B13C17F76ff0b1Fb0C82e7655244c34992
[2025-03-21T14:57:21.484Z] SPECTATOR_CONTRACT_ADDRESS=0xc4a7B58D21a2A186CD4Dedfa15d7eC15DB7a2Aa7
[2025-03-21T14:57:21.487Z] 
===== STARTING ONE CARD POKER WITH MONTY HALL GAME TEST =====
[2025-03-21T14:57:21.488Z] 
----- ADDING PLAYERS TO WHITELIST -----
[2025-03-21T14:57:27.587Z] Added 4 players to whitelist
[2025-03-21T14:57:27.587Z] 
----- CREATING A NEW GAME -----
[2025-03-21T14:57:33.665Z] Created Game with ID: 1
[2025-03-21T14:57:33.947Z] Initial players in game: 5
[2025-03-21T14:57:33.947Z] Player 1: 0x1dA9aCB41763f97F744Da547F2d103042e8Ab239
[2025-03-21T14:57:33.947Z] Player 2: 0x9Fde625ED8A6eC0f3cA393A62be34231a5c167F4
[2025-03-21T14:57:33.947Z] Player 3: 0x0Fae37437c1347c23dc279b424663579d2df67df
[2025-03-21T14:57:33.947Z] Player 4: 0xd2e443F6CF19d5d359e82bbEea76e1133028fda5
[2025-03-21T14:57:33.947Z] Player 5: 0x7B7057B07218fa9f357E39cb2fC2E723C2bfcf9F
[2025-03-21T14:57:33.948Z] 
----- VERIFYING GAME INFO BEFORE STARTING PEEK PHASE -----
[2025-03-21T14:57:34.229Z] Game state: REGISTRATION
[2025-03-21T14:57:34.229Z] Player count: 5
[2025-03-21T14:57:34.229Z] Active count: 5
[2025-03-21T14:57:34.229Z] Game keeper: 0x1dA9aCB41763f97F744Da547F2d103042e8Ab239
[2025-03-21T14:57:34.230Z] State version: 1
[2025-03-21T14:57:34.230Z] Is cleaned up: false
[2025-03-21T14:57:34.230Z] 
----- STARTING PEEK PHASE -----
[2025-03-21T14:57:35.975Z] startPeekPhase transaction submitted, waiting for confirmation...
[2025-03-21T14:57:36.662Z] startPeekPhase transaction confirmed!
[2025-03-21T14:57:36.662Z] Buffer period started before peek phase. Current state: REGISTRATION, Next state: PEEK_PHASE
[2025-03-21T14:57:36.662Z] Peek phase started for game 1
[2025-03-21T14:57:36.662Z] Game state updated: State=PEEK_PHASE, Pot=0, CurrentBet=0, StateVersion=2
[2025-03-21T14:57:36.937Z] Phase end time: 2025-03-21T15:00:05.000Z
[2025-03-21T14:57:36.937Z] Buffer end time: 2025-03-21T14:58:05.000Z
[2025-03-21T14:57:36.937Z] Waiting 29 seconds for buffer period to end...
[2025-03-21T14:57:36.937Z] Waiting for buffer period to end on TEN network...
[2025-03-21T14:58:06.947Z] Buffer period ended
[2025-03-21T14:58:06.949Z] 
----- PLAYERS PEEKING AT CARDS -----
[2025-03-21T14:58:07.917Z] Player 1 initial chip balance: 25
[2025-03-21T14:58:11.377Z] Player 1 (0x9Fde625ED8A6eC0f3cA393A62be34231a5c167F4) peeked at their card
[2025-03-21T14:58:11.378Z] Player action: peek, Amount: 5, Nonce: 1
[2025-03-21T14:58:11.433Z] Card for 0x9Fde625ED8A6eC0f3cA393A62be34231a5c167F4: 8 of Diamonds
[2025-03-21T14:58:11.657Z] Player 1 chip balance after peeking: 20
[2025-03-21T14:58:11.937Z] Player 2 initial chip balance: 25
[2025-03-21T14:58:13.717Z] Player 2 (0x0Fae37437c1347c23dc279b424663579d2df67df) peeked at their card
[2025-03-21T14:58:13.717Z] Player action: peek, Amount: 5, Nonce: 1
[2025-03-21T14:58:13.997Z] Player 2 chip balance after peeking: 20
[2025-03-21T14:58:13.997Z] 
----- PLAYER USING MONTY HALL OPTION -----
[2025-03-21T14:58:14.278Z] Player 3 initial chip balance: 25
[2025-03-21T14:58:15.455Z] Card for 0x0Fae37437c1347c23dc279b424663579d2df67df: Queen of Spades
[2025-03-21T14:58:19.412Z] Player 3 (0xd2e443F6CF19d5d359e82bbEea76e1133028fda5) used Monty Hall option
[2025-03-21T14:58:19.412Z] Player action: montyHall, Amount: 7, Nonce: 1
[2025-03-21T14:58:19.426Z] Monty Hall cards revealed to 0xd2e443F6CF19d5d359e82bbEea76e1133028fda5:
[2025-03-21T14:58:19.426Z] - Ace of Clubs
[2025-03-21T14:58:19.426Z] - 6 of Clubs
[2025-03-21T14:58:19.698Z] Player 3 chip balance after using Monty Hall: 18
[2025-03-21T14:58:23.376Z] Player 3 decided to swap their card
[2025-03-21T14:58:23.377Z] Player action: swapCard, Amount: 0, Nonce: 2
[2025-03-21T14:58:23.377Z] Player 4 (0x7B7057B07218fa9f357E39cb2fC2E723C2bfcf9F) chose not to peek or use Monty Hall
[2025-03-21T14:58:23.428Z] 0xd2e443F6CF19d5d359e82bbEea76e1133028fda5 swapped 3 of Diamonds for 10 of Diamonds
[2025-03-21T14:58:23.677Z] 
----- PLAYER STATUS AFTER PEEK PHASE -----
[2025-03-21T14:58:23.956Z] Player 1 (0x9Fde625ED8A6eC0f3cA393A62be34231a5c167F4):
[2025-03-21T14:58:23.956Z]   Chip balance: 20
[2025-03-21T14:58:23.956Z]   Has peeked: true
[2025-03-21T14:58:23.956Z]   Used Monty Hall: false
[2025-03-21T14:58:23.957Z]   Action nonce: 1
[2025-03-21T14:58:24.238Z] Player 2 (0x0Fae37437c1347c23dc279b424663579d2df67df):
[2025-03-21T14:58:24.238Z]   Chip balance: 20
[2025-03-21T14:58:24.238Z]   Has peeked: true
[2025-03-21T14:58:24.238Z]   Used Monty Hall: false
[2025-03-21T14:58:24.238Z]   Action nonce: 1
[2025-03-21T14:58:24.515Z] Player 3 (0xd2e443F6CF19d5d359e82bbEea76e1133028fda5):
[2025-03-21T14:58:24.515Z]   Chip balance: 18
[2025-03-21T14:58:24.515Z]   Has peeked: false
[2025-03-21T14:58:24.515Z]   Used Monty Hall: true
[2025-03-21T14:58:24.515Z]   Action nonce: 2
[2025-03-21T14:58:24.798Z] Player 4 (0x7B7057B07218fa9f357E39cb2fC2E723C2bfcf9F):
[2025-03-21T14:58:24.798Z]   Chip balance: 25
[2025-03-21T14:58:24.798Z]   Has peeked: false
[2025-03-21T14:58:24.798Z]   Used Monty Hall: false
[2025-03-21T14:58:24.798Z]   Action nonce: 0
[2025-03-21T14:58:24.798Z] 
----- WAITING FOR PEEK PHASE TO END -----
[2025-03-21T14:58:25.081Z] Waiting 100 seconds for peek phase to end...
[2025-03-21T14:58:25.081Z] Waiting for peek phase to end on TEN network...
[2025-03-21T14:58:35.084Z] 90 seconds remaining in peek phase
[2025-03-21T14:59:05.088Z] 60 seconds remaining in peek phase
[2025-03-21T14:59:35.091Z] 30 seconds remaining in peek phase
[2025-03-21T15:00:05.096Z] Peek phase ended
[2025-03-21T15:00:05.097Z] 
----- ENDING PEEK PHASE -----
[2025-03-21T15:00:06.214Z] endPeekPhase transaction submitted, waiting for confirmation...
[2025-03-21T15:00:07.429Z] endPeekPhase transaction confirmed!
[2025-03-21T15:00:07.430Z] Buffer period started before betting phase. Current state: PEEK_PHASE, Next state: BETTING
[2025-03-21T15:00:07.430Z] Betting phase started for game 1
[2025-03-21T15:00:07.430Z] Game state updated: State=BETTING, Pot=0, CurrentBet=0, StateVersion=3
[2025-03-21T15:00:07.707Z] Phase end time: 2025-03-21T15:05:36.000Z
[2025-03-21T15:00:07.707Z] Buffer end time: 2025-03-21T15:00:36.000Z
[2025-03-21T15:00:07.707Z] Waiting 29 seconds for buffer period to end...
[2025-03-21T15:00:07.707Z] Waiting for buffer period to end on TEN network...
[2025-03-21T15:00:37.715Z] Buffer period ended
[2025-03-21T15:00:37.715Z] 
----- PLAYERS PLACING BETS -----
[2025-03-21T15:00:39.412Z] Player 1 (0x9Fde625ED8A6eC0f3cA393A62be34231a5c167F4) bet 5 chips
[2025-03-21T15:00:39.741Z] Pot after bet 1: 5, Current bet: 5
[2025-03-21T15:00:43.403Z] Player 2 (0x0Fae37437c1347c23dc279b424663579d2df67df) bet 5 chips
[2025-03-21T15:00:43.703Z] Pot after bet 2: 10, Current bet: 5
[2025-03-21T15:00:47.405Z] Player 3 (0xd2e443F6CF19d5d359e82bbEea76e1133028fda5) bet 10 chips (raising to 10)
[2025-03-21T15:00:47.707Z] Pot after bet 3: 20, Current bet: 10
[2025-03-21T15:00:51.413Z] Player 1 (0x9Fde625ED8A6eC0f3cA393A62be34231a5c167F4) bet additional 5 chips (calling the raise)
[2025-03-21T15:00:51.695Z] Pot after bet 4: 25, Current bet: 10
[2025-03-21T15:00:55.412Z] Player 2 (0x0Fae37437c1347c23dc279b424663579d2df67df) bet additional 5 chips (calling the raise)
[2025-03-21T15:00:55.413Z] Player action: bet, Amount: 5, Nonce: 3
[2025-03-21T15:00:55.710Z] Pot after bet 5: 30, Current bet: 10
[2025-03-21T15:00:59.406Z] Player 4 (0x7B7057B07218fa9f357E39cb2fC2E723C2bfcf9F) folded
[2025-03-21T15:00:59.726Z] Active players after fold: 4
[2025-03-21T15:00:59.726Z] 
----- PLAYER STATUS AFTER BETTING -----
[2025-03-21T15:01:00.010Z] Player 1 (0x9Fde625ED8A6eC0f3cA393A62be34231a5c167F4):
[2025-03-21T15:01:00.010Z]   Chip balance: 10
[2025-03-21T15:01:00.010Z]   Current bet: 10
[2025-03-21T15:01:00.010Z]   Has folded: false
[2025-03-21T15:01:00.010Z]   Action nonce: 3
[2025-03-21T15:01:00.288Z] Player 2 (0x0Fae37437c1347c23dc279b424663579d2df67df):
[2025-03-21T15:01:00.288Z]   Chip balance: 10
[2025-03-21T15:01:00.288Z]   Current bet: 10
[2025-03-21T15:01:00.288Z]   Has folded: false
[2025-03-21T15:01:00.288Z]   Action nonce: 3
[2025-03-21T15:01:00.568Z] Player 3 (0xd2e443F6CF19d5d359e82bbEea76e1133028fda5):
[2025-03-21T15:01:00.568Z]   Chip balance: 8
[2025-03-21T15:01:00.568Z]   Current bet: 10
[2025-03-21T15:01:00.568Z]   Has folded: false
[2025-03-21T15:01:00.569Z]   Action nonce: 3
[2025-03-21T15:01:00.847Z] Player 4 (0x7B7057B07218fa9f357E39cb2fC2E723C2bfcf9F):
[2025-03-21T15:01:00.847Z]   Chip balance: 25
[2025-03-21T15:01:00.847Z]   Current bet: 0
[2025-03-21T15:01:00.847Z]   Has folded: true
[2025-03-21T15:01:00.847Z]   Action nonce: 1
[2025-03-21T15:01:01.128Z] Have all active players matched the current bet? false
[2025-03-21T15:01:01.130Z] 
----- WAITING FOR BETTING PHASE TO END -----
[2025-03-21T15:01:01.415Z] Betting phase ends in 275 seconds at 2025-03-21T15:05:36.000Z
[2025-03-21T15:01:01.416Z] All players have matched bets, manually ending betting phase...
[2025-03-21T15:01:01.416Z] 
----- ENDING BETTING PHASE -----
[2025-03-21T15:01:02.519Z] endBettingPhase transaction submitted, waiting for confirmation...
[2025-03-21T15:01:03.454Z] Error ending betting phase: transaction failed [ See: https://links.ethers.org/v5-errors-CALL_EXCEPTION ] (transactionHash="0x680309dc8e33ff02addf74bb8a9b12ab549e812df078bde0eda28f8f093d03a6", transaction={"type":2,"chainId":443,"nonce":124,"maxPriorityFeePerGas":{"type":"BigNumber","hex":"0x59682f00"},"maxFeePerGas":{"type":"BigNumber","hex":"0x6553f100"},"gasPrice":null,"gasLimit":{"type":"BigNumber","hex":"0xe4e1c0"},"to":"0x56Ac89B13C17F76ff0b1Fb0C82e7655244c34992","value":{"type":"BigNumber","hex":"0x00"},"data":"0x30be62b20000000000000000000000000000000000000000000000000000000000000001","accessList":[],"hash":"0x680309dc8e33ff02addf74bb8a9b12ab549e812df078bde0eda28f8f093d03a6","v":1,"r":"0x02b23d5a5daf22305ebd51761a2417dc65f30b146a5d9c10d7159790f88bfa36","s":"0x2179d165dcc7186199a3209ab2fe401449c2640d54c33297cf16210d6c545520","from":"0x1dA9aCB41763f97F744Da547F2d103042e8Ab239","confirmations":0}, receipt={"to":"0x56Ac89B13C17F76ff0b1Fb0C82e7655244c34992","from":"0x1dA9aCB41763f97F744Da547F2d103042e8Ab239","contractAddress":null,"transactionIndex":0,"gasUsed":{"type":"BigNumber","hex":"0x9853"},"logsBloom":"0x00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000","blockHash":"0x7bd797ea4af5d6e7a653e6f9135b21b03282ee127de9933868a0e0369d7e9e65","transactionHash":"0x680309dc8e33ff02addf74bb8a9b12ab549e812df078bde0eda28f8f093d03a6","logs":[],"blockNumber":2470592,"confirmations":1,"cumulativeGasUsed":{"type":"BigNumber","hex":"0x7f68"},"effectiveGasPrice":{"type":"BigNumber","hex":"0x5f5e1000"},"status":0,"type":2,"byzantium":true}, code=CALL_EXCEPTION, version=providers/5.7.2)
[2025-03-21T15:01:03.454Z] Error during game flow: transaction failed [ See: https://links.ethers.org/v5-errors-CALL_EXCEPTION ] (transactionHash="0x680309dc8e33ff02addf74bb8a9b12ab549e812df078bde0eda28f8f093d03a6", transaction={"type":2,"chainId":443,"nonce":124,"maxPriorityFeePerGas":{"type":"BigNumber","hex":"0x59682f00"},"maxFeePerGas":{"type":"BigNumber","hex":"0x6553f100"},"gasPrice":null,"gasLimit":{"type":"BigNumber","hex":"0xe4e1c0"},"to":"0x56Ac89B13C17F76ff0b1Fb0C82e7655244c34992","value":{"type":"BigNumber","hex":"0x00"},"data":"0x30be62b20000000000000000000000000000000000000000000000000000000000000001","accessList":[],"hash":"0x680309dc8e33ff02addf74bb8a9b12ab549e812df078bde0eda28f8f093d03a6","v":1,"r":"0x02b23d5a5daf22305ebd51761a2417dc65f30b146a5d9c10d7159790f88bfa36","s":"0x2179d165dcc7186199a3209ab2fe401449c2640d54c33297cf16210d6c545520","from":"0x1dA9aCB41763f97F744Da547F2d103042e8Ab239","confirmations":0}, receipt={"to":"0x56Ac89B13C17F76ff0b1Fb0C82e7655244c34992","from":"0x1dA9aCB41763f97F744Da547F2d103042e8Ab239","contractAddress":null,"transactionIndex":0,"gasUsed":{"type":"BigNumber","hex":"0x9853"},"logsBloom":"0x00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000","blockHash":"0x7bd797ea4af5d6e7a653e6f9135b21b03282ee127de9933868a0e0369d7e9e65","transactionHash":"0x680309dc8e33ff02addf74bb8a9b12ab549e812df078bde0eda28f8f093d03a6","logs":[],"blockNumber":2470592,"confirmations":1,"cumulativeGasUsed":{"type":"BigNumber","hex":"0x7f68"},"effectiveGasPrice":{"type":"BigNumber","hex":"0x5f5e1000"},"status":0,"type":2,"byzantium":true}, code=CALL_EXCEPTION, version=providers/5.7.2)
[2025-03-21T15:02:12.173Z] 
===== SETTING UP TEST ENVIRONMENT =====
[2025-03-21T15:02:12.200Z] Wallet setup complete.
[2025-03-21T15:02:12.201Z] Owner address: 0x1dA9aCB41763f97F744Da547F2d103042e8Ab239
[2025-03-21T15:02:12.201Z] Player 1 address: 0x9Fde625ED8A6eC0f3cA393A62be34231a5c167F4
[2025-03-21T15:02:12.201Z] Player 2 address: 0x0Fae37437c1347c23dc279b424663579d2df67df
[2025-03-21T15:02:12.201Z] Player 3 address: 0xd2e443F6CF19d5d359e82bbEea76e1133028fda5
[2025-03-21T15:02:12.201Z] Player 4 address: 0x7B7057B07218fa9f357E39cb2fC2E723C2bfcf9F
[2025-03-21T15:02:12.201Z] Keeper address: 0x1dA9aCB41763f97F744Da547F2d103042e8Ab239
[2025-03-21T15:02:12.201Z] 
----- CHECKING WALLET BALANCES -----
[2025-03-21T15:02:13.217Z] Address 0x1dA9aCB41763f97F744Da547F2d103042e8Ab239 has 0.64631107024 ETH
[2025-03-21T15:02:13.512Z] Address 0x9Fde625ED8A6eC0f3cA393A62be34231a5c167F4 has 0.9896221568 ETH
[2025-03-21T15:02:13.792Z] Address 0x0Fae37437c1347c23dc279b424663579d2df67df has 0.7419696339 ETH
[2025-03-21T15:02:14.075Z] Address 0xd2e443F6CF19d5d359e82bbEea76e1133028fda5 has 0.4924689873 ETH
[2025-03-21T15:02:14.352Z] Address 0x7B7057B07218fa9f357E39cb2fC2E723C2bfcf9F has 0.7405505591 ETH
[2025-03-21T15:02:14.625Z] Address 0x1dA9aCB41763f97F744Da547F2d103042e8Ab239 has 0.64631107024 ETH
[2025-03-21T15:02:14.625Z] 
----- DEPLOYING CONTRACTS -----
[2025-03-21T15:02:14.625Z] Deploying CardLibrary...
[2025-03-21T15:02:20.971Z] CardLibrary deployed at: 0x7cc9738CebC4B18DB9AbD57f9356fF2564AFdc92
[2025-03-21T15:02:20.971Z] Deploying GameLibrary...
[2025-03-21T15:02:27.067Z] GameLibrary deployed at: 0x92c706Ac4eBEEE4f08117E7c4872fBD2B05816fB
[2025-03-21T15:02:27.068Z] Deploying OneCard main contract...
[2025-03-21T15:02:29.488Z] OneCard contract deployed at: 0xD6A9A1278825bd568e06A138e48D9c342e9539F8
[2025-03-21T15:02:29.489Z] Deploying PokerSpectatorView contract...
[2025-03-21T15:02:35.363Z] PokerSpectatorView contract deployed at: 0xc49e2Bfb350B70088752bD5d4561CD071d41978c
[2025-03-21T15:02:35.364Z] 
Add these to your .env file for future use:
[2025-03-21T15:02:35.364Z] POKER_CONTRACT_ADDRESS=0xD6A9A1278825bd568e06A138e48D9c342e9539F8
[2025-03-21T15:02:35.364Z] SPECTATOR_CONTRACT_ADDRESS=0xc49e2Bfb350B70088752bD5d4561CD071d41978c
[2025-03-21T15:02:35.369Z] 
===== STARTING ONE CARD POKER WITH MONTY HALL GAME TEST =====
[2025-03-21T15:02:35.369Z] 
----- ADDING PLAYERS TO WHITELIST -----
[2025-03-21T15:02:41.448Z] Added 4 players to whitelist
[2025-03-21T15:02:41.448Z] 
----- CREATING A NEW GAME -----
[2025-03-21T15:02:47.530Z] Created Game with ID: 1
[2025-03-21T15:02:47.844Z] Initial players in game: 5
[2025-03-21T15:02:47.844Z] Player 1: 0x1dA9aCB41763f97F744Da547F2d103042e8Ab239
[2025-03-21T15:02:47.844Z] Player 2: 0x9Fde625ED8A6eC0f3cA393A62be34231a5c167F4
[2025-03-21T15:02:47.844Z] Player 3: 0x0Fae37437c1347c23dc279b424663579d2df67df
[2025-03-21T15:02:47.844Z] Player 4: 0xd2e443F6CF19d5d359e82bbEea76e1133028fda5
[2025-03-21T15:02:47.844Z] Player 5: 0x7B7057B07218fa9f357E39cb2fC2E723C2bfcf9F
[2025-03-21T15:02:47.844Z] 
----- VERIFYING GAME INFO BEFORE STARTING PEEK PHASE -----
[2025-03-21T15:02:48.131Z] Game state: REGISTRATION
[2025-03-21T15:02:48.131Z] Player count: 5
[2025-03-21T15:02:48.131Z] Active count: 5
[2025-03-21T15:02:48.131Z] Game keeper: 0x1dA9aCB41763f97F744Da547F2d103042e8Ab239
[2025-03-21T15:02:48.131Z] State version: 1
[2025-03-21T15:02:48.131Z] Is cleaned up: false
[2025-03-21T15:02:48.132Z] 
----- STARTING PEEK PHASE -----
[2025-03-21T15:02:49.502Z] startPeekPhase transaction submitted, waiting for confirmation...
[2025-03-21T15:02:54.192Z] startPeekPhase transaction confirmed!
[2025-03-21T15:02:54.192Z] Buffer period started before peek phase. Current state: REGISTRATION, Next state: PEEK_PHASE
[2025-03-21T15:02:54.192Z] Peek phase started for game 1
[2025-03-21T15:02:54.193Z] Game state updated: State=PEEK_PHASE, Pot=0, CurrentBet=0, StateVersion=2
[2025-03-21T15:02:54.475Z] Phase end time: 2025-03-21T15:05:19.000Z
[2025-03-21T15:02:54.475Z] Buffer end time: 2025-03-21T15:03:19.000Z
[2025-03-21T15:02:54.475Z] Waiting 25 seconds for buffer period to end...
[2025-03-21T15:02:54.476Z] Waiting for buffer period to end on TEN network...
[2025-03-21T15:02:59.477Z] 20 seconds remaining in buffer period
[2025-03-21T15:03:09.480Z] 10 seconds remaining in buffer period
[2025-03-21T15:03:19.484Z] Buffer period ended
[2025-03-21T15:03:19.487Z] 
----- PLAYERS PEEKING AT CARDS -----
[2025-03-21T15:03:20.313Z] Player 1 initial chip balance: 25
[2025-03-21T15:03:23.942Z] Player 1 (0x9Fde625ED8A6eC0f3cA393A62be34231a5c167F4) peeked at their card
[2025-03-21T15:03:23.942Z] Player action: peek, Amount: 5, Nonce: 1
[2025-03-21T15:03:23.973Z] Card for 0x9Fde625ED8A6eC0f3cA393A62be34231a5c167F4: 10 of Hearts
[2025-03-21T15:03:24.228Z] Player 1 chip balance after peeking: 20
[2025-03-21T15:03:24.509Z] Player 2 initial chip balance: 25
[2025-03-21T15:03:27.941Z] Player 2 (0x0Fae37437c1347c23dc279b424663579d2df67df) peeked at their card
[2025-03-21T15:03:27.942Z] Player action: peek, Amount: 5, Nonce: 1
[2025-03-21T15:03:27.965Z] Card for 0x0Fae37437c1347c23dc279b424663579d2df67df: Queen of Clubs
[2025-03-21T15:03:28.223Z] Player 2 chip balance after peeking: 20
[2025-03-21T15:03:28.224Z] 
----- PLAYER USING MONTY HALL OPTION -----
[2025-03-21T15:03:28.502Z] Player 3 initial chip balance: 25
[2025-03-21T15:03:31.967Z] Player 3 (0xd2e443F6CF19d5d359e82bbEea76e1133028fda5) used Monty Hall option
[2025-03-21T15:03:31.968Z] Player action: montyHall, Amount: 7, Nonce: 1
[2025-03-21T15:03:32.002Z] Monty Hall cards revealed to 0xd2e443F6CF19d5d359e82bbEea76e1133028fda5:
[2025-03-21T15:03:32.002Z] - 9 of Spades
[2025-03-21T15:03:32.002Z] - Queen of Hearts
[2025-03-21T15:03:32.247Z] Player 3 chip balance after using Monty Hall: 18
[2025-03-21T15:03:35.925Z] Player 3 decided to swap their card
[2025-03-21T15:03:35.926Z] Player action: swapCard, Amount: 0, Nonce: 2
[2025-03-21T15:03:35.926Z] Player 4 (0x7B7057B07218fa9f357E39cb2fC2E723C2bfcf9F) chose not to peek or use Monty Hall
[2025-03-21T15:03:35.979Z] 0xd2e443F6CF19d5d359e82bbEea76e1133028fda5 swapped 8 of Hearts for 8 of Spades
[2025-03-21T15:03:36.209Z] 
----- PLAYER STATUS AFTER PEEK PHASE -----
[2025-03-21T15:03:36.487Z] Player 1 (0x9Fde625ED8A6eC0f3cA393A62be34231a5c167F4):
[2025-03-21T15:03:36.487Z]   Chip balance: 20
[2025-03-21T15:03:36.487Z]   Has peeked: true
[2025-03-21T15:03:36.487Z]   Used Monty Hall: false
[2025-03-21T15:03:36.487Z]   Action nonce: 1
[2025-03-21T15:03:36.763Z] Player 2 (0x0Fae37437c1347c23dc279b424663579d2df67df):
[2025-03-21T15:03:36.763Z]   Chip balance: 20
[2025-03-21T15:03:36.763Z]   Has peeked: true
[2025-03-21T15:03:36.763Z]   Used Monty Hall: false
[2025-03-21T15:03:36.763Z]   Action nonce: 1
[2025-03-21T15:03:37.038Z] Player 3 (0xd2e443F6CF19d5d359e82bbEea76e1133028fda5):
[2025-03-21T15:03:37.038Z]   Chip balance: 18
[2025-03-21T15:03:37.038Z]   Has peeked: false
[2025-03-21T15:03:37.038Z]   Used Monty Hall: true
[2025-03-21T15:03:37.038Z]   Action nonce: 2
[2025-03-21T15:03:37.318Z] Player 4 (0x7B7057B07218fa9f357E39cb2fC2E723C2bfcf9F):
[2025-03-21T15:03:37.319Z]   Chip balance: 25
[2025-03-21T15:03:37.319Z]   Has peeked: false
[2025-03-21T15:03:37.319Z]   Used Monty Hall: false
[2025-03-21T15:03:37.319Z]   Action nonce: 0
[2025-03-21T15:03:37.319Z] 
----- WAITING FOR PEEK PHASE TO END -----
[2025-03-21T15:03:37.593Z] Waiting 102 seconds for peek phase to end...
[2025-03-21T15:03:37.594Z] Waiting for peek phase to end on TEN network...
[2025-03-21T15:05:27.608Z] Peek phase ended
[2025-03-21T15:05:27.608Z] 
----- ENDING PEEK PHASE -----
[2025-03-21T15:05:28.714Z] endPeekPhase transaction submitted, waiting for confirmation...
[2025-03-21T15:05:31.943Z] endPeekPhase transaction confirmed!
[2025-03-21T15:05:31.943Z] Buffer period started before betting phase. Current state: PEEK_PHASE, Next state: BETTING
[2025-03-21T15:05:31.943Z] Betting phase started for game 1
[2025-03-21T15:05:31.943Z] Game state updated: State=BETTING, Pot=0, CurrentBet=0, StateVersion=3
[2025-03-21T15:05:32.355Z] Phase end time: 2025-03-21T15:10:58.000Z
[2025-03-21T15:05:32.355Z] Buffer end time: 2025-03-21T15:05:58.000Z
[2025-03-21T15:05:32.355Z] Waiting 26 seconds for buffer period to end...
[2025-03-21T15:05:32.355Z] Waiting for buffer period to end on TEN network...
[2025-03-21T15:06:02.364Z] Buffer period ended
[2025-03-21T15:06:02.365Z] 
----- PLAYERS PLACING BETS -----
[2025-03-21T15:06:07.948Z] Player 1 (0x9Fde625ED8A6eC0f3cA393A62be34231a5c167F4) bet 5 chips
[2025-03-21T15:06:08.239Z] Pot after bet 1: 5, Current bet: 5
[2025-03-21T15:06:11.942Z] Player 2 (0x0Fae37437c1347c23dc279b424663579d2df67df) bet 5 chips
[2025-03-21T15:06:12.219Z] Pot after bet 2: 10, Current bet: 5
[2025-03-21T15:06:15.952Z] Player 3 (0xd2e443F6CF19d5d359e82bbEea76e1133028fda5) bet 10 chips (raising to 10)
[2025-03-21T15:06:16.231Z] Pot after bet 3: 20, Current bet: 10
[2025-03-21T15:06:19.955Z] Player 1 (0x9Fde625ED8A6eC0f3cA393A62be34231a5c167F4) bet additional 5 chips (calling the raise)
[2025-03-21T15:06:20.233Z] Pot after bet 4: 25, Current bet: 10
[2025-03-21T15:06:23.959Z] Player 2 (0x0Fae37437c1347c23dc279b424663579d2df67df) bet additional 5 chips (calling the raise)
[2025-03-21T15:06:24.242Z] Pot after bet 5: 30, Current bet: 10
[2025-03-21T15:06:27.959Z] Player 4 (0x7B7057B07218fa9f357E39cb2fC2E723C2bfcf9F) folded
[2025-03-21T15:06:28.239Z] Active players after fold: 4
[2025-03-21T15:06:28.239Z] 
----- PLAYER STATUS AFTER BETTING -----
[2025-03-21T15:06:28.521Z] Player 1 (0x9Fde625ED8A6eC0f3cA393A62be34231a5c167F4):
[2025-03-21T15:06:28.521Z]   Chip balance: 10
[2025-03-21T15:06:28.521Z]   Current bet: 10
[2025-03-21T15:06:28.522Z]   Has folded: false
[2025-03-21T15:06:28.522Z]   Action nonce: 3
[2025-03-21T15:06:28.800Z] Player 2 (0x0Fae37437c1347c23dc279b424663579d2df67df):
[2025-03-21T15:06:28.801Z]   Chip balance: 10
[2025-03-21T15:06:28.801Z]   Current bet: 10
[2025-03-21T15:06:28.801Z]   Has folded: false
[2025-03-21T15:06:28.801Z]   Action nonce: 3
[2025-03-21T15:06:29.081Z] Player 3 (0xd2e443F6CF19d5d359e82bbEea76e1133028fda5):
[2025-03-21T15:06:29.081Z]   Chip balance: 8
[2025-03-21T15:06:29.081Z]   Current bet: 10
[2025-03-21T15:06:29.081Z]   Has folded: false
[2025-03-21T15:06:29.081Z]   Action nonce: 3
[2025-03-21T15:06:29.359Z] Player 4 (0x7B7057B07218fa9f357E39cb2fC2E723C2bfcf9F):
[2025-03-21T15:06:29.359Z]   Chip balance: 25
[2025-03-21T15:06:29.359Z]   Current bet: 0
[2025-03-21T15:06:29.359Z]   Has folded: true
[2025-03-21T15:06:29.359Z]   Action nonce: 1
[2025-03-21T15:06:29.637Z] Have all active players matched the current bet? false
[2025-03-21T15:06:29.638Z] 
----- WAITING FOR BETTING PHASE TO END -----
[2025-03-21T15:06:29.916Z] Betting phase ends in 269 seconds at 2025-03-21T15:10:58.000Z
[2025-03-21T15:06:29.917Z] All players have matched bets, manually ending betting phase...
[2025-03-21T15:06:29.917Z] 
----- ENDING BETTING PHASE -----
[2025-03-21T15:06:31.017Z] endBettingPhase transaction submitted, waiting for confirmation...
[2025-03-21T15:06:31.296Z] Error ending betting phase: transaction failed [ See: https://links.ethers.org/v5-errors-CALL_EXCEPTION ] (transactionHash="0xbdbe6b9a023c4e72edaca07825799294fa375acecc6f7ccaf8fc854094aae985", transaction={"type":2,"chainId":443,"nonce":133,"maxPriorityFeePerGas":{"type":"BigNumber","hex":"0x59682f00"},"maxFeePerGas":{"type":"BigNumber","hex":"0x6553f100"},"gasPrice":null,"gasLimit":{"type":"BigNumber","hex":"0x01c9c380"},"to":"0xD6A9A1278825bd568e06A138e48D9c342e9539F8","value":{"type":"BigNumber","hex":"0x00"},"data":"0x30be62b20000000000000000000000000000000000000000000000000000000000000001","accessList":[],"hash":"0xbdbe6b9a023c4e72edaca07825799294fa375acecc6f7ccaf8fc854094aae985","v":1,"r":"0x3e293a968adcef4a5f13d7f9e04ab3ce8fc37094ba1349655b098e790f4c59ae","s":"0x79bd15bb9005640526fe66a46fcbbfb0830c8ef7204c7f64f284bd5149cf2365","from":"0x1dA9aCB41763f97F744Da547F2d103042e8Ab239","confirmations":0}, receipt={"to":"0xD6A9A1278825bd568e06A138e48D9c342e9539F8","from":"0x1dA9aCB41763f97F744Da547F2d103042e8Ab239","contractAddress":null,"transactionIndex":0,"gasUsed":{"type":"BigNumber","hex":"0x99ee"},"logsBloom":"0x00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000","blockHash":"0x11241aeecd5100c05505dbe2d1bc42659118c44ae843779f408cfcd2a4322460","transactionHash":"0xbdbe6b9a023c4e72edaca07825799294fa375acecc6f7ccaf8fc854094aae985","logs":[],"blockNumber":2470920,"confirmations":1,"cumulativeGasUsed":{"type":"BigNumber","hex":"0x7f68"},"effectiveGasPrice":{"type":"BigNumber","hex":"0x5f5e1000"},"status":0,"type":2,"byzantium":true}, code=CALL_EXCEPTION, version=providers/5.7.2)
[2025-03-21T15:06:31.297Z] Error during game flow: transaction failed [ See: https://links.ethers.org/v5-errors-CALL_EXCEPTION ] (transactionHash="0xbdbe6b9a023c4e72edaca07825799294fa375acecc6f7ccaf8fc854094aae985", transaction={"type":2,"chainId":443,"nonce":133,"maxPriorityFeePerGas":{"type":"BigNumber","hex":"0x59682f00"},"maxFeePerGas":{"type":"BigNumber","hex":"0x6553f100"},"gasPrice":null,"gasLimit":{"type":"BigNumber","hex":"0x01c9c380"},"to":"0xD6A9A1278825bd568e06A138e48D9c342e9539F8","value":{"type":"BigNumber","hex":"0x00"},"data":"0x30be62b20000000000000000000000000000000000000000000000000000000000000001","accessList":[],"hash":"0xbdbe6b9a023c4e72edaca07825799294fa375acecc6f7ccaf8fc854094aae985","v":1,"r":"0x3e293a968adcef4a5f13d7f9e04ab3ce8fc37094ba1349655b098e790f4c59ae","s":"0x79bd15bb9005640526fe66a46fcbbfb0830c8ef7204c7f64f284bd5149cf2365","from":"0x1dA9aCB41763f97F744Da547F2d103042e8Ab239","confirmations":0}, receipt={"to":"0xD6A9A1278825bd568e06A138e48D9c342e9539F8","from":"0x1dA9aCB41763f97F744Da547F2d103042e8Ab239","contractAddress":null,"transactionIndex":0,"gasUsed":{"type":"BigNumber","hex":"0x99ee"},"logsBloom":"0x00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000","blockHash":"0x11241aeecd5100c05505dbe2d1bc42659118c44ae843779f408cfcd2a4322460","transactionHash":"0xbdbe6b9a023c4e72edaca07825799294fa375acecc6f7ccaf8fc854094aae985","logs":[],"blockNumber":2470920,"confirmations":1,"cumulativeGasUsed":{"type":"BigNumber","hex":"0x7f68"},"effectiveGasPrice":{"type":"BigNumber","hex":"0x5f5e1000"},"status":0,"type":2,"byzantium":true}, code=CALL_EXCEPTION, version=providers/5.7.2)
[2025-03-21T15:09:30.908Z] 
===== SETTING UP TEST ENVIRONMENT =====
[2025-03-21T15:09:30.937Z] Wallet setup complete.
[2025-03-21T15:09:30.937Z] Owner address: 0x1dA9aCB41763f97F744Da547F2d103042e8Ab239
[2025-03-21T15:09:30.937Z] Player 1 address: 0x9Fde625ED8A6eC0f3cA393A62be34231a5c167F4
[2025-03-21T15:09:30.937Z] Player 2 address: 0x0Fae37437c1347c23dc279b424663579d2df67df
[2025-03-21T15:09:30.937Z] Player 3 address: 0xd2e443F6CF19d5d359e82bbEea76e1133028fda5
[2025-03-21T15:09:30.938Z] Player 4 address: 0x7B7057B07218fa9f357E39cb2fC2E723C2bfcf9F
[2025-03-21T15:09:30.938Z] Keeper address: 0x1dA9aCB41763f97F744Da547F2d103042e8Ab239
[2025-03-21T15:09:30.938Z] 
----- CHECKING WALLET BALANCES -----
[2025-03-21T15:09:31.963Z] Address 0x1dA9aCB41763f97F744Da547F2d103042e8Ab239 has 0.63205674744 ETH
[2025-03-21T15:09:32.600Z] Address 0x9Fde625ED8A6eC0f3cA393A62be34231a5c167F4 has 0.9891792048 ETH
[2025-03-21T15:09:32.876Z] Address 0x0Fae37437c1347c23dc279b424663579d2df67df has 0.7415857171 ETH
[2025-03-21T15:09:33.165Z] Address 0xd2e443F6CF19d5d359e82bbEea76e1133028fda5 has 0.4918607993 ETH
[2025-03-21T15:09:33.450Z] Address 0x7B7057B07218fa9f357E39cb2fC2E723C2bfcf9F has 0.7404183889 ETH
[2025-03-21T15:09:33.733Z] Address 0x1dA9aCB41763f97F744Da547F2d103042e8Ab239 has 0.63205674744 ETH
[2025-03-21T15:09:33.733Z] 
----- DEPLOYING CONTRACTS -----
[2025-03-21T15:09:33.733Z] Deploying CardLibrary...
[2025-03-21T15:09:40.003Z] CardLibrary deployed at: 0x49fd097205b9f47a48EB2654D4525D6cfFf8309e
[2025-03-21T15:09:40.003Z] Deploying GameLibrary...
[2025-03-21T15:09:42.458Z] GameLibrary deployed at: 0x2Fef1F6A1042A8965F7973CC822539CD947be787
[2025-03-21T15:09:42.458Z] Deploying OneCard main contract...
[2025-03-21T15:09:48.919Z] OneCard contract deployed at: 0xd95CA9fD9A757858f811E740dCbE0ebe859374Fc
[2025-03-21T15:09:48.919Z] Deploying PokerSpectatorView contract...
[2025-03-21T15:09:55.032Z] PokerSpectatorView contract deployed at: 0x36de328EEE2328a2712d6425fC950b470b13E701
[2025-03-21T15:09:55.032Z] 
Add these to your .env file for future use:
[2025-03-21T15:09:55.032Z] POKER_CONTRACT_ADDRESS=0xd95CA9fD9A757858f811E740dCbE0ebe859374Fc
[2025-03-21T15:09:55.032Z] SPECTATOR_CONTRACT_ADDRESS=0x36de328EEE2328a2712d6425fC950b470b13E701
[2025-03-21T15:09:55.035Z] 
===== STARTING ONE CARD POKER WITH MONTY HALL GAME TEST =====
[2025-03-21T15:09:55.035Z] 
----- ADDING PLAYERS TO WHITELIST -----
[2025-03-21T15:10:01.092Z] Added 4 players to whitelist
[2025-03-21T15:10:01.092Z] 
----- CREATING A NEW GAME -----
[2025-03-21T15:10:07.195Z] Created Game with ID: 1
[2025-03-21T15:10:07.477Z] Initial players in game: 5
[2025-03-21T15:10:07.478Z] Player 1: 0x1dA9aCB41763f97F744Da547F2d103042e8Ab239
[2025-03-21T15:10:07.478Z] Player 2: 0x9Fde625ED8A6eC0f3cA393A62be34231a5c167F4
[2025-03-21T15:10:07.478Z] Player 3: 0x0Fae37437c1347c23dc279b424663579d2df67df
[2025-03-21T15:10:07.478Z] Player 4: 0xd2e443F6CF19d5d359e82bbEea76e1133028fda5
[2025-03-21T15:10:07.478Z] Player 5: 0x7B7057B07218fa9f357E39cb2fC2E723C2bfcf9F
[2025-03-21T15:10:07.478Z] 
----- VERIFYING GAME INFO BEFORE STARTING PEEK PHASE -----
[2025-03-21T15:10:07.764Z] Game state: REGISTRATION
[2025-03-21T15:10:07.765Z] Player count: 5
[2025-03-21T15:10:07.765Z] Active count: 5
[2025-03-21T15:10:07.765Z] Game keeper: 0x1dA9aCB41763f97F744Da547F2d103042e8Ab239
[2025-03-21T15:10:07.765Z] State version: 1
[2025-03-21T15:10:07.765Z] Is cleaned up: false
[2025-03-21T15:10:07.765Z] 
----- STARTING PEEK PHASE -----
[2025-03-21T15:10:09.504Z] startPeekPhase transaction submitted, waiting for confirmation...
[2025-03-21T15:10:14.539Z] startPeekPhase transaction confirmed!
[2025-03-21T15:10:14.539Z] Buffer period started before peek phase. Current state: REGISTRATION, Next state: PEEK_PHASE
[2025-03-21T15:10:14.539Z] Peek phase started for game 1
[2025-03-21T15:10:14.539Z] Game state updated: State=PEEK_PHASE, Pot=0, CurrentBet=0, StateVersion=2
[2025-03-21T15:10:14.820Z] Phase end time: 2025-03-21T15:12:40.000Z
[2025-03-21T15:10:14.820Z] Buffer end time: 2025-03-21T15:10:40.000Z
[2025-03-21T15:10:14.820Z] Waiting 26 seconds for buffer period to end...
[2025-03-21T15:10:14.820Z] Waiting for buffer period to end on TEN network...
[2025-03-21T15:10:44.829Z] Buffer period ended
[2025-03-21T15:10:44.831Z] 
----- PLAYERS PEEKING AT CARDS -----
[2025-03-21T15:10:45.641Z] Player 1 initial chip balance: 25
[2025-03-21T15:10:49.296Z] Player 1 (0x9Fde625ED8A6eC0f3cA393A62be34231a5c167F4) peeked at their card
[2025-03-21T15:10:49.296Z] Player action: peek, Amount: 5, Nonce: 1
[2025-03-21T15:10:49.302Z] Card for 0x9Fde625ED8A6eC0f3cA393A62be34231a5c167F4: 4 of Hearts
[2025-03-21T15:10:49.578Z] Player 1 chip balance after peeking: 20
[2025-03-21T15:10:49.862Z] Player 2 initial chip balance: 25
[2025-03-21T15:10:51.262Z] Player 2 (0x0Fae37437c1347c23dc279b424663579d2df67df) peeked at their card
[2025-03-21T15:10:51.262Z] Player action: peek, Amount: 5, Nonce: 1
[2025-03-21T15:10:51.547Z] Player 2 chip balance after peeking: 20
[2025-03-21T15:10:51.548Z] 
----- PLAYER USING MONTY HALL OPTION -----
[2025-03-21T15:10:51.830Z] Player 3 initial chip balance: 25
[2025-03-21T15:10:53.233Z] Player 3 (0xd2e443F6CF19d5d359e82bbEea76e1133028fda5) used Monty Hall option
[2025-03-21T15:10:53.233Z] Player action: montyHall, Amount: 7, Nonce: 1
[2025-03-21T15:10:53.299Z] Card for 0x0Fae37437c1347c23dc279b424663579d2df67df: 3 of Spades
[2025-03-21T15:10:53.511Z] Player 3 chip balance after using Monty Hall: 18
[2025-03-21T15:10:57.293Z] Player 3 decided to swap their card
[2025-03-21T15:10:57.294Z] Player action: swapCard, Amount: 0, Nonce: 2
[2025-03-21T15:10:57.294Z] Player 4 (0x7B7057B07218fa9f357E39cb2fC2E723C2bfcf9F) chose not to peek or use Monty Hall
[2025-03-21T15:10:57.314Z] 0xd2e443F6CF19d5d359e82bbEea76e1133028fda5 swapped 2 of Spades for King of Hearts
[2025-03-21T15:10:57.316Z] Monty Hall cards revealed to 0xd2e443F6CF19d5d359e82bbEea76e1133028fda5:
[2025-03-21T15:10:57.316Z] - Ace of Hearts
[2025-03-21T15:10:57.316Z] - King of Diamonds
[2025-03-21T15:10:57.574Z] 
----- PLAYER STATUS AFTER PEEK PHASE -----
[2025-03-21T15:10:57.853Z] Player 1 (0x9Fde625ED8A6eC0f3cA393A62be34231a5c167F4):
[2025-03-21T15:10:57.853Z]   Chip balance: 20
[2025-03-21T15:10:57.853Z]   Has peeked: true
[2025-03-21T15:10:57.853Z]   Used Monty Hall: false
[2025-03-21T15:10:57.853Z]   Action nonce: 1
[2025-03-21T15:10:58.134Z] Player 2 (0x0Fae37437c1347c23dc279b424663579d2df67df):
[2025-03-21T15:10:58.134Z]   Chip balance: 20
[2025-03-21T15:10:58.134Z]   Has peeked: true
[2025-03-21T15:10:58.134Z]   Used Monty Hall: false
[2025-03-21T15:10:58.135Z]   Action nonce: 1
[2025-03-21T15:10:58.412Z] Player 3 (0xd2e443F6CF19d5d359e82bbEea76e1133028fda5):
[2025-03-21T15:10:58.413Z]   Chip balance: 18
[2025-03-21T15:10:58.413Z]   Has peeked: false
[2025-03-21T15:10:58.413Z]   Used Monty Hall: true
[2025-03-21T15:10:58.413Z]   Action nonce: 2
[2025-03-21T15:10:58.695Z] Player 4 (0x7B7057B07218fa9f357E39cb2fC2E723C2bfcf9F):
[2025-03-21T15:10:58.695Z]   Chip balance: 25
[2025-03-21T15:10:58.695Z]   Has peeked: false
[2025-03-21T15:10:58.695Z]   Used Monty Hall: false
[2025-03-21T15:10:58.695Z]   Action nonce: 0
[2025-03-21T15:10:58.695Z] 
----- WAITING FOR PEEK PHASE TO END -----
[2025-03-21T15:10:58.976Z] Waiting 102 seconds for peek phase to end...
[2025-03-21T15:10:58.976Z] Waiting for peek phase to end on TEN network...
[2025-03-21T15:12:48.988Z] Peek phase ended
[2025-03-21T15:12:48.988Z] 
----- ENDING PEEK PHASE -----
[2025-03-21T15:12:50.095Z] endPeekPhase transaction submitted, waiting for confirmation...
[2025-03-21T15:12:53.275Z] endPeekPhase transaction confirmed!
[2025-03-21T15:12:53.276Z] Buffer period started before betting phase. Current state: PEEK_PHASE, Next state: BETTING
[2025-03-21T15:12:53.276Z] Betting phase started for game 1
[2025-03-21T15:12:53.276Z] Game state updated: State=BETTING, Pot=0, CurrentBet=0, StateVersion=3
[2025-03-21T15:12:53.559Z] Phase end time: 2025-03-21T15:18:21.000Z
[2025-03-21T15:12:53.559Z] Buffer end time: 2025-03-21T15:13:21.000Z
[2025-03-21T15:12:53.559Z] Waiting 28 seconds for buffer period to end...
[2025-03-21T15:12:53.560Z] Waiting for buffer period to end on TEN network...
[2025-03-21T15:13:23.566Z] Buffer period ended
[2025-03-21T15:13:23.567Z] 
----- PLAYERS PLACING BETS -----
[2025-03-21T15:13:25.287Z] Player 1 (0x9Fde625ED8A6eC0f3cA393A62be34231a5c167F4) bet 5 chips
[2025-03-21T15:13:25.288Z] Player action: bet, Amount: 5, Nonce: 2
[2025-03-21T15:13:25.569Z] Pot after bet 1: 5, Current bet: 5
[2025-03-21T15:13:29.289Z] Player 2 (0x0Fae37437c1347c23dc279b424663579d2df67df) bet 5 chips
[2025-03-21T15:13:29.574Z] Pot after bet 2: 10, Current bet: 5
[2025-03-21T15:13:33.290Z] Player 3 (0xd2e443F6CF19d5d359e82bbEea76e1133028fda5) bet 10 chips (raising to 10)
[2025-03-21T15:13:33.573Z] Pot after bet 3: 20, Current bet: 10
[2025-03-21T15:13:37.294Z] Player 1 (0x9Fde625ED8A6eC0f3cA393A62be34231a5c167F4) bet additional 5 chips (calling the raise)
[2025-03-21T15:13:37.575Z] Pot after bet 4: 25, Current bet: 10
[2025-03-21T15:13:39.296Z] Player 2 (0x0Fae37437c1347c23dc279b424663579d2df67df) bet additional 5 chips (calling the raise)
[2025-03-21T15:13:39.574Z] Pot after bet 5: 30, Current bet: 10
[2025-03-21T15:13:45.287Z] Player 4 (0x7B7057B07218fa9f357E39cb2fC2E723C2bfcf9F) folded
[2025-03-21T15:13:45.569Z] Active players after fold: 4
[2025-03-21T15:13:45.569Z] 
----- PLAYER STATUS AFTER BETTING -----
[2025-03-21T15:13:45.854Z] Player 1 (0x9Fde625ED8A6eC0f3cA393A62be34231a5c167F4):
[2025-03-21T15:13:45.854Z]   Chip balance: 10
[2025-03-21T15:13:45.854Z]   Current bet: 10
[2025-03-21T15:13:45.854Z]   Has folded: false
[2025-03-21T15:13:45.854Z]   Action nonce: 3
[2025-03-21T15:13:46.138Z] Player 2 (0x0Fae37437c1347c23dc279b424663579d2df67df):
[2025-03-21T15:13:46.138Z]   Chip balance: 10
[2025-03-21T15:13:46.138Z]   Current bet: 10
[2025-03-21T15:13:46.138Z]   Has folded: false
[2025-03-21T15:13:46.138Z]   Action nonce: 3
[2025-03-21T15:13:46.419Z] Player 3 (0xd2e443F6CF19d5d359e82bbEea76e1133028fda5):
[2025-03-21T15:13:46.419Z]   Chip balance: 8
[2025-03-21T15:13:46.420Z]   Current bet: 10
[2025-03-21T15:13:46.420Z]   Has folded: false
[2025-03-21T15:13:46.420Z]   Action nonce: 3
[2025-03-21T15:13:46.701Z] Player 4 (0x7B7057B07218fa9f357E39cb2fC2E723C2bfcf9F):
[2025-03-21T15:13:46.701Z]   Chip balance: 25
[2025-03-21T15:13:46.702Z]   Current bet: 0
[2025-03-21T15:13:46.702Z]   Has folded: true
[2025-03-21T15:13:46.702Z]   Action nonce: 1
[2025-03-21T15:13:46.986Z] Have all active players matched the current bet? false
[2025-03-21T15:13:46.988Z] 
----- WAITING FOR BETTING PHASE TO END -----
[2025-03-21T15:13:47.272Z] Betting phase ends in 274 seconds at 2025-03-21T15:18:21.000Z
[2025-03-21T15:13:47.272Z] All players have matched bets, manually ending betting phase...
[2025-03-21T15:13:47.272Z] 
----- CHECKING GAME STATE BEFORE ENDING BETTING PHASE -----
[2025-03-21T15:13:47.540Z] Current game state: BETTING
[2025-03-21T15:13:47.541Z] Phase end time: 2025-03-21T15:18:21.000Z
[2025-03-21T15:13:47.541Z] Current time: 2025-03-21T15:13:47.541Z
[2025-03-21T15:13:47.541Z] Buffer end time: 2025-03-21T15:13:21.000Z
[2025-03-21T15:13:47.541Z] Is in buffer period: false
[2025-03-21T15:13:47.541Z] Is phase ended: false
[2025-03-21T15:13:47.819Z] Is caller (0x1dA9aCB41763f97F744Da547F2d103042e8Ab239) a keeper: true
[2025-03-21T15:13:47.820Z] Betting phase hasn't ended yet. Waiting 274 seconds...
[2025-03-21T15:13:47.820Z] Waiting for phase to end on TEN network...
[2025-03-21T15:18:22.933Z] Betting phase has now ended
[2025-03-21T15:18:23.218Z] Game state after waiting: BETTING
[2025-03-21T15:18:23.219Z] Updated phase end time: 2025-03-21T15:18:21.000Z
[2025-03-21T15:18:23.219Z] Updated buffer end time: 2025-03-21T15:13:21.000Z
[2025-03-21T15:18:23.219Z] 
----- ENDING BETTING PHASE -----
[2025-03-21T15:18:24.327Z] endBettingPhase transaction submitted, waiting for confirmation...
[2025-03-21T15:18:25.432Z] endBettingPhase transaction confirmed!
[2025-03-21T15:18:25.433Z] Showdown phase started
[2025-03-21T15:18:25.433Z] 
===== GAME RESULTS =====
[2025-03-21T15:18:25.433Z] Winner: 0xd2e443F6CF19d5d359e82bbEea76e1133028fda5
[2025-03-21T15:18:25.433Z] Pot Amount: 30 chips
[2025-03-21T15:18:25.434Z] Player 3 (0xd2e443F6CF19d5d359e82bbEea76e1133028fda5) won the game!
[2025-03-21T15:18:25.434Z] Final game state: State=SHOWDOWN, Pot=30, CurrentBet=10, StateVersion=4
[2025-03-21T15:18:25.434Z] 
----- REVEALED CARDS DURING SHOWDOWN -----
[2025-03-21T15:18:25.435Z] Error getting revealed cards: spectatorContract.getRevealedCardsForSpectating is not a function
[2025-03-21T15:18:25.435Z] 
----- FINAL GAME STATE -----
[2025-03-21T15:18:25.714Z] Game state: ENDED
[2025-03-21T15:18:25.714Z] Pot amount: 0
[2025-03-21T15:18:25.714Z] State version: 5
[2025-03-21T15:18:25.714Z] Is cleaned up: false
[2025-03-21T15:18:25.714Z] 
----- FINAL PLAYER BALANCES -----
[2025-03-21T15:18:25.991Z] Player 1 (0x9Fde625ED8A6eC0f3cA393A62be34231a5c167F4):
[2025-03-21T15:18:25.992Z]   Initial balance: 25
[2025-03-21T15:18:25.992Z]   Final balance: 10
[2025-03-21T15:18:25.993Z]   Difference: -15
[2025-03-21T15:18:26.279Z] Player 2 (0x0Fae37437c1347c23dc279b424663579d2df67df):
[2025-03-21T15:18:26.279Z]   Initial balance: 25
[2025-03-21T15:18:26.279Z]   Final balance: 10
[2025-03-21T15:18:26.279Z]   Difference: -15
[2025-03-21T15:18:26.559Z] Player 3 (0xd2e443F6CF19d5d359e82bbEea76e1133028fda5):
[2025-03-21T15:18:26.559Z]   Initial balance: 25
[2025-03-21T15:18:26.559Z]   Final balance: 38
[2025-03-21T15:18:26.559Z]   Difference: 13
[2025-03-21T15:18:26.559Z] *** Player 3 gained 13 chips - WINNER! ***
[2025-03-21T15:18:26.838Z] Player 4 (0x7B7057B07218fa9f357E39cb2fC2E723C2bfcf9F):
[2025-03-21T15:18:26.839Z]   Initial balance: 25
[2025-03-21T15:18:26.839Z]   Final balance: 25
[2025-03-21T15:18:26.839Z]   Difference: 0
[2025-03-21T15:18:26.839Z] 
----- CLEANING UP THE GAME -----
[2025-03-21T15:18:28.229Z] Game cleaned up successfully
[2025-03-21T15:18:28.510Z] Game is cleaned up: true
[2025-03-21T15:18:28.510Z] Game is no longer spectatable
[2025-03-21T15:18:28.510Z] Final state update: State=ENDED, StateVersion=6
[2025-03-21T15:18:28.510Z] 
===== ONE CARD POKER WITH MONTY HALL FULL GAME TEST COMPLETED =====
[2025-03-21T15:21:31.834Z] 
===== SETTING UP TEST ENVIRONMENT =====
[2025-03-21T15:21:31.863Z] Wallet setup complete.
[2025-03-21T15:21:31.863Z] Owner address: 0x1dA9aCB41763f97F744Da547F2d103042e8Ab239
[2025-03-21T15:21:31.863Z] Player 1 address: 0x9Fde625ED8A6eC0f3cA393A62be34231a5c167F4
[2025-03-21T15:21:31.863Z] Player 2 address: 0x0Fae37437c1347c23dc279b424663579d2df67df
[2025-03-21T15:21:31.863Z] Player 3 address: 0xd2e443F6CF19d5d359e82bbEea76e1133028fda5
[2025-03-21T15:21:31.863Z] Player 4 address: 0x7B7057B07218fa9f357E39cb2fC2E723C2bfcf9F
[2025-03-21T15:21:31.863Z] Keeper address: 0x1dA9aCB41763f97F744Da547F2d103042e8Ab239
[2025-03-21T15:21:31.863Z] 
----- CHECKING WALLET BALANCES -----
[2025-03-21T15:21:32.888Z] Address 0x1dA9aCB41763f97F744Da547F2d103042e8Ab239 has 0.61753188464 ETH
[2025-03-21T15:21:33.164Z] Address 0x9Fde625ED8A6eC0f3cA393A62be34231a5c167F4 has 0.988735686 ETH
[2025-03-21T15:21:33.444Z] Address 0x0Fae37437c1347c23dc279b424663579d2df67df has 0.741201238 ETH
[2025-03-21T15:21:33.722Z] Address 0xd2e443F6CF19d5d359e82bbEea76e1133028fda5 has 0.4912520829 ETH
[2025-03-21T15:21:33.996Z] Address 0x7B7057B07218fa9f357E39cb2fC2E723C2bfcf9F has 0.7402860109 ETH
[2025-03-21T15:21:34.274Z] Address 0x1dA9aCB41763f97F744Da547F2d103042e8Ab239 has 0.61753188464 ETH
[2025-03-21T15:21:34.274Z] 
----- DEPLOYING CONTRACTS -----
[2025-03-21T15:21:34.274Z] Deploying CardLibrary...
[2025-03-21T15:21:36.443Z] CardLibrary deployed at: 0xaAfE4b47094425E78b420Ce3580517C72E5040d7
[2025-03-21T15:21:36.443Z] Deploying GameLibrary...
[2025-03-21T15:21:42.278Z] GameLibrary deployed at: 0x7fF94aC35235352E937e6310a123d975E83E600F
[2025-03-21T15:21:42.278Z] Deploying OneCard main contract...
[2025-03-21T15:21:44.336Z] OneCard contract deployed at: 0x0F94C785DFB164707CD24BEC38C91E128390FE45
[2025-03-21T15:21:44.337Z] Deploying PokerSpectatorView contract...
[2025-03-21T15:21:50.162Z] PokerSpectatorView contract deployed at: 0x8A0Bb7B9B5Da1A70FF39D69F93a8B6597F5ac1Ee
[2025-03-21T15:21:50.163Z] 
Add these to your .env file for future use:
[2025-03-21T15:21:50.163Z] POKER_CONTRACT_ADDRESS=0x0F94C785DFB164707CD24BEC38C91E128390FE45
[2025-03-21T15:21:50.163Z] SPECTATOR_CONTRACT_ADDRESS=0x8A0Bb7B9B5Da1A70FF39D69F93a8B6597F5ac1Ee
[2025-03-21T15:21:50.168Z] 
===== STARTING ONE CARD POKER WITH MONTY HALL GAME TEST =====
[2025-03-21T15:21:50.168Z] 
----- ADDING PLAYERS TO WHITELIST -----
[2025-03-21T15:21:56.236Z] Added 4 players to whitelist
[2025-03-21T15:21:56.236Z] 
----- CREATING A NEW GAME -----
[2025-03-21T15:22:02.296Z] Created Game with ID: 1
[2025-03-21T15:22:02.577Z] Initial players in game: 5
[2025-03-21T15:22:02.577Z] Player 1: 0x1dA9aCB41763f97F744Da547F2d103042e8Ab239
[2025-03-21T15:22:02.577Z] Player 2: 0x9Fde625ED8A6eC0f3cA393A62be34231a5c167F4
[2025-03-21T15:22:02.577Z] Player 3: 0x0Fae37437c1347c23dc279b424663579d2df67df
[2025-03-21T15:22:02.577Z] Player 4: 0xd2e443F6CF19d5d359e82bbEea76e1133028fda5
[2025-03-21T15:22:02.577Z] Player 5: 0x7B7057B07218fa9f357E39cb2fC2E723C2bfcf9F
[2025-03-21T15:22:02.577Z] 
----- VERIFYING GAME INFO BEFORE STARTING PEEK PHASE -----
[2025-03-21T15:22:02.860Z] Game state: REGISTRATION
[2025-03-21T15:22:02.860Z] Player count: 5
[2025-03-21T15:22:02.860Z] Active count: 5
[2025-03-21T15:22:02.860Z] Game keeper: 0x1dA9aCB41763f97F744Da547F2d103042e8Ab239
[2025-03-21T15:22:02.860Z] State version: 1
[2025-03-21T15:22:02.860Z] Is cleaned up: false
[2025-03-21T15:22:02.860Z] 
----- STARTING PEEK PHASE -----
[2025-03-21T15:22:04.241Z] startPeekPhase transaction submitted, waiting for confirmation...
[2025-03-21T15:22:08.945Z] startPeekPhase transaction confirmed!
[2025-03-21T15:22:08.946Z] Buffer period started before peek phase. Current state: REGISTRATION, Next state: PEEK_PHASE
[2025-03-21T15:22:08.946Z] Peek phase started for game 1
[2025-03-21T15:22:08.946Z] Game state updated: State=PEEK_PHASE, Pot=0, CurrentBet=0, StateVersion=2
[2025-03-21T15:22:09.239Z] Phase end time: 2025-03-21T15:24:34.000Z
[2025-03-21T15:22:09.239Z] Buffer end time: 2025-03-21T15:22:34.000Z
[2025-03-21T15:22:09.239Z] Waiting 25 seconds for buffer period to end...
[2025-03-21T15:22:09.239Z] Waiting for buffer period to end on TEN network...
[2025-03-21T15:22:14.240Z] 20 seconds remaining in buffer period
[2025-03-21T15:22:24.243Z] 10 seconds remaining in buffer period
[2025-03-21T15:22:34.247Z] Buffer period ended
[2025-03-21T15:22:34.250Z] 
----- PLAYERS PEEKING AT CARDS -----
[2025-03-21T15:22:35.067Z] Player 1 initial chip balance: 25
[2025-03-21T15:22:38.693Z] Player 1 (0x9Fde625ED8A6eC0f3cA393A62be34231a5c167F4) peeked at their card
[2025-03-21T15:22:38.694Z] Player action: peek, Amount: 5, Nonce: 1
[2025-03-21T15:22:38.752Z] Card for 0x9Fde625ED8A6eC0f3cA393A62be34231a5c167F4: 8 of Diamonds
[2025-03-21T15:22:38.971Z] Player 1 chip balance after peeking: 20
[2025-03-21T15:22:39.253Z] Player 2 initial chip balance: 25
[2025-03-21T15:22:42.689Z] Player 2 (0x0Fae37437c1347c23dc279b424663579d2df67df) peeked at their card
[2025-03-21T15:22:42.690Z] Player action: peek, Amount: 5, Nonce: 1
[2025-03-21T15:22:42.719Z] Card for 0x0Fae37437c1347c23dc279b424663579d2df67df: Queen of Spades
[2025-03-21T15:22:42.972Z] Player 2 chip balance after peeking: 20
[2025-03-21T15:22:42.972Z] 
----- PLAYER USING MONTY HALL OPTION -----
[2025-03-21T15:22:43.251Z] Player 3 initial chip balance: 25
[2025-03-21T15:22:46.713Z] Player 3 (0xd2e443F6CF19d5d359e82bbEea76e1133028fda5) used Monty Hall option
[2025-03-21T15:22:46.713Z] Player action: montyHall, Amount: 7, Nonce: 1
[2025-03-21T15:22:46.731Z] Monty Hall cards revealed to 0xd2e443F6CF19d5d359e82bbEea76e1133028fda5:
[2025-03-21T15:22:46.731Z] - 7 of Clubs
[2025-03-21T15:22:46.731Z] - 4 of Diamonds
[2025-03-21T15:22:46.993Z] Player 3 chip balance after using Monty Hall: 18
[2025-03-21T15:22:50.720Z] Player 3 decided to swap their card
[2025-03-21T15:22:50.720Z] Player action: swapCard, Amount: 0, Nonce: 2
[2025-03-21T15:22:50.720Z] Player 4 (0x7B7057B07218fa9f357E39cb2fC2E723C2bfcf9F) chose not to peek or use Monty Hall
[2025-03-21T15:22:50.739Z] 0xd2e443F6CF19d5d359e82bbEea76e1133028fda5 swapped 8 of Hearts for 4 of Spades
[2025-03-21T15:22:51.000Z] 
----- PLAYER STATUS AFTER PEEK PHASE -----
[2025-03-21T15:22:51.278Z] Player 1 (0x9Fde625ED8A6eC0f3cA393A62be34231a5c167F4):
[2025-03-21T15:22:51.278Z]   Chip balance: 20
[2025-03-21T15:22:51.278Z]   Has peeked: true
[2025-03-21T15:22:51.278Z]   Used Monty Hall: false
[2025-03-21T15:22:51.278Z]   Action nonce: 1
[2025-03-21T15:22:51.558Z] Player 2 (0x0Fae37437c1347c23dc279b424663579d2df67df):
[2025-03-21T15:22:51.558Z]   Chip balance: 20
[2025-03-21T15:22:51.559Z]   Has peeked: true
[2025-03-21T15:22:51.559Z]   Used Monty Hall: false
[2025-03-21T15:22:51.559Z]   Action nonce: 1
[2025-03-21T15:22:51.839Z] Player 3 (0xd2e443F6CF19d5d359e82bbEea76e1133028fda5):
[2025-03-21T15:22:51.840Z]   Chip balance: 18
[2025-03-21T15:22:51.840Z]   Has peeked: false
[2025-03-21T15:22:51.840Z]   Used Monty Hall: true
[2025-03-21T15:22:51.840Z]   Action nonce: 2
[2025-03-21T15:22:52.127Z] Player 4 (0x7B7057B07218fa9f357E39cb2fC2E723C2bfcf9F):
[2025-03-21T15:22:52.127Z]   Chip balance: 25
[2025-03-21T15:22:52.127Z]   Has peeked: false
[2025-03-21T15:22:52.127Z]   Used Monty Hall: false
[2025-03-21T15:22:52.127Z]   Action nonce: 0
[2025-03-21T15:22:52.128Z] 
----- WAITING FOR PEEK PHASE TO END -----
[2025-03-21T15:22:52.414Z] Waiting 102 seconds for peek phase to end...
[2025-03-21T15:22:52.414Z] Waiting for peek phase to end on TEN network...
[2025-03-21T15:24:42.429Z] Peek phase ended
[2025-03-21T15:24:42.429Z] 
----- ENDING PEEK PHASE -----
[2025-03-21T15:24:43.541Z] endPeekPhase transaction submitted, waiting for confirmation...
[2025-03-21T15:24:46.707Z] endPeekPhase transaction confirmed!
[2025-03-21T15:24:46.708Z] Buffer period started before betting phase. Current state: PEEK_PHASE, Next state: BETTING
[2025-03-21T15:24:46.708Z] Betting phase started for game 1
[2025-03-21T15:24:46.708Z] Game state updated: State=BETTING, Pot=0, CurrentBet=0, StateVersion=3
[2025-03-21T15:24:46.988Z] Phase end time: 2025-03-21T15:30:13.000Z
[2025-03-21T15:24:46.989Z] Buffer end time: 2025-03-21T15:25:13.000Z
[2025-03-21T15:24:46.989Z] Waiting 27 seconds for buffer period to end...
[2025-03-21T15:24:46.989Z] Waiting for buffer period to end on TEN network...
[2025-03-21T15:25:16.995Z] Buffer period ended
[2025-03-21T15:25:16.996Z] 
----- PLAYERS PLACING BETS -----
[2025-03-21T15:25:22.707Z] Player 1 (0x9Fde625ED8A6eC0f3cA393A62be34231a5c167F4) bet 5 chips
[2025-03-21T15:25:22.985Z] Pot after bet 1: 5, Current bet: 5
[2025-03-21T15:25:26.713Z] Player 2 (0x0Fae37437c1347c23dc279b424663579d2df67df) bet 5 chips
[2025-03-21T15:25:26.996Z] Pot after bet 2: 10, Current bet: 5
[2025-03-21T15:25:30.712Z] Player 3 (0xd2e443F6CF19d5d359e82bbEea76e1133028fda5) bet 10 chips (raising to 10)
[2025-03-21T15:25:30.713Z] Player action: bet, Amount: 10, Nonce: 3
[2025-03-21T15:25:31.003Z] Pot after bet 3: 20, Current bet: 10
[2025-03-21T15:25:34.714Z] Player 1 (0x9Fde625ED8A6eC0f3cA393A62be34231a5c167F4) bet additional 5 chips (calling the raise)
[2025-03-21T15:25:34.996Z] Pot after bet 4: 25, Current bet: 10
[2025-03-21T15:25:38.716Z] Player 2 (0x0Fae37437c1347c23dc279b424663579d2df67df) bet additional 5 chips (calling the raise)
[2025-03-21T15:25:38.994Z] Pot after bet 5: 30, Current bet: 10
[2025-03-21T15:25:42.720Z] Player 4 (0x7B7057B07218fa9f357E39cb2fC2E723C2bfcf9F) folded
[2025-03-21T15:25:42.720Z] Player action: fold, Amount: 0, Nonce: 1
[2025-03-21T15:25:43.001Z] Active players after fold: 4
[2025-03-21T15:25:43.001Z] 
----- PLAYER STATUS AFTER BETTING -----
[2025-03-21T15:25:43.291Z] Player 1 (0x9Fde625ED8A6eC0f3cA393A62be34231a5c167F4):
[2025-03-21T15:25:43.291Z]   Chip balance: 10
[2025-03-21T15:25:43.291Z]   Current bet: 10
[2025-03-21T15:25:43.291Z]   Has folded: false
[2025-03-21T15:25:43.291Z]   Action nonce: 3
[2025-03-21T15:25:43.569Z] Player 2 (0x0Fae37437c1347c23dc279b424663579d2df67df):
[2025-03-21T15:25:43.569Z]   Chip balance: 10
[2025-03-21T15:25:43.569Z]   Current bet: 10
[2025-03-21T15:25:43.569Z]   Has folded: false
[2025-03-21T15:25:43.569Z]   Action nonce: 3
[2025-03-21T15:25:43.846Z] Player 3 (0xd2e443F6CF19d5d359e82bbEea76e1133028fda5):
[2025-03-21T15:25:43.846Z]   Chip balance: 8
[2025-03-21T15:25:43.846Z]   Current bet: 10
[2025-03-21T15:25:43.846Z]   Has folded: false
[2025-03-21T15:25:43.846Z]   Action nonce: 3
[2025-03-21T15:25:44.131Z] Player 4 (0x7B7057B07218fa9f357E39cb2fC2E723C2bfcf9F):
[2025-03-21T15:25:44.131Z]   Chip balance: 25
[2025-03-21T15:25:44.131Z]   Current bet: 0
[2025-03-21T15:25:44.131Z]   Has folded: true
[2025-03-21T15:25:44.131Z]   Action nonce: 1
[2025-03-21T15:25:44.408Z] Have all active players matched the current bet? false
[2025-03-21T15:25:44.409Z] 
----- WAITING FOR BETTING PHASE TO END -----
[2025-03-21T15:25:44.690Z] Betting phase ends in 269 seconds at 2025-03-21T15:30:13.000Z
[2025-03-21T15:25:44.690Z] All players have matched bets, manually ending betting phase...
[2025-03-21T15:25:44.690Z] 
----- CHECKING GAME STATE BEFORE ENDING BETTING PHASE -----
[2025-03-21T15:25:44.957Z] Current game state: BETTING
[2025-03-21T15:25:44.957Z] Phase end time: 2025-03-21T15:30:13.000Z
[2025-03-21T15:25:44.957Z] Current time: 2025-03-21T15:25:44.957Z
[2025-03-21T15:25:44.957Z] Buffer end time: 2025-03-21T15:25:13.000Z
[2025-03-21T15:25:44.957Z] Is in buffer period: false
[2025-03-21T15:25:44.957Z] Is phase ended: false
[2025-03-21T15:25:45.235Z] Is caller (0x1dA9aCB41763f97F744Da547F2d103042e8Ab239) a keeper: true
[2025-03-21T15:25:45.235Z] Betting phase hasn't ended yet. Waiting 268 seconds...
[2025-03-21T15:25:45.235Z] Waiting for phase to end on TEN network...
[2025-03-21T15:30:15.311Z] Betting phase has now ended
[2025-03-21T15:30:15.594Z] Game state after waiting: BETTING
[2025-03-21T15:30:15.594Z] Updated phase end time: 2025-03-21T15:30:13.000Z
[2025-03-21T15:30:15.594Z] Updated buffer end time: 2025-03-21T15:25:13.000Z
[2025-03-21T15:30:15.594Z] 
----- ENDING BETTING PHASE -----
[2025-03-21T15:30:16.697Z] endBettingPhase transaction submitted, waiting for confirmation...
[2025-03-21T15:30:18.789Z] endBettingPhase transaction confirmed!
[2025-03-21T15:30:18.789Z] Showdown phase started
[2025-03-21T15:30:18.789Z] Game ended event not found in transaction logs - waiting for async event
[2025-03-21T15:30:18.838Z] Card for 0x1dA9aCB41763f97F744Da547F2d103042e8Ab239: 8 of Spades
[2025-03-21T15:30:18.839Z] Card for 0x9Fde625ED8A6eC0f3cA393A62be34231a5c167F4: 8 of Diamonds
[2025-03-21T15:30:18.839Z] Card for 0x0Fae37437c1347c23dc279b424663579d2df67df: Queen of Spades
[2025-03-21T15:30:18.839Z] Card for 0xd2e443F6CF19d5d359e82bbEea76e1133028fda5: 4 of Spades
[2025-03-21T15:30:19.092Z] 
===== GAME ENDED EVENT CAPTURED =====
[2025-03-21T15:30:19.092Z] Winner: 0x0Fae37437c1347c23dc279b424663579d2df67df
[2025-03-21T15:30:19.092Z] Pot Amount: 30 chips
[2025-03-21T15:30:19.092Z] Player 2 (0x0Fae37437c1347c23dc279b424663579d2df67df) won the game!
[2025-03-21T15:30:19.092Z] Async winner detection: 0x0Fae37437c1347c23dc279b424663579d2df67df
[2025-03-21T15:30:19.093Z] Final game state: State=SHOWDOWN, Pot=30, CurrentBet=10, StateVersion=4
[2025-03-21T15:30:19.093Z] 
----- REVEALED CARDS DURING SHOWDOWN -----
[2025-03-21T15:30:19.096Z] Error getting revealed cards: spectatorContract.getRevealedCards is not a function
[2025-03-21T15:30:19.096Z] 
----- FINAL GAME STATE -----
[2025-03-21T15:30:19.373Z] Game state: ENDED
[2025-03-21T15:30:19.373Z] Pot amount: 0
[2025-03-21T15:30:19.373Z] State version: 5
[2025-03-21T15:30:19.373Z] Is cleaned up: false
[2025-03-21T15:30:19.373Z] 
----- FINAL PLAYER BALANCES -----
[2025-03-21T15:30:19.647Z] Player 1 (0x9Fde625ED8A6eC0f3cA393A62be34231a5c167F4):
[2025-03-21T15:30:19.647Z]   Initial balance: 25
[2025-03-21T15:30:19.647Z]   Final balance: 10
[2025-03-21T15:30:19.648Z]   Difference: -15
[2025-03-21T15:30:19.922Z] Player 2 (0x0Fae37437c1347c23dc279b424663579d2df67df):
[2025-03-21T15:30:19.923Z]   Initial balance: 25
[2025-03-21T15:30:19.923Z]   Final balance: 40
[2025-03-21T15:30:19.923Z]   Difference: 15
[2025-03-21T15:30:19.923Z] *** Player 2 gained 15 chips - WINNER! ***
[2025-03-21T15:30:20.211Z] Player 3 (0xd2e443F6CF19d5d359e82bbEea76e1133028fda5):
[2025-03-21T15:30:20.211Z]   Initial balance: 25
[2025-03-21T15:30:20.211Z]   Final balance: 8
[2025-03-21T15:30:20.211Z]   Difference: -17
[2025-03-21T15:30:20.490Z] Player 4 (0x7B7057B07218fa9f357E39cb2fC2E723C2bfcf9F):
[2025-03-21T15:30:20.491Z]   Initial balance: 25
[2025-03-21T15:30:20.491Z]   Final balance: 25
[2025-03-21T15:30:20.491Z]   Difference: 0
[2025-03-21T15:30:20.491Z] 
----- CLEANING UP THE GAME -----
[2025-03-21T15:30:22.775Z] Game cleaned up successfully
[2025-03-21T15:30:23.051Z] Game is cleaned up: true
[2025-03-21T15:30:23.051Z] Game is no longer spectatable
[2025-03-21T15:30:23.051Z] Final state update: State=ENDED, StateVersion=6
[2025-03-21T15:30:23.052Z] 
===== ONE CARD POKER WITH MONTY HALL FULL GAME TEST COMPLETED =====
[2025-03-21T15:35:47.259Z] 
===== SETTING UP TEST ENVIRONMENT =====
[2025-03-21T15:35:47.288Z] Wallet setup complete.
[2025-03-21T15:35:47.288Z] Owner address: 0x1dA9aCB41763f97F744Da547F2d103042e8Ab239
[2025-03-21T15:35:47.288Z] Player 1 address: 0x9Fde625ED8A6eC0f3cA393A62be34231a5c167F4
[2025-03-21T15:35:47.288Z] Player 2 address: 0x0Fae37437c1347c23dc279b424663579d2df67df
[2025-03-21T15:35:47.289Z] Player 3 address: 0xd2e443F6CF19d5d359e82bbEea76e1133028fda5
[2025-03-21T15:35:47.289Z] Player 4 address: 0x7B7057B07218fa9f357E39cb2fC2E723C2bfcf9F
[2025-03-21T15:35:47.289Z] Keeper address: 0x1dA9aCB41763f97F744Da547F2d103042e8Ab239
[2025-03-21T15:35:47.289Z] 
----- CHECKING WALLET BALANCES -----
[2025-03-21T15:35:48.303Z] Address 0x1dA9aCB41763f97F744Da547F2d103042e8Ab239 has 0.60300631774 ETH
[2025-03-21T15:35:48.594Z] Address 0x9Fde625ED8A6eC0f3cA393A62be34231a5c167F4 has 0.9882921425 ETH
[2025-03-21T15:35:48.880Z] Address 0x0Fae37437c1347c23dc279b424663579d2df67df has 0.7408166795 ETH
[2025-03-21T15:35:49.159Z] Address 0xd2e443F6CF19d5d359e82bbEea76e1133028fda5 has 0.4906431706 ETH
[2025-03-21T15:35:49.431Z] Address 0x7B7057B07218fa9f357E39cb2fC2E723C2bfcf9F has 0.740153628 ETH
[2025-03-21T15:35:49.708Z] Address 0x1dA9aCB41763f97F744Da547F2d103042e8Ab239 has 0.60300631774 ETH
[2025-03-21T15:35:49.708Z] 
----- DEPLOYING CONTRACTS -----
[2025-03-21T15:35:49.708Z] Deploying CardLibrary...
[2025-03-21T15:35:56.009Z] CardLibrary deployed at: 0xB81e810FcF3Fb2606CB89842AeF0938eFD0e5696
[2025-03-21T15:35:56.009Z] Deploying GameLibrary...
[2025-03-21T15:36:02.206Z] GameLibrary deployed at: 0xB1083D1617A195d6799Be6532977C0Ad1c83795e
[2025-03-21T15:36:02.207Z] Deploying OneCard main contract...
[2025-03-21T15:36:04.243Z] OneCard contract deployed at: 0x03cAd95ff26cF123Ae534B764c8A08fBbb18c32e
[2025-03-21T15:36:04.243Z] Deploying PokerSpectatorView contract...
[2025-03-21T15:36:10.157Z] PokerSpectatorView contract deployed at: 0x25391082B71a0374e7e92675A0d521759Bf5E46F
[2025-03-21T15:36:10.157Z] 
Add these to your .env file for future use:
[2025-03-21T15:36:10.157Z] POKER_CONTRACT_ADDRESS=0x03cAd95ff26cF123Ae534B764c8A08fBbb18c32e
[2025-03-21T15:36:10.157Z] SPECTATOR_CONTRACT_ADDRESS=0x25391082B71a0374e7e92675A0d521759Bf5E46F
[2025-03-21T15:36:10.161Z] 
===== STARTING ONE CARD POKER WITH MONTY HALL GAME TEST =====
[2025-03-21T15:36:10.161Z] 
----- ADDING PLAYERS TO WHITELIST -----
[2025-03-21T15:36:16.253Z] Added 4 players to whitelist
[2025-03-21T15:36:16.253Z] 
----- CREATING A NEW GAME -----
[2025-03-21T15:36:22.336Z] Created Game with ID: 1
[2025-03-21T15:36:22.617Z] Initial players in game: 5
[2025-03-21T15:36:22.617Z] Player 1: 0x1dA9aCB41763f97F744Da547F2d103042e8Ab239
[2025-03-21T15:36:22.617Z] Player 2: 0x9Fde625ED8A6eC0f3cA393A62be34231a5c167F4
[2025-03-21T15:36:22.617Z] Player 3: 0x0Fae37437c1347c23dc279b424663579d2df67df
[2025-03-21T15:36:22.617Z] Player 4: 0xd2e443F6CF19d5d359e82bbEea76e1133028fda5
[2025-03-21T15:36:22.617Z] Player 5: 0x7B7057B07218fa9f357E39cb2fC2E723C2bfcf9F
[2025-03-21T15:36:22.617Z] 
----- VERIFYING GAME INFO BEFORE STARTING PEEK PHASE -----
[2025-03-21T15:36:22.898Z] Game state: REGISTRATION
[2025-03-21T15:36:22.898Z] Player count: 5
[2025-03-21T15:36:22.898Z] Active count: 5
[2025-03-21T15:36:22.898Z] Game keeper: 0x1dA9aCB41763f97F744Da547F2d103042e8Ab239
[2025-03-21T15:36:22.898Z] State version: 1
[2025-03-21T15:36:22.898Z] Is cleaned up: false
[2025-03-21T15:36:22.898Z] 
----- STARTING PEEK PHASE -----
[2025-03-21T15:36:24.284Z] startPeekPhase transaction submitted, waiting for confirmation...
[2025-03-21T15:36:29.690Z] startPeekPhase transaction confirmed!
[2025-03-21T15:36:29.691Z] Buffer period started before peek phase. Current state: REGISTRATION, Next state: PEEK_PHASE
[2025-03-21T15:36:29.691Z] Peek phase started for game 1
[2025-03-21T15:36:29.691Z] Game state updated: State=PEEK_PHASE, Pot=0, CurrentBet=0, StateVersion=2
[2025-03-21T15:36:29.969Z] Phase end time: 2025-03-21T15:38:54.000Z
[2025-03-21T15:36:29.969Z] Buffer end time: 2025-03-21T15:36:54.000Z
[2025-03-21T15:36:29.970Z] Waiting 25 seconds for buffer period to end...
[2025-03-21T15:36:29.970Z] Waiting for buffer period to end on TEN network...
[2025-03-21T15:36:34.972Z] 20 seconds remaining in buffer period
[2025-03-21T15:36:44.975Z] 10 seconds remaining in buffer period
[2025-03-21T15:36:54.979Z] Buffer period ended
[2025-03-21T15:36:54.984Z] 
----- PLAYERS PEEKING AT CARDS -----
[2025-03-21T15:36:56.152Z] Player 1 initial chip balance: 25
[2025-03-21T15:36:59.442Z] Player 1 (0x9Fde625ED8A6eC0f3cA393A62be34231a5c167F4) peeked at their card
[2025-03-21T15:36:59.443Z] Player action: peek, Amount: 5, Nonce: 1
[2025-03-21T15:36:59.461Z] Card for 0x9Fde625ED8A6eC0f3cA393A62be34231a5c167F4: 4 of Clubs
[2025-03-21T15:36:59.721Z] Player 1 chip balance after peeking: 20
[2025-03-21T15:37:00.015Z] Player 2 initial chip balance: 25
[2025-03-21T15:37:03.452Z] Player 2 (0x0Fae37437c1347c23dc279b424663579d2df67df) peeked at their card
[2025-03-21T15:37:03.453Z] Player action: peek, Amount: 5, Nonce: 1
[2025-03-21T15:37:03.461Z] Card for 0x0Fae37437c1347c23dc279b424663579d2df67df: 8 of Clubs
[2025-03-21T15:37:03.734Z] Player 2 chip balance after peeking: 20
[2025-03-21T15:37:03.734Z] 
----- PLAYER USING MONTY HALL OPTION -----
[2025-03-21T15:37:04.015Z] Player 3 initial chip balance: 25
[2025-03-21T15:37:07.434Z] Player 3 (0xd2e443F6CF19d5d359e82bbEea76e1133028fda5) used Monty Hall option
[2025-03-21T15:37:07.435Z] Player action: montyHall, Amount: 7, Nonce: 1
[2025-03-21T15:37:07.454Z] Monty Hall cards revealed to 0xd2e443F6CF19d5d359e82bbEea76e1133028fda5:
[2025-03-21T15:37:07.454Z] - 8 of Diamonds
[2025-03-21T15:37:07.454Z] - 10 of Spades
[2025-03-21T15:37:07.712Z] Player 3 chip balance after using Monty Hall: 18
[2025-03-21T15:37:11.422Z] Player 3 decided to swap their card
[2025-03-21T15:37:11.423Z] Player action: swapCard, Amount: 0, Nonce: 2
[2025-03-21T15:37:11.423Z] Player 4 (0x7B7057B07218fa9f357E39cb2fC2E723C2bfcf9F) chose not to peek or use Monty Hall
[2025-03-21T15:37:11.466Z] 0xd2e443F6CF19d5d359e82bbEea76e1133028fda5 swapped 7 of Hearts for 4 of Hearts
[2025-03-21T15:37:11.701Z] 
----- PLAYER STATUS AFTER PEEK PHASE -----
[2025-03-21T15:37:11.981Z] Player 1 (0x9Fde625ED8A6eC0f3cA393A62be34231a5c167F4):
[2025-03-21T15:37:11.981Z]   Chip balance: 20
[2025-03-21T15:37:11.981Z]   Has peeked: true
[2025-03-21T15:37:11.982Z]   Used Monty Hall: false
[2025-03-21T15:37:11.982Z]   Action nonce: 1
[2025-03-21T15:37:12.600Z] Player 2 (0x0Fae37437c1347c23dc279b424663579d2df67df):
[2025-03-21T15:37:12.600Z]   Chip balance: 20
[2025-03-21T15:37:12.601Z]   Has peeked: true
[2025-03-21T15:37:12.601Z]   Used Monty Hall: false
[2025-03-21T15:37:12.601Z]   Action nonce: 1
[2025-03-21T15:37:12.879Z] Player 3 (0xd2e443F6CF19d5d359e82bbEea76e1133028fda5):
[2025-03-21T15:37:12.880Z]   Chip balance: 18
[2025-03-21T15:37:12.880Z]   Has peeked: false
[2025-03-21T15:37:12.880Z]   Used Monty Hall: true
[2025-03-21T15:37:12.880Z]   Action nonce: 2
[2025-03-21T15:37:13.198Z] Player 4 (0x7B7057B07218fa9f357E39cb2fC2E723C2bfcf9F):
[2025-03-21T15:37:13.198Z]   Chip balance: 25
[2025-03-21T15:37:13.198Z]   Has peeked: false
[2025-03-21T15:37:13.198Z]   Used Monty Hall: false
[2025-03-21T15:37:13.198Z]   Action nonce: 0
[2025-03-21T15:37:13.198Z] 
----- WAITING FOR PEEK PHASE TO END -----
[2025-03-21T15:37:13.481Z] Waiting 101 seconds for peek phase to end...
[2025-03-21T15:37:13.481Z] Waiting for peek phase to end on TEN network...
[2025-03-21T15:39:03.495Z] Peek phase ended
[2025-03-21T15:39:03.496Z] 
----- ENDING PEEK PHASE -----
[2025-03-21T15:39:04.601Z] endPeekPhase transaction submitted, waiting for confirmation...
[2025-03-21T15:39:07.440Z] endPeekPhase transaction confirmed!
[2025-03-21T15:39:07.440Z] Buffer period started before betting phase. Current state: PEEK_PHASE, Next state: BETTING
[2025-03-21T15:39:07.440Z] Betting phase started for game 1
[2025-03-21T15:39:07.440Z] Game state updated: State=BETTING, Pot=0, CurrentBet=0, StateVersion=3
[2025-03-21T15:39:07.714Z] Phase end time: 2025-03-21T15:44:34.000Z
[2025-03-21T15:39:07.714Z] Buffer end time: 2025-03-21T15:39:34.000Z
[2025-03-21T15:39:07.714Z] Waiting 27 seconds for buffer period to end...
[2025-03-21T15:39:07.714Z] Waiting for buffer period to end on TEN network...
[2025-03-21T15:39:37.720Z] Buffer period ended
[2025-03-21T15:39:37.720Z] 
----- PLAYERS PLACING BETS -----
[2025-03-21T15:39:39.454Z] Player 1 (0x9Fde625ED8A6eC0f3cA393A62be34231a5c167F4) bet 5 chips
[2025-03-21T15:39:39.736Z] Pot after bet 1: 5, Current bet: 5
[2025-03-21T15:39:43.441Z] Player 2 (0x0Fae37437c1347c23dc279b424663579d2df67df) bet 5 chips
[2025-03-21T15:39:43.719Z] Pot after bet 2: 10, Current bet: 5
[2025-03-21T15:39:47.447Z] Player 3 (0xd2e443F6CF19d5d359e82bbEea76e1133028fda5) bet 10 chips (raising to 10)
[2025-03-21T15:39:47.728Z] Pot after bet 3: 20, Current bet: 10
[2025-03-21T15:39:51.446Z] Player 1 (0x9Fde625ED8A6eC0f3cA393A62be34231a5c167F4) bet additional 5 chips (calling the raise)
[2025-03-21T15:39:51.730Z] Pot after bet 4: 25, Current bet: 10
[2025-03-21T15:39:55.437Z] Player 2 (0x0Fae37437c1347c23dc279b424663579d2df67df) bet additional 5 chips (calling the raise)
[2025-03-21T15:39:55.717Z] Pot after bet 5: 30, Current bet: 10
[2025-03-21T15:39:59.447Z] Player 4 (0x7B7057B07218fa9f357E39cb2fC2E723C2bfcf9F) folded
[2025-03-21T15:39:59.728Z] Active players after fold: 4
[2025-03-21T15:39:59.729Z] 
----- PLAYER STATUS AFTER BETTING -----
[2025-03-21T15:40:00.011Z] Player 1 (0x9Fde625ED8A6eC0f3cA393A62be34231a5c167F4):
[2025-03-21T15:40:00.011Z]   Chip balance: 10
[2025-03-21T15:40:00.011Z]   Current bet: 10
[2025-03-21T15:40:00.011Z]   Has folded: false
[2025-03-21T15:40:00.011Z]   Action nonce: 3
[2025-03-21T15:40:00.291Z] Player 2 (0x0Fae37437c1347c23dc279b424663579d2df67df):
[2025-03-21T15:40:00.291Z]   Chip balance: 10
[2025-03-21T15:40:00.291Z]   Current bet: 10
[2025-03-21T15:40:00.291Z]   Has folded: false
[2025-03-21T15:40:00.291Z]   Action nonce: 3
[2025-03-21T15:40:00.569Z] Player 3 (0xd2e443F6CF19d5d359e82bbEea76e1133028fda5):
[2025-03-21T15:40:00.569Z]   Chip balance: 8
[2025-03-21T15:40:00.569Z]   Current bet: 10
[2025-03-21T15:40:00.569Z]   Has folded: false
[2025-03-21T15:40:00.569Z]   Action nonce: 3
[2025-03-21T15:40:00.842Z] Player 4 (0x7B7057B07218fa9f357E39cb2fC2E723C2bfcf9F):
[2025-03-21T15:40:00.842Z]   Chip balance: 25
[2025-03-21T15:40:00.842Z]   Current bet: 0
[2025-03-21T15:40:00.843Z]   Has folded: true
[2025-03-21T15:40:00.843Z]   Action nonce: 1
[2025-03-21T15:40:01.151Z] Have all active players matched the current bet? false
[2025-03-21T15:40:01.152Z] 
----- WAITING FOR BETTING PHASE TO END -----
[2025-03-21T15:40:01.429Z] Betting phase ends in 273 seconds at 2025-03-21T15:44:34.000Z
[2025-03-21T15:40:01.430Z] All players have matched bets, manually ending betting phase...
[2025-03-21T15:40:01.430Z] 
----- CHECKING GAME STATE BEFORE ENDING BETTING PHASE -----
[2025-03-21T15:40:01.698Z] Current game state: BETTING
[2025-03-21T15:40:01.698Z] Phase end time: 2025-03-21T15:44:34.000Z
[2025-03-21T15:40:01.698Z] Current time: 2025-03-21T15:40:01.698Z
[2025-03-21T15:40:01.699Z] Buffer end time: 2025-03-21T15:39:34.000Z
[2025-03-21T15:40:01.699Z] Is in buffer period: false
[2025-03-21T15:40:01.699Z] Is phase ended: false
[2025-03-21T15:40:01.974Z] Is caller (0x1dA9aCB41763f97F744Da547F2d103042e8Ab239) a keeper: true
[2025-03-21T15:40:01.974Z] Betting phase hasn't ended yet. Waiting 273 seconds...
[2025-03-21T15:40:01.974Z] Waiting for phase to end on TEN network...
[2025-03-21T15:44:37.046Z] Betting phase has now ended
[2025-03-21T15:44:37.325Z] Game state after waiting: BETTING
[2025-03-21T15:44:37.325Z] Updated phase end time: 2025-03-21T15:44:34.000Z
[2025-03-21T15:44:37.325Z] Updated buffer end time: 2025-03-21T15:39:34.000Z
[2025-03-21T15:44:37.325Z] 
----- ENDING BETTING PHASE -----
[2025-03-21T15:44:38.420Z] endBettingPhase transaction submitted, waiting for confirmation...
[2025-03-21T15:44:39.534Z] endBettingPhase transaction confirmed!
[2025-03-21T15:44:39.534Z] Showdown phase started
[2025-03-21T15:44:39.534Z] Game ended event not found in transaction logs - waiting for async event
[2025-03-21T15:44:43.610Z] Card for 0x1dA9aCB41763f97F744Da547F2d103042e8Ab239: King of Spades
[2025-03-21T15:44:43.610Z] Card for 0x9Fde625ED8A6eC0f3cA393A62be34231a5c167F4: 4 of Clubs
[2025-03-21T15:44:43.610Z] Card for 0x0Fae37437c1347c23dc279b424663579d2df67df: 8 of Clubs
[2025-03-21T15:44:43.610Z] Card for 0xd2e443F6CF19d5d359e82bbEea76e1133028fda5: 4 of Hearts
[2025-03-21T15:44:43.614Z] 
===== GAME ENDED EVENT CAPTURED =====
[2025-03-21T15:44:43.614Z] Winner: 0x1dA9aCB41763f97F744Da547F2d103042e8Ab239
[2025-03-21T15:44:43.614Z] Pot Amount: 30 chips
[2025-03-21T15:44:43.615Z] Async winner detection: 0x1dA9aCB41763f97F744Da547F2d103042e8Ab239
[2025-03-21T15:44:43.615Z] Final game state: State=SHOWDOWN, Pot=30, CurrentBet=10, StateVersion=4
[2025-03-21T15:44:43.615Z] 
----- REVEALED CARDS DURING SHOWDOWN -----
[2025-03-21T15:44:43.616Z] Error getting revealed cards: spectatorContract.getRevealedCardsForSpectating is not a function
[2025-03-21T15:44:43.616Z] 
----- FINAL GAME STATE -----
[2025-03-21T15:44:43.887Z] Game state: ENDED
[2025-03-21T15:44:43.888Z] Pot amount: 0
[2025-03-21T15:44:43.888Z] State version: 5
[2025-03-21T15:44:43.888Z] Is cleaned up: false
[2025-03-21T15:44:43.888Z] 
----- FINAL PLAYER BALANCES -----
[2025-03-21T15:44:44.167Z] Player 1 (0x9Fde625ED8A6eC0f3cA393A62be34231a5c167F4):
[2025-03-21T15:44:44.167Z]   Initial balance: 25
[2025-03-21T15:44:44.167Z]   Final balance: 10
[2025-03-21T15:44:44.168Z]   Difference: -15
[2025-03-21T15:44:44.443Z] Player 2 (0x0Fae37437c1347c23dc279b424663579d2df67df):
[2025-03-21T15:44:44.443Z]   Initial balance: 25
[2025-03-21T15:44:44.443Z]   Final balance: 10
[2025-03-21T15:44:44.443Z]   Difference: -15
[2025-03-21T15:44:44.730Z] Player 3 (0xd2e443F6CF19d5d359e82bbEea76e1133028fda5):
[2025-03-21T15:44:44.731Z]   Initial balance: 25
[2025-03-21T15:44:44.731Z]   Final balance: 8
[2025-03-21T15:44:44.731Z]   Difference: -17
[2025-03-21T15:44:45.004Z] Player 4 (0x7B7057B07218fa9f357E39cb2fC2E723C2bfcf9F):
[2025-03-21T15:44:45.005Z]   Initial balance: 25
[2025-03-21T15:44:45.005Z]   Final balance: 25
[2025-03-21T15:44:45.005Z]   Difference: 0
[2025-03-21T15:44:45.005Z] 
----- CLEANING UP THE GAME -----
[2025-03-21T15:44:47.531Z] Game cleaned up successfully
[2025-03-21T15:44:47.810Z] Game is cleaned up: true
[2025-03-21T15:44:47.810Z] Game is no longer spectatable
[2025-03-21T15:44:47.811Z] Final state update: State=ENDED, StateVersion=6
[2025-03-21T15:44:47.811Z] 
===== ONE CARD POKER WITH MONTY HALL FULL GAME TEST COMPLETED =====
